id,body,created_at
334899295,"@cognifloyd 

1) every `vars:` section or yaml vars file  is a composite vars plugin
```
vars:
   newvar: ""{{ var1 + vars2 }}""
```
2) inventory plugins and vars plugins are not related anymore, they BOTH use the inventory source paths, but not each other. The inventory plugin order matters for optimizaiton of loading, but not for source processing order, that is established by  1 order of sources passed in, 2 if one is dir, alpha sort of dir

3) ~vars plugin run at task time,  .. add_host/add_group would be your plugins~ this is now configurable both globally and per plugin, the default is still that host_group_vars run at 'task time'.
",2017-10-07T00:50:22Z
357095799,"CI failure in integration tests due to traceback:

```
2018-01-11 21:04:44 Traceback (most recent call last):
2018-01-11 21:04:44   File ""/private/var/root/ansible/bin/ansible-playbook"", line 118, in <module>
2018-01-11 21:04:44     exit_code = cli.run()
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/cli/playbook.py"", line 122, in run
2018-01-11 21:04:44     results = pbex.run()
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/executor/playbook_executor.py"", line 159, in run
2018-01-11 21:04:44     result = self._tqm.run(play=play)
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/executor/task_queue_manager.py"", line 290, in run
2018-01-11 21:04:44     play_return = strategy.run(iterator, play_context)
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/plugins/strategy/linear.py"", line 217, in run
2018-01-11 21:04:44     action = action_loader.get(task.action, class_only=True)
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/plugins/loader.py"", line 364, in get
2018-01-11 21:04:44     self._module_cache[path] = self._load_module_source(name, path)
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/plugins/loader.py"", line 340, in _load_module_source
2018-01-11 21:04:44     module = imp.load_source(full_name, path, module_file)
2018-01-11 21:04:44   File ""/private/var/root/ansible/lib/ansible/plugins/action/async_status.py"", line 12, in <module>
2018-01-11 21:04:44     from ansible.errors import AnsibleAction, AnsibleActionDone, AnsibleActionFail
2018-01-11 21:04:44 ImportError: cannot import name AnsibleAction
```",2018-01-11T23:30:30Z
363304145,"~resolved_by_pr #35696~
resolved_by_pr #74638",2018-02-06T04:01:56Z
396822493,"```
rpm -ivh https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/ansible-2.5.4-1.el7.ans.noarch.rpm

#上面安装提示失败的话请先下载下来用yum解决依赖
yum install wget -y 1 > /dev/null
wget https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/ansible-2.5.4-1.el7.ans.noarch.rpm
yum localinstall ansible-2.5.4-1.el7.ans.noarch.rpm -y
```
--------

I use the rpm to resolve the bug",2018-06-13T05:57:16Z
401404767,"~I wonder if we could just import this from xmlrpclib/xmlrpc.client instead?~

~xmlrpclib should be stdlib, but I know some distros like to make things complicated.~

done.",2018-06-29T16:23:36Z
401413607,"The test `ansible-test sanity --test import --python 2.6` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/import.html)] failed with 2 errors:
```
lib/ansible/modules/net_tools/basics/get_url.py:297:0: ImportError: cannot import name GzipDecodedResponse
lib/ansible/modules/net_tools/basics/uri.py:271:0: ImportError: cannot import name GzipDecodedResponse
```
<!-- job_id: 5b365f611afbf70800aa34ab -->
<!-- job_id: 5b365f67d77d9e080074b184 -->
<!-- job_id: /testresults/ansible-test-sanity-import-python-2.6.json -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2018-06-29T16:57:27Z
401415066,Guess there is my answer.  py2.6 does not have `GzipDecodedResponse`.,2018-06-29T17:02:54Z
401426841,"An example of a `Response` class that would work here, proving this functionality without the caller of `fetch_url` having to handle `gzip` encoding on their own.

```diff
diff --git a/lib/ansible/module_utils/urls.py b/lib/ansible/module_utils/urls.py
index d6a51c024c..f2ee7c4817 100644
--- a/lib/ansible/module_utils/urls.py
+++ b/lib/ansible/module_utils/urls.py
@@ -852,6 +852,28 @@ class GzipDecodedResponse(gzip.GzipFile if HAS_GZIP else object):
             self.io.close()


+class Response:
+    def __init__(self, response):
+        self._response = response
+        try:
+            # PY2
+            getheader = self._response.headers.getheader
+        except AttributeError:
+            # PY3
+            getheader = self._response.getheader
+
+        if getheader('content-encoding', '') == 'gzip':
+            self._stream = GzipDecodedResponse(self._response)
+        else:
+            self._stream = self._response
+
+    def __getattr__(self, name):
+        return getattr(self._response, name)
+
+    def read(self, amt=None):
+        return self._stream.read(amt)
+
+
 class Request:
     def __init__(self, headers=None, use_proxy=True, force=False, timeout=10, validate_certs=True,
                  url_username=None, url_password=None, http_agent=None, force_basic_auth=False,
@@ -1264,12 +1286,14 @@ def fetch_url(module, url, data=None, headers=None, method=None,
     r = None
     info = dict(url=url)
     try:
-        r = open_url(url, data=data, headers=headers, method=method,
-                     use_proxy=use_proxy, force=force, last_mod_time=last_mod_time, timeout=timeout,
-                     validate_certs=validate_certs, url_username=username,
-                     url_password=password, http_agent=http_agent, force_basic_auth=force_basic_auth,
-                     follow_redirects=follow_redirects, client_cert=client_cert,
-                     client_key=client_key, cookies=cookies)
+        r = Response(
+                open_url(url, data=data, headers=headers, method=method,
+                         use_proxy=use_proxy, force=force, last_mod_time=last_mod_time, timeout=timeout,
+                         validate_certs=validate_certs, url_username=username,
+                         url_password=password, http_agent=http_agent, force_basic_auth=force_basic_auth,
+                         follow_redirects=follow_redirects, client_cert=client_cert,
+                         client_key=client_key, cookies=cookies)
+        )
         # Lowercase keys, to conform to py2 behavior, so that py3 and py2 are predictable
         info.update(dict((k.lower(), v) for k, v in r.info().items()))
```",2018-06-29T17:50:25Z
407972461,"Sure. I am new to ansible actually. I moved the files from existing working set up to new ubuntu machine.
So, I think It might be the problem with ansible version or ansible.cfg

```
ubuntu@user:/home/ubuntu/ansible$ **ansible-playbook -vvvvv config_playbook.yml**
ansible-playbook 2.6.1
  config file = /home/ubuntu/ansible/ansible.cfg
  configured module search path = [u'/usr/share/ansible']
  ansible python module location = /usr/lib/python2.7/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.15rc1 (default, Apr 15 2018, 21:51:34) [GCC 7.3.0]
Using /home/ubuntu/ansible/ansible.cfg as config file
setting up inventory plugins
Parsed /etc/ansible/hosts inventory source with ini plugin
 [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

 [WARNING]: Ignoring invalid attribute: hosts

ERROR! failed to combine variables, expected dicts but got a 'dict' and a 'AnsibleSequence': 
{}

```",2018-07-26T04:26:05Z
409474751,"This could potentially fix #32265

bcoca: no, totally unrelated",2018-08-01T07:16:20Z
413651962,"cc @ptux
[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: notify --->",2018-08-16T19:04:37Z
415674398,"You could have a project with multiple inventories and not all with vaulted variables. Even you could have an inventory with vaulted variables and run some tag or limit that don't require that vaulted variables. 

It's a bit annoying to be unable to use a playbook because you don't have a password that in fact, you don't need it. Until now I fix that situation creating a file with dummy content, but this not seems very elegant.

Thus, I think that have sense if the vault password has an inventory scope too. But maybe implement this propose is more complicated that I thought. ",2018-08-24T07:19:36Z
422057432,"I think I probably also need to create a custom HTTPError also, that adds some of the conveniences too.",2018-09-17T15:16:20Z
514350158,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 94 errors:
```
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown:             name: epel
docs/docsite/rst/index.rst:0:0: unknown:             name: epel
docs/docsite/rst/index.rst:0:0: unknown:             name: epel
docs/docsite/rst/index.rst:0:0: unknown:             name: internal_firewall
docs/docsite/rst/index.rst:0:0: unknown:             name: internal_firewall
docs/docsite/rst/index.rst:0:0: unknown:             name: internal_firewall
docs/docsite/rst/index.rst:0:0: unknown:             state: present
docs/docsite/rst/index.rst:0:0: unknown:             state: present
docs/docsite/rst/index.rst:0:0: unknown:             state: present
docs/docsite/rst/index.rst:0:0: unknown:           yum_repository:
docs/docsite/rst/index.rst:0:0: unknown:           yum_repository:
docs/docsite/rst/index.rst:0:0: unknown:           yum_repository:
docs/docsite/rst/index.rst:0:0: unknown:          notify: apache_started
docs/docsite/rst/index.rst:0:0: unknown:          notify: apache_started
docs/docsite/rst/index.rst:0:0: unknown:          notify: apache_started
docs/docsite/rst/index.rst:0:0: unknown:         - name: Remove repository (and clean up left-over metadata)
docs/docsite/rst/index.rst:0:0: unknown:         - name: Remove repository (and clean up left-over metadata)
docs/docsite/rst/index.rst:0:0: unknown:         - name: Remove repository (and clean up left-over metadata)
docs/docsite/rst/index.rst:0:0: unknown:         service: name=apache state=started
docs/docsite/rst/index.rst:0:0: unknown:         service: name=apache state=started
docs/docsite/rst/index.rst:0:0: unknown:         service: name=apache state=started
docs/docsite/rst/index.rst:0:0: unknown:        - yum: name=apache state=present
docs/docsite/rst/index.rst:0:0: unknown:        - yum: name=apache state=present
docs/docsite/rst/index.rst:0:0: unknown:        - yum: name=apache state=present
docs/docsite/rst/index.rst:0:0: unknown:       - django
docs/docsite/rst/index.rst:0:0: unknown:       - django
docs/docsite/rst/index.rst:0:0: unknown:       - django
docs/docsite/rst/index.rst:0:0: unknown:       - include_role:
docs/docsite/rst/index.rst:0:0: unknown:       - include_role:
docs/docsite/rst/index.rst:0:0: unknown:       - include_role:
docs/docsite/rst/index.rst:0:0: unknown:       - name: apache_started
docs/docsite/rst/index.rst:0:0: unknown:       - name: apache_started
docs/docsite/rst/index.rst:0:0: unknown:       - name: apache_started
docs/docsite/rst/index.rst:0:0: unknown:       - postgresql_client
docs/docsite/rst/index.rst:0:0: unknown:       - postgresql_client
docs/docsite/rst/index.rst:0:0: unknown:       - postgresql_client
docs/docsite/rst/index.rst:0:0: unknown:     handlers:
docs/docsite/rst/index.rst:0:0: unknown:     handlers:
docs/docsite/rst/index.rst:0:0: unknown:     handlers:
docs/docsite/rst/index.rst:0:0: unknown:     hosts: webservers
docs/docsite/rst/index.rst:0:0: unknown:     hosts: webservers
docs/docsite/rst/index.rst:0:0: unknown:     hosts: webservers
docs/docsite/rst/index.rst:0:0: unknown:     post_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     post_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     post_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     pre_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     pre_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     pre_tasks:
docs/docsite/rst/index.rst:0:0: unknown:     roles:
docs/docsite/rst/index.rst:0:0: unknown:     roles:
docs/docsite/rst/index.rst:0:0: unknown:     roles:
docs/docsite/rst/index.rst:0:0: unknown:     tasks:
docs/docsite/rst/index.rst:0:0: unknown:     tasks:
docs/docsite/rst/index.rst:0:0: unknown:     tasks:
docs/docsite/rst/index.rst:0:0: unknown:    :caption: playbook
docs/docsite/rst/index.rst:0:0: unknown:    :caption: plays
docs/docsite/rst/index.rst:0:0: unknown:    :caption: tasks
docs/docsite/rst/index.rst:0:0: unknown:    :emphasize-lines: 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21
docs/docsite/rst/index.rst:0:0: unknown:    :emphasize-lines: 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23
docs/docsite/rst/index.rst:0:0: unknown:    :emphasize-lines: 4,5,8,9,13,14,15,16,21,22
docs/docsite/rst/index.rst:0:0: unknown:   - hosts: apiservers
docs/docsite/rst/index.rst:0:0: unknown:   - hosts: apiservers
docs/docsite/rst/index.rst:0:0: unknown:   - hosts: apiservers
docs/docsite/rst/index.rst:0:0: unknown:   - import_playbook: dbservers.yml
docs/docsite/rst/index.rst:0:0: unknown:   - import_playbook: dbservers.yml
docs/docsite/rst/index.rst:0:0: unknown:   - import_playbook: dbservers.yml
docs/docsite/rst/index.rst:0:0: unknown:   - name: setup webservers
docs/docsite/rst/index.rst:0:0: unknown:   - name: setup webservers
docs/docsite/rst/index.rst:0:0: unknown:   - name: setup webservers
docs/docsite/rst/index.rst:0:0: unknown: .. code-block:: YAML
docs/docsite/rst/index.rst:0:0: unknown: .. code-block:: YAML
docs/docsite/rst/index.rst:0:0: unknown: .. code-block:: YAML
docs/docsite/rst/index.rst:0:0: unknown: maximum 1 argument(s) allowed, 5 supplied.
docs/docsite/rst/index.rst:0:0: unknown: maximum 1 argument(s) allowed, 5 supplied.
docs/docsite/rst/index.rst:0:0: unknown: maximum 1 argument(s) allowed, 5 supplied.
docs/docsite/rst/user_guide/playbook_structure.rst:5:0: warning: Document or section may not begin with a transition.
docs/docsite/rst/user_guide/playbook_structure.rst:229:0: warning: Error in ""code-block"" directive:
docs/docsite/rst/user_guide/playbook_structure.rst:261:0: warning: Error in ""code-block"" directive:
docs/docsite/rst/user_guide/playbook_structure.rst:293:0: warning: Error in ""code-block"" directive:
```
<!-- job_id: 5d375b907abf7b000772348d -->
<!-- job_id: 5d375b9179c079000861d4ab -->
<!-- job_id: /testresults/ansible-test-sanity-docs-build.json -->
The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 1 error:
```
docs/docsite/rst/user_guide/playbook_structure.rst:229:0: Error in ""code-block"" directive:
```
<!-- job_id: 5d375b907abf7b000772348d -->
<!-- job_id: 5d375b9179c079000861d4aa -->
<!-- job_id: /testresults/ansible-test-sanity-rstcheck.json -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2019-07-23T19:28:37Z
514364206,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 1 error:
```
docs/docsite/rst/user_guide/playbook_structure.rst:5:0: warning: Document or section may not begin with a transition.
```
<!-- job_id: 5d3766f9f3609a00071a9e5c -->
<!-- job_id: 5d376700bf84b70008d25f83 -->
<!-- job_id: /testresults/ansible-test-sanity-docs-build.json -->
The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 1 error:
```
docs/docsite/rst/user_guide/playbook_structure.rst:5:0: Document or section may not begin with a transition.
```
<!-- job_id: 5d3766f9f3609a00071a9e5c -->
<!-- job_id: 5d376700bf84b70008d25f82 -->
<!-- job_id: /testresults/ansible-test-sanity-rstcheck.json -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2019-07-23T20:07:58Z
545279037,"Hello all. 
We encounter this bug regularly in our environment (ansible 2.8.4) due to files in zip archive with long dash in its names. We use ansible in gitlab pipeline, where ansible executes on gitlab runner and target host use ""unarchive"" module to unzip that files with Unicode dash in name.
Here is a module stacktrace:

```
fatal: [10.203.94.23]: FAILED! => {""changed"": false, ""module_stderr"": ""Shared connection to 10.203.94.23 closed."",
""module_stdout"": ""Traceback (most recent call last):
........./ansible-tmp-1571749224.71-276240370927176/AnsiballZ_unarchive.py\"", line 114, in <module>
    _ansiballz_main()
  File \""/home/sanchez/.ansible/tmp/ansible-tmp-1571749224.71-276240370927176/AnsiballZ_unarchive.py\"", line 106, in _ansiballz_main
    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)
  File \""/home/sanchez/.ansible/tmp/ansible-tmp-1571749224.71-276240370927176/AnsiballZ_unarchive.py\"", line 49, in invoke_module
    imp.load_module('__main__', mod, module, MOD_DESC)
  File \""/tmp/ansible_unarchive_payload_1kihg4/__main__.py\"", line 908, in <module>
  File \""/tmp/ansible_unarchive_payload_1kihg4/__main__.py\"", line 866, in main
  File \""/tmp/ansible_unarchive_payload_1kihg4/__main__.py\"", line 391, in is_unarchived
  File \""/tmp/ansible_unarchive_payload_1kihg4/ansible_unarchive_payload.zip/ansible/module_utils/_text.py\"", line 235, in to_text
  File \""/opt/freeware/lib/python2.7/encodings/utf_8.py\"", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe2 in position 29: invalid continuation byte
"", ""msg"": ""MODULE FAILURE See stdout/stderr for the exact error"", ""rc"": 1}
```
There is many of it:
```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe2 in position 14: invalid continuation byte
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe2 in position 13: invalid continuation byte
```

on different files.
Here is an ansible host version:

```
$ ansible --version
ansible 2.8.4
  config file = /etc/ansible/ansible.cfg
  configured module search path = [u'/home/gitlab-runner/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
```
Here is a destination host OS and python version:
*  Welcome to AIX Version 7.1!                                                *
$ python --version
Python 2.7.10

It is always reproducible, occurs at first run, and not about idempotency.
I think it is relevant to this bug.",2019-10-23T05:53:06Z
553085739,"I can confirm I am seeing this same exact issue:

The unarchive module is failing to extract a .tar.gz that /usr/bin/tar extracts fine:

I am using the get_url module to pull down a file from a remote source which works fine.

`ansible --version
ansible 2.8.5
  config file = None
  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/rh/rh-python36/root/usr/lib/python3.6/site-packages/ansible
  executable location = /opt/rh/rh-python36/root/usr/bin/ansible
  python version = 3.6.3 (default, May 31 2019, 13:05:43) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]`



```
HostOS: NAME=""CentOS Linux""
VERSION=""7 (Core)""
ID=""centos""
ID_LIKE=""rhel fedora""
VERSION_ID=""7""
PRETTY_NAME=""CentOS Linux 7 (Core)""
ANSI_COLOR=""0;31""
CPE_NAME=""cpe:/o:centos:centos:7""
HOME_URL=""https://www.centos.org/""
BUG_REPORT_URL=""https://bugs.centos.org/""

CENTOS_MANTISBT_PROJECT=""CentOS-7""
CENTOS_MANTISBT_PROJECT_VERSION=""7""
REDHAT_SUPPORT_PRODUCT=""centos""
REDHAT_SUPPORT_PRODUCT_VERSION=""7""
```
```
Remote ClientOS: NAME=""CentOS Linux""
VERSION=""7 (Core)""
ID=""centos""
ID_LIKE=""rhel fedora""
VERSION_ID=""7""
PRETTY_NAME=""CentOS Linux 7 (Core)""
ANSI_COLOR=""0;31""
CPE_NAME=""cpe:/o:centos:centos:7""
HOME_URL=""https://www.centos.org/""
BUG_REPORT_URL=""https://bugs.centos.org/""

CENTOS_MANTISBT_PROJECT=""CentOS-7""
CENTOS_MANTISBT_PROJECT_VERSION=""7""
REDHAT_SUPPORT_PRODUCT=""centos""
REDHAT_SUPPORT_PRODUCT_VERSION=""7""
```

Able to replicate with:
```
- name: Unarchive Bit9 installer
   unarchive: 
      src: /var/tmp
      dest: /var/opt
      remote_src: yes
      mode: ""+x""
      extra_opts: 
           - --strip-components=1
           - -zxf
      validate_certs: no
```
Tried with and without any extra opts.

Errors in Debug Mode:

```
Host:> (0, '\\r\\n{""invocation"": {""module_args"": {""checksum_algorithm"": ""sha1"", ""get_checksum"": true, ""follow"": true, ""checksum_algo"": ""sha1"", ""path"": ""/var/opt"", ""get_md5"": null, ""get_mime"": true, ""get_attributes"": true}}, ""stat"": {""charset"": ""binary"", ""uid"": 0, ""exists"": true, ""attr_flags"": """", ""woth"": false, ""isreg"": false, ""device_type"": 0, ""mtime"": 1573508690.0008953, ""block_size"": 4096, ""inode"": 8517068, ""isgid"": false, ""size"": 6, ""executable"": true, ""isuid"": false, ""readable"": true, ""version"": ""653910926"", ""pw_name"": ""root"", ""gid"": 0, ""ischr"": false, ""wusr"": true, ""writeable"": true, ""mimetype"": ""inode/directory"", ""blocks"": 0, ""xoth"": true, ""islnk"": false, ""nlink"": 2, ""issock"": false, ""rgrp"": true, ""gr_name"": ""root"", ""path"": ""/var/opt"", ""xusr"": true, ""atime"": 1573582106.4748347, ""isdir"": true, ""ctime"": 1573508690.0008953, ""isblk"": false, ""wgrp"": false, ""xgrp"": true, ""dev"": 51713, ""roth"": true, ""isfifo"": false, ""mode"": ""0755"", ""rusr"": true, ""attributes"": []}, ""changed"": false}\\r\\n', 'Shared connection to
Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/unarchive.py
Host PUT /var/lib/awx/.ansible/tmp/ansible-local-10851nEQa9t/tmpsax2wj TO /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/AnsiballZ_unarchive.py
<> SSH: EXEC sftp -b - -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -o ControlPath=/tmp/awx_1082_gg0huk32/cp/fc89cda61c '[i]'
t> (0, 'sftp> put /var/lib/awx/.ansible/tmp/ansible-local-10851nEQa9t/tmpsax2wj /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/AnsiballZ_unarchive.py\\n', '')
<host> ESTABLISH SSH CONNECTION FOR USER: root
<host> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -o ControlPath=/tmp/awx_1082_gg0huk32/cp/fc89cda61c i '/bin/sh -c '""'""'chmod u+x /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/ /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/AnsiballZ_unarchive.py && sleep 0'""'""''
<i> (0, '', '')
<> ESTABLISH SSH CONNECTION FOR USER: root
<> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -o ControlPath=/tmp/awx_1082_gg0huk32/cp/fc89cda61c -tt  '/bin/sh -c '""'""'/usr/bin/python /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/AnsiballZ_unarchive.py && sleep 0'""'""''
<t> (1, '\\r\\n{""msg"": ""Failed to find handler for \\\\""/var/tmp\\\\"". Make sure the required command to extract the file is installed. Command \\\\""/usr/bin/unzip\\\\"" could not handle archive. Command \\\\""/usr/bin/gtar\\\\"" could not handle archive."", ""failed"": true, ""exception"": ""WARNING: The below traceback may *not* be related to the actual failure.\\\\n  File \\\\""/tmp/ansible_unarchive_payload_A8osHn/__main__.py\\\\"", line 151, in <module>\\\\n    from shlex import quote\\\\n"", ""invocation"": {""module_args"": {""exclude"": [], ""directory_mode"": null, ""force"": null, ""remote_src"": true, ""follow"": false, ""owner"": null, ""extra_opts"": [""--strip-components=1"", ""-zxf""], ""group"": null, ""unsafe_writes"": null, ""keep_newer"": false, ""setype"": null, ""content"": null, ""serole"": null, ""dest"": ""/var/opt"", ""selevel"": null, ""regexp"": null, ""src"": ""/var/tmp"", ""validate_certs"": false, ""list_files"": false, ""seuser"": null, ""creates"": null, ""delimiter"": null, ""mode"": ""+x"", ""attributes"": null, ""backup"": null}}}\\r\\n', 'Shared connection to closed.\\r\\n')
<> Failed to connect to the host via ssh: Shared connection to  closed.
> ESTABLISH SSH CONNECTION FOR USER: root
<> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -o ControlPath=/tmp/awx_1082_gg0huk32/cp/fc89cda61c i '/bin/sh -c '""'""'rm -f -r /tmp/root/ansible/ansible-tmp-1573585522.28-175080413594493/ > /dev/null 2>&1 && sleep 0'""'""''
<t> (0, '', '')
The full traceback is:
WARNING: The below traceback may *not* be related to the actual failure.
  File ""/tmp/ansible_unarchive_payload_A8osHn/__main__.py"", line 151, in <module>
    from shlex import quote

fatal: [Hostname]: FAILED! => {
    ""changed"": false, 
    ""invocation"": {
        ""module_args"": {
            ""attributes"": null, 
            ""backup"": null, 
            ""content"": null, 
            ""creates"": null, 
            ""delimiter"": null, 
            ""dest"": ""/var/opt"", 
            ""directory_mode"": null, 
            ""exclude"": [], 
            ""extra_opts"": [
                ""--strip-components=1"", 
                ""-zxf""
            ], 
            ""follow"": false, 
            ""force"": null, 
            ""group"": null, 
            ""keep_newer"": false, 
            ""list_files"": false, 
            ""mode"": ""+x"", 
            ""owner"": null, 
            ""regexp"": null, 
            ""remote_src"": true, 
            ""selevel"": null, 
            ""serole"": null, 
            ""setype"": null, 
            ""seuser"": null, 
            ""src"": ""/var/tmp"", 
            ""unsafe_writes"": null, 
            ""validate_certs"": false
        }
    }, 
    ""msg"": ""Failed to find handler for \\""/var/tmp\\"". Make sure the required command to extract the file is installed. Command \\""/usr/bin/unzip\\"" could not handle archive. Command \\""/usr/bin/gtar\\"" could not handle archive.""
}

PLAY RECAP *********************************************************************
```

other info:
`_______________ 
<  AWX 4.0.0.0  >
 --------------- 
        \   ^__^
         \  (oo)\_______
            (__)      A )\/\
                ||----w |
                ||     ||`

Please let me know if this requires filing a separate bug ticket @samdoran . Thank You for your assistance.",2019-11-12T19:51:17Z
573856462,"Bump. Adding this will make it so that ansible and by proxy ansible tower are capable of handling a situation where a device goes offline during the execution of a playbook.

bcoca: it would not really change it as the tasks would still fail to initiate",2020-01-13T20:32:00Z
579454400,"I appear to have a similar issue.

I'm using unarchive in a task that should grab a tar gz archive where part of the url is a variable determined during execution of the playbook.

I can't share the full traceback from -vvv as it contains too much company sensitive information, however this is the error I can share.

Here is what I can share

```
 WARNING: The below traceback may *not* be related to the actual failure.
   File ""/tmp/ansible_unarchive_payload_rdhpQ9/ansible_unarchive_payload.zip/ansible/modules/unarchive.py"", line 763, in main
 
 fatal: [device.domain.com]: FAILED! => changed=false 
   invocation:
     module_args:
       attributes: null
       backup: null
       content: null
       copy: true
       creates: null
       delimiter: null
       dest: /this/is/a/directory
       directory_mode: null
       exclude: []
       extra_opts: []
       follow: false
       force: null
       group: null
       keep_newer: false
       list_files: false
       mode: null
       original_basename: null
       owner: null
       regexp: null
       remote_src: true
       selevel: null
       serole: null
       setype: null
       seuser: null
       src: https://s3.amazonaws.com/s3-bucket/software/software-name/software-name_1.2.7.tar.gz
       unsafe_writes: null
       validate_certs: true
   msg: 'Failure downloading https://s3.amazonaws.com/s3-bucket/software/software-name/software-name_1.2.7.tar.gz, [Errno 20] Not a directory: ''/tmp/ansible_unarchive_payload_rdhpQ9/ansible_unarchive_payload.zip/ansible/modules/software-name_1.2.7.tar.gz'''
```",2020-01-28T21:02:51Z
618996529,+1,2020-04-24T13:05:48Z
619292852,"The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 6 errors:
```
lib/ansible/module_utils/facts/virtual/ibmi.py:61:17: undefined-variable: Undefined variable 'IBMi_COMMAND_RC_SUCCESS'
lib/ansible/module_utils/facts/virtual/ibmi.py:70:21: undefined-variable: Undefined variable 'IBMi_COMMAND_RC_ERROR'
lib/ansible/module_utils/facts/virtual/ibmi.py:74:21: undefined-variable: Undefined variable 'IBMi_COMMAND_RC_ITOOLKIT_NO_KEY_JOBLOG'
lib/ansible/module_utils/facts/virtual/ibmi.py:78:15: undefined-variable: Undefined variable 'interpret_return_code'
lib/ansible/module_utils/facts/virtual/ibmi.py:93:25: bad-whitespace: Exactly one space required around assignment             system_values={}                          ^
lib/ansible/module_utils/facts/virtual/ibmi.py:96:49: bad-whitespace: Exactly one space required after assignment             virtual_facts[""OS400_SYSTEM_VALUES""] =  system_values                                                  ^
```
<!-- job_id: 5ea38035ec886d0006b4150a -->
<!-- job_id: 5ea380360d2af200077c032d -->
<!-- job_id: /testresults/ansible-test-sanity-pylint.json -->
The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 5 errors:
```
lib/ansible/module_utils/facts/virtual/ibmi.py:46:1: E302: expected 2 blank lines, found 1
lib/ansible/module_utils/facts/virtual/ibmi.py:82:1: E303: too many blank lines (3)
lib/ansible/module_utils/facts/virtual/ibmi.py:92:161: E501: line too long (169 > 160 characters)
lib/ansible/module_utils/facts/virtual/ibmi.py:93:26: E225: missing whitespace around operator
lib/ansible/module_utils/facts/virtual/ibmi.py:96:51: E222: multiple spaces after operator
```
<!-- job_id: 5ea38035ec886d0006b4150a -->
<!-- job_id: 5ea380360d2af200077c032a -->
<!-- job_id: /testresults/ansible-test-sanity-pep8.json -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2020-04-25T00:43:25Z
623928981,"@mkrizek This PR was evaluated as a potentially problematic PR for the following reasons:
* More than 50 changed files.

Such PR can only be merged by human. Contact a Core team member to review this PR on IRC: `#ansible-devel` on irc.freenode.net

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: bad_pr --->",2020-05-05T08:36:32Z
623928985,"@mkrizek: Greetings! Thanks for taking the time to open this pullrequest. In order for the community to handle your pullrequest effectively, we need a bit more information.

Here are the items we could not find in your description:
- issue type

Please set the description of this pullrequest with this template:
https://raw.githubusercontent.com/ansible/ansible/devel/.github/PULL_REQUEST_TEMPLATE.md

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2020-05-05T08:36:33Z
624121538,"@mkrizek The following file(s) in this pull request are bundled copies of modules used to support incidental tests and should not be updated:

* `test/support/integration/plugins/cache/jsonfile.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/connection/chroot.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/filter/json_query.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/inventory/aws_ec2.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/inventory/docker_swarm.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/inventory/foreman.py`
    * Possible match in the following collections: `awx.awx`
* `test/support/integration/plugins/inventory/vmware_vm_inventory.py`
    * Possible match in the following collections: `community.vmware`
* `test/support/integration/plugins/lookup/hashi_vault.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/lookup/rabbitmq.py`
    * Possible match in the following collections: `community.rabbitmq`
* `test/support/integration/plugins/module_utils/ansible_tower.py`
    * Possible match in the following collections: `awx.awx`
* `test/support/integration/plugins/module_utils/aws/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/aws/core.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/module_utils/aws/iam.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/module_utils/aws/s3.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/module_utils/aws/waiters.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/module_utils/azure_rm_common.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/module_utils/azure_rm_common_rest.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/module_utils/cloud.py`
    * Possible match in the following collections: `amazon.aws, community.general, ovirt.ovirt`
* `test/support/integration/plugins/module_utils/cloudstack.py`
    * Possible match in the following collections: `ngine_io.cloudstack`
* `test/support/integration/plugins/module_utils/common/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/common/network.py`
    * Possible match in the following collections: `os_migrate.os_migrate`
* `test/support/integration/plugins/module_utils/compat/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/compat/ipaddress.py`
    * Possible match in the following collections: `ansible.netcommon, community.crypto, community.general, jacklotusho.f5_modules`
* `test/support/integration/plugins/module_utils/crypto.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/module_utils/database.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/module_utils/docker/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/docker/common.py`
    * Possible match in the following collections: `community.general, community.kubernetes, f5networks.f5_beacon, fortinet.fortimanager, jacklotusho.f5_modules`
* `test/support/integration/plugins/module_utils/docker/swarm.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/module_utils/ec2.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/module_utils/ecs/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/ecs/api.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/module_utils/hcloud.py`
    * Possible match in the following collections: `hetzner.hcloud`
* `test/support/integration/plugins/module_utils/k8s/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/k8s/common.py`
    * Possible match in the following collections: `community.kubernetes, f5networks.f5_beacon, fortinet.fortimanager, jacklotusho.f5_modules`
* `test/support/integration/plugins/module_utils/k8s/raw.py`
    * Possible match in the following collections: `community.kubernetes`
* `test/support/integration/plugins/module_utils/mysql.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/module_utils/net_tools/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/net_tools/nios/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/net_tools/nios/api.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/module_utils/network/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/network/common/__init__.py`
    * Could not find a match in collections.
* `test/support/integration/plugins/module_utils/network/common/utils.py`
    * Possible match in the following collections: `ansible.netcommon, ibm.blockchain_platform, nttmcp.mcp, sensu.sensu_go`
* `test/support/integration/plugins/module_utils/postgres.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/module_utils/rabbitmq.py`
    * Possible match in the following collections: `community.rabbitmq`
* `test/support/integration/plugins/module_utils/vmware.py`
    * Possible match in the following collections: `community.vmware`
* `test/support/integration/plugins/modules/aws_az_info.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/aws_codebuild.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/aws_s3.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/aws_step_functions_state_machine.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/aws_step_functions_state_machine_execution.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/azure_rm_appserviceplan.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_functionapp.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_functionapp_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_mariadbconfiguration.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_mariadbconfiguration_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_mariadbdatabase.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_mariadbdatabase_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_mariadbfirewallrule.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_mariadbfirewallrule_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_mariadbserver.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_mariadbserver_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_resource.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_resource_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_storageaccount.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_webapp.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/azure_rm_webapp_info.py`
    * Possible match in the following collections: `azure.azcollection, community.azure`
* `test/support/integration/plugins/modules/azure_rm_webappslot.py`
    * Possible match in the following collections: `azure.azcollection, gavinfish.azuretest`
* `test/support/integration/plugins/modules/cloud_init_data_facts.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/cloudformation.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/cloudformation_info.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/consul_session.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/cs_role.py`
    * Possible match in the following collections: `ngine_io.cloudstack`
* `test/support/integration/plugins/modules/cs_role_permission.py`
    * Possible match in the following collections: `ngine_io.cloudstack`
* `test/support/integration/plugins/modules/cs_service_offering.py`
    * Possible match in the following collections: `ngine_io.cloudstack`
* `test/support/integration/plugins/modules/deploy_helper.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/docker_swarm.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/ec2.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_ami_info.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_eni.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_eni_info.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_group.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_instance.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/ec2_instance_info.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/ec2_key.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_vpc_igw.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/ec2_vpc_net.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/ec2_vpc_route_table.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/ec2_vpc_subnet.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/flatpak_remote.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/hcloud_server.py`
    * Possible match in the following collections: `hetzner.hcloud`
* `test/support/integration/plugins/modules/htpasswd.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/iam_role.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/k8s.py`
    * Possible match in the following collections: `community.kubernetes`
* `test/support/integration/plugins/modules/k8s_info.py`
    * Possible match in the following collections: `community.kubernetes`
* `test/support/integration/plugins/modules/locale_gen.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/lvg.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/mongodb_parameter.py`
    * Possible match in the following collections: `community.mongodb`
* `test/support/integration/plugins/modules/mongodb_user.py`
    * Possible match in the following collections: `community.mongodb`
* `test/support/integration/plugins/modules/mysql_db.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/mysql_user.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/nios_txt_record.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/nios_zone.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/openssl_certificate.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/openssl_certificate_info.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/openssl_csr.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/openssl_privatekey.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/pids.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/pkgng.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_db.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_privs.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_query.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_set.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_table.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/postgresql_user.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/python_requirements_info.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/rabbitmq_plugin.py`
    * Possible match in the following collections: `community.rabbitmq`
* `test/support/integration/plugins/modules/rabbitmq_queue.py`
    * Possible match in the following collections: `community.rabbitmq`
* `test/support/integration/plugins/modules/s3_bucket.py`
    * Possible match in the following collections: `amazon.aws`
* `test/support/integration/plugins/modules/sefcontext.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/selinux.py`
    * Possible match in the following collections: `ansible.posix`
* `test/support/integration/plugins/modules/selogin.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/sts_assume_role.py`
    * Possible match in the following collections: `community.aws`
* `test/support/integration/plugins/modules/synchronize.py`
    * Possible match in the following collections: `ansible.posix`
* `test/support/integration/plugins/modules/timezone.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/tower_credential_type.py`
    * Possible match in the following collections: `chrismeyersfsu.tower_modules`
* `test/support/integration/plugins/modules/tower_receive.py`
    * Possible match in the following collections: `awx.awx`
* `test/support/integration/plugins/modules/ufw.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/vmware_guest.py`
    * Possible match in the following collections: `community.vmware`
* `test/support/integration/plugins/modules/vmware_guest_custom_attributes.py`
    * Possible match in the following collections: `community.vmware`
* `test/support/integration/plugins/modules/vmware_host_hyperthreading.py`
    * Possible match in the following collections: `community.vmware`
* `test/support/integration/plugins/modules/x509_crl.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/x509_crl_info.py`
    * Possible match in the following collections: `community.crypto`
* `test/support/integration/plugins/modules/xml.py`
    * Possible match in the following collections: `community.general`
* `test/support/integration/plugins/modules/zabbix_host.py`
    * Possible match in the following collections: `community.zabbix`
* `test/support/integration/plugins/modules/zabbix_proxy.py`
    * Possible match in the following collections: `community.zabbix`
* `test/support/integration/plugins/modules/zypper.py`
    * Possible match in the following collections: `community.general`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/cli_config.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/net_base.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/net_get.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/net_logging.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/net_put.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/net_static_route.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/action/network.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/become/enable.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/connection/httpapi.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/connection/netconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/connection/network_cli.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/connection/persistent.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/doc_fragments/netconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/doc_fragments/network_agnostic.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/filter/ipaddr.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/filter/network.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/httpapi/restconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/compat/ipaddress.py`
    * Possible match in the following collections: `ansible.netcommon, community.crypto, community.general, jacklotusho.f5_modules`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/cfg/base.py`
    * Possible match in the following collections: `ansible.netcommon, community.grafana, flowerysong.sensu_go`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/config.py`
    * Possible match in the following collections: `ansible.netcommon, nttmcp.mcp`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/facts/facts.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/netconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/network.py`
    * Possible match in the following collections: `ansible.netcommon, os_migrate.os_migrate`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/parsing.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/common/utils.py`
    * Possible match in the following collections: `ansible.netcommon, ibm.blockchain_platform, nttmcp.mcp, sensu.sensu_go`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/netconf/netconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/module_utils/network/restconf/restconf.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/modules/cli_config.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/modules/net_get.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/modules/net_logging.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/modules/net_put.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/modules/net_static_route.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/ansible/netcommon/plugins/netconf/default.py`
    * Possible match in the following collections: `ansible.netcommon`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/action/ios.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/cliconf/ios.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/doc_fragments/ios.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/module_utils/network/ios/ios.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/modules/ios_command.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/modules/ios_config.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/cisco/ios/plugins/terminal/ios.py`
    * Possible match in the following collections: `cisco.ios`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/action/vyos.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/cliconf/vyos.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/doc_fragments/vyos.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/facts/facts.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/firewall_rules/firewall_rules.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/interfaces/interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/l3_interfaces/l3_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/lag_interfaces/lag_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/lldp_global/lldp_global.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/lldp_interfaces/lldp_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/argspec/static_routes/static_routes.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/config/lldp_interfaces/lldp_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/facts.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/firewall_rules/firewall_rules.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/interfaces/interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/l3_interfaces/l3_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/lag_interfaces/lag_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/legacy/base.py`
    * Possible match in the following collections: `vyos.vyos, community.grafana, flowerysong.sensu_go`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/lldp_global/lldp_global.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/lldp_interfaces/lldp_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/facts/static_routes/static_routes.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/utils/utils.py`
    * Possible match in the following collections: `vyos.vyos, ibm.blockchain_platform, nttmcp.mcp, sensu.sensu_go`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/module_utils/network/vyos/vyos.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_command.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_config.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_facts.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_lldp_interfaces.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_logging.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/modules/vyos_static_route.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/network-integration/collections/ansible_collections/vyos/vyos/plugins/terminal/vyos.py`
    * Possible match in the following collections: `vyos.vyos`
* `test/support/README.md`
    * Could not find a match in collections.
* `test/support/windows-integration/plugins/action/win_copy.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/action/win_reboot.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/action/win_template.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/become/runas.py`
    * Could not find a match in collections.
* `test/support/windows-integration/plugins/module_utils/Ansible.Service.cs`
    * Could not find a match in collections.
* `test/support/windows-integration/plugins/modules/async_status.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/setup.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/slurp.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_acl.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_acl.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_certificate_store.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_certificate_store.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_command.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_command.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_copy.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_copy.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_data_deduplication.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_data_deduplication.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_dsc.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_dsc.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_feature.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_feature.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_file.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_file.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_find.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_find.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_format.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_format.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_get_url.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_get_url.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_hosts.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_hosts.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_lineinfile.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_lineinfile.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_path.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_path.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_ping.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_ping.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_psexec.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_psexec.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_reboot.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_regedit.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_regedit.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_security_policy.ps1`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_security_policy.py`
    * Possible match in the following collections: `community.windows`
* `test/support/windows-integration/plugins/modules/win_shell.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_shell.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_stat.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_stat.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_tempfile.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_tempfile.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_template.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_user.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_user.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_user_right.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_user_right.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_wait_for.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_wait_for.py`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_whoami.ps1`
    * Possible match in the following collections: `ansible.windows`
* `test/support/windows-integration/plugins/modules/win_whoami.py`
    * Possible match in the following collections: `ansible.windows`

Because the original module(s) have been migrated to collections, please re-submit this pull request in relevant collection repositories, typically under [https://github.com/ansible-collections](https://github.com/ansible-collections).

If you need further assistence with identifying the correct repository, please stop by IRC or the mailing list:

* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: test_support_plugins --->",2020-05-05T15:23:39Z
647723791,"```
{
  ""cmd"": null,
  ""msg"": ""Unexpected error when accessing exploded file: [Errno 2] No such file or directory: '/usr/local/mysql-6.1.5-GA/mysql-5.7.30-linux-glibc2.12-x86_64/bin/myisam_ftdump'"",
  ""stderr"": null,
  ""stdout"": null,
  ""stdout_lines"": null,
  ""warnings"": null
}
```

code:
```
- name: Unarchive mysql
  unarchive:
    src: mysql.tar.gz
    dest: /usr/local/mysql-6.1.5-GA
    owner: mysql
    group: mysql
    extra_opts: [--strip-components=1]
    remote_src: true
  become: yes
```",2020-06-22T19:20:16Z
656881018,"> Another option is creating a regex: true/false.

Overloading the `regexp` field to accept a string and a boolean is far too confusing and wouldn't pass argument spec validation. I would definitely say no to that.

I would suggest a new field rather than a toggle that changes the behavior of an existing field.

Maybe `raw_line` or `literal_line` to indicate it is a literal string and will not be treated as a regexp pattern.
",2020-07-10T20:42:52Z
677498123,+1 on this.,2020-08-20T09:50:19Z
693374373,+1,2020-09-16T12:32:42Z
700094143,"@carpenike It would simplify using Yubikey pkcs11, but wouldn't solve your issue.",2020-09-28T15:33:22Z
724606956,Would be great to have this feature.,2020-11-10T10:17:23Z
733068389,"I am not familiar enough with python on windows and mac (if someone finds the info, I can add it to the table) but I went through the exercise of looking at the python versions that are shipped and available in a limited amount of relatively modern Linux distros:
 
|                  | 2.7                | 3.6                | 3.7                | 3.8                | 3.9                | Supported until   |
|------------------|--------------------|--------------------|--------------------|--------------------|--------------------|-------------------|
| rhel7/centos7    | :heavy_check_mark: | available  | :x:                | :x:                | :x:                | June 30th, 2024   |
| rhel8/centos8    | available     | :heavy_check_mark: | :x:                | available          | :x:                | ~~May 31st, 2029~~ December 31, 2021    |
| debian 10 buster | available   | available          | :heavy_check_mark: | :x:                | :x:                | 2024              |
| ubuntu 18.04     | available     | :heavy_check_mark: | available            | available            | :x:                | 2023-04 / 2028-04 |
| ubuntu 20.04     | :x:               | :x:                   | :x:                   | :heavy_check_mark: | available           | 2025-04 / 2030-04 |
| fedora 32        | available        | available          | available          | :heavy_check_mark: | available          | 2021-05-18        |
| fedora 33        | available        | available          | available          | available          | :heavy_check_mark: | ~2021-11          |

Sources for the table:
- https://wiki.centos.org/About/Product
- https://wiki.debian.org/Python
- https://en.wikipedia.org/wiki/Debian_version_history
- https://en.wikipedia.org/wiki/Ubuntu_version_history
- https://fedoraproject.org/wiki/SIGs/Python/features_history

In addition, data from [pypistats.org](https://pypistats.org/packages/ansible) shows that 2.7 is the most popular python version with 3.6 a distant second:

![Screenshot from 2020-11-24 10-44-58](https://user-images.githubusercontent.com/1291204/100117091-758fa700-2e42-11eb-9c76-d6c36ca7be6b.png)

![Screenshot from 2020-11-24 10-45-33](https://user-images.githubusercontent.com/1291204/100117109-79bbc480-2e42-11eb-8bf2-9fcbe1aa4d49.png)

With that in mind, bumping the minimum version to 3.8 means that it would no longer be possible to install the latest version of ansible on RHEL7/Centos7 as well as any version of Debian -- Debian 11 ""bullseye"" will ship with 3.8 in 2021.

Although we can argue that alternatives exist (i.e, using an up-to-date distro as controller node, installing other python interpreters, running from a container, etc.), the result is that it will make Ansible harder and more complicated to run for a large amount of our users.

Would bumping the minimum to 3.6 be a good compromise for the time being ? It is still widely supported, available in all the distributions I've looked at and so would have less of an impact on the users.",2020-11-24T16:00:25Z
738244000,Related to #52567 and #47322.,2020-12-03T19:29:51Z
745434700,"+1

It would be nice, if the following could be made possible:

```yml
- name: <some_task_name>
  shell: ""touch /tmp/some_file1 && touch /tmp/some_file2""
  args:
    creates:
      - ""/tmp/some_file1""
      - ""/tmp/some_file2""
```

The yml list should be an `OR-link` as default.

Currently I have no clue how to indicate, that the list should be an `AND-link`.",2020-12-15T17:13:26Z
747997721,"To answer the question ""what is missing"", some thoughts:

1. what's the difference between the `inventory` parameter to `parse()` and `self.inventory`? I saw the same object reference, but is that always so? And which one should be used?
2. ""The DataLoader can read files, auto load [...]"" -- how to do so, does it have any interface?
3. Apparently (seen in other inventory plugins) for signaling non-fatal errors `self.display` can be used, but what methods does it provide?
4. `class Cacheable` is explained in the caching section, but `class Constructable` is only mentioned as ""you can incorporate other features by adding more base classes""  -- what would it do, and if I wanted to use it, how? What other ""base classes""/mixins are provided?
5. `InventoryManager.add_group()` is not even mentioned in the docs
6. `add_host`, `add_group` only return the host/group as string, not (as I first expected) an object which could be added to other groups or provide a scoped `set_variable` method.
7. (edit 2021-01-13) How would I add a host belonging to a group? Set the `group` parameter of `InventoryManager.add_host(host, group, port)` to a string instead of None.
How would I add a host to multiple groups? Or a group? (use `InventoryData.add_child` apparently)

As I said, just some thoughts: A real API doc would surely answer more *and* would ideally be exhaustive, i.e. when something is missing there, one can be sure it is not yet provided by ansible (to avoid NIH/duplication)

I just found https://docs.ansible.com/ansible/latest/dev_guide/developing_api.html which doesn't answer these questions, but at least shows some more use of that internal API, and also provides the ""internal API"" disclaimer.

In general this means the preferred way of integrating external dynamic inventories must depend on ansible internal API and may therefore break without prior notice at any point… sounds suboptimal to me.
",2020-12-18T10:02:34Z
749224105,"Hey Anthony, thanks for raising this! I've been trying to convince folks to move to wheels for some time now but there were even more blockers in the past than there are now. We used to have quite ancient setups in the CI matrix and dropped Python 2.6 just about a year ago. Also, there's an internal mechanism for tracking the module renames that relies on symlinks that old distutils used to preserve but setuptools don't. Multiply that by versions of the packaging libs that Ubuntu 12/14 used to ship to understand some of the restrictions.
Today we have some framework to replace the module renaming/depreciation mechanism but somebody still needs to put in the work and we have a number of things to implement for the next release. For example, I and a few other people work on replacing the dependency resolver used in the `ansible-galaxy` CLI for installing collections with the one new pip uses (resolvelib). And we have a few other related UX improvements coming up after this big refactoring. Others work a lot on moving hundreds of test envs from Shippable (that is being sunset) to Azure Pipelines that includes updating the bot integrations and other related things. Some work on allowing `ansible-test` to treat the controller code separately from things that run on target nodes so we could use Python 3.8 in many places while still allowing 2.6 on remotes. There are many activities and just about a dozen core engineers who try to keep up with everything going on around the project. Also, as sivel mentioned, there's a fallible project where we're trying out new things that may feel too risky to throw into the main repo right away.
We don't intentionally hide the road map, we just don't have much resources to keep all the places up-to-date. Thankfully, some of the community team folks try to help with this as much as possible and so folks who follow the community channels usually know most of what we do. People are active on Freenode and in mailing lists. That being said, we can't track the closed issues and that's why we try to redirect folks to places where the community is active and the issue authors have a better chance of getting support from the community.
There's a chance that we may start using Discussions for some of the things but that's not decided atm.
FWIW, the community team is running the Bullhorn newsletter so you may want to follow that to get the news.

P.S. As for the ""dynamic code is not executed when the cache is used"", it's known and I believe that the workaround is documented. I'd like to drop it altogether in favor of wheels but it'll take some time for us to be able to do that.
P.P.S. You mentioned that the install first creates wheels but that's only half-true. I'm pretty sure that it's only happening in the `wheel` package is installed next to pip. Otherwise, it goes for the code path that does something like `setup.py install` directly.",2020-12-21T22:08:45Z
749763085,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/utils/plugin_docs.py:277:5: E265: block comment should start with '# '
```
<!-- job_id: 2811 -->
<!-- job_id: fd012659a6f3cfdf3ab277c81bfaca06 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2020-12-22T20:34:26Z
750735712,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/plugins/connection/local.py:88:9: E722: do not use bare 'except'
```
<!-- job_id: 2626 -->
<!-- job_id: 342b849b3da2fd91c5f59a8408a480dd -->
<!-- job_id: None -->
The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 1 error:
```
lib/ansible/plugins/connection/local.py:88:8: bare-except: No exception type(s) specified
```
<!-- job_id: 2626 -->
<!-- job_id: 829e7088eac340134ba74c9027a832cb -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2020-12-24T04:32:31Z
751393135,"> Related to #52567 and #52567.

@samdoran you put the same issue twice :)",2020-12-26T20:29:33Z
754546524,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/module_utils/facts/virtual/linux.py:196:9: E303: too many blank lines (2)
```
<!-- job_id: 3378 -->
<!-- job_id: c661c21160c809cd19e84d58a46aa693 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-05T10:21:51Z
754557306,I use antsibull-docs these days :woman_shrugging: ,2021-01-05T10:43:07Z
754574759,"I would prefer to have only oVirt, but since there was a RHV before this is probably the best way...LGTM",2021-01-05T11:19:05Z
754583907,#71979,2021-01-05T11:38:56Z
754599763,What is `antsibull-docs`?,2021-01-05T12:14:58Z
754685786,"closing as per reasoning in #73032, this should be added to a collection.",2021-01-05T14:56:29Z
754698251,closing as per above,2021-01-05T15:15:09Z
754701945,"Unsure this belongs in ansible repo as this is not a requirement for collections in general nor community collections.

cc @mattclay",2021-01-05T15:20:56Z
754703403,"Heh.  Thanks, this was to ram in an invite to the docs survey, which has now expired. I'll remove the extra header.",2021-01-05T15:23:24Z
754706936,"@bcoca ack, but the way we do certification testing is through ansible-test which seems like the right place to hold that test, until we split the testing upstream and downstream.",2021-01-05T15:28:43Z
754708274,closing as per above,2021-01-05T15:30:45Z
754713679,"
> > As there is no separate collection for `ansible.builtin` modules, staying up to date with `ansible-core` is unfortunately still very relevant.
> 
> I think this is something to be raised separately, maybe with the community team, to see if it's possible to extract this content.
> 
This would be a core team decision to make.  It makes sense to me that you'd want to maintain it separately (but use dependencies to require both are installed... Not strictly version locked, though). If you also want to stop maintaining those plugins, you'd probably want to talk to the content team about them taking over",2021-01-05T15:39:15Z
754713964,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this feature request because we already have ways to reuse tasks and variables via `include_role`/`include_vars` and other variants.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourage open dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implementing a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-05T15:39:40Z
754728385,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

In any case, from the ssh error it seems that ssh cannot resolve the hostname Ansible is passing to it, use `-vvv` to get the exact ssh command used as that will help you debug better.

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-05T16:02:28Z
754734652,just pointing it out as it should not be a default setting for ansible-test as many community collections will fail it,2021-01-05T16:12:09Z
754735588,@jpmens same code migrated into it's own repo/utility to build html docsite,2021-01-05T16:13:36Z
754740713,"@Iparkes  this is a good candidate for backporting, if you are interested https://docs.ansible.com/ansible/latest/community/development_process.html#backporting-merged-prs-in-ansible-base",2021-01-05T16:21:39Z
754751489,"Files identified in the description:
* `lib/ansible/modules/windows/win_shell.ps1`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-05T16:39:23Z
754751533,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/windows/win_shell.ps1 -> https://galaxy.ansible.com/ansible/windows

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-05T16:39:27Z
754752195,"ack, there is no requirement to run sanity testing before you upload to galaxy and the galaxy importer doesn't mandates that too. Sure the community collections would fail, but this should be surfaced to maintainers as this can be a *problem users may have with your collection* ",2021-01-05T16:40:57Z
754783229,@relrod - this looks like a sane change to me :+1: ,2021-01-05T17:32:52Z
754825433,"you still need a changelog, tests and to pass existing CI",2021-01-05T18:44:22Z
754849463,"@jeanmonet this PR contains the following merge commits:

* https://github.com/ansible/ansible/commit/07cef57542a90a4074ac21162d8e983a8811dcd8

Please [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: merge_commit_notify --->",2021-01-05T19:29:30Z
754853123,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-05T19:36:27Z
754853128,"@fourstepper: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- issue type
- component name
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-05T19:36:28Z
754855221,"Hi Bcoca,

This seems to me really contra productive to reply on a thread after almost three weeks with the answer that makes no sense!
If you read carefully the information I have initially posted, you’ll notice that I wrote: “ALL HOSTS ARE NORMALLY REACHABLE, SSH KEYS HENCE PASSWORDLESS CONNECTION ARE WORKING WELL!”

but the directly close the issue, seems to me a bit too quick, don’t you think?

anyway, thanks for nothing,",2021-01-05T19:40:28Z
754874716,We discussed this topic a bit on today's public project meeting (logs: https://meetbot.fedoraproject.org/ansible-meeting/2021-01-05/ansible_core_public_irc_meeting.2021-01-05-19.07.log.html). Unfortunately nobody was around who actually uses that feature.,2021-01-05T20:17:25Z
754876482,"@am-titan please carefully read my answer, that you have all hosts reachable is not the same thing as the host being passed to ssh by Ansilbe is reachable with the information given.  The error returned by ssh and printed by Ansible is clear and indicates you are not using the same information when accessing them directly vs the inventory provided to Ansible.

I closed this issue because it is not a bug and we do not deal with debugging user configuration here, i directed you to IRC and our mailing lists where we (and the community) can better help you with such issues.

The 10 days is mostly because you posted the question during the holiday season for the majority of the people involved in the open source project, if you want 24/7 support that is available here https://www.redhat.com/en/services/support.",2021-01-05T20:20:59Z
754878534,"The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 1 error:
```
changelogs/fragments/72869-blockinfile-newlines-succeeding-preceding.yml:4:1: empty-lines: too many blank lines (1 > 0)
```
<!-- job_id: 3407 -->
<!-- job_id: 8c2d7c6cc62c422cbdc5ca3ff3a36513 -->
<!-- job_id: None -->
The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 2 errors:
```
lib/ansible/modules/blockinfile.py:92:161: E501: line too long (186 > 160 characters)
lib/ansible/modules/blockinfile.py:99:161: E501: line too long (185 > 160 characters)
```
<!-- job_id: 3407 -->
<!-- job_id: b86d08210aaeeb4ac17b40f6d5d7fffe -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-05T20:25:02Z
754881609,"Since the name `ansible.builtin` is treated specially, it would probably make sense to use a new name, like `ansible.core` or `ansible.base` or `ansible.basic`, and use Ansible's https://github.com/ansible/ansible/blob/devel/lib/ansible/config/ansible_builtin_runtime.yml to redirect all `ansible.builtin.<oldname>`s to the new collection. If this is an option at all.",2021-01-05T20:31:21Z
754885850,"@felixfontein Thanks! Sorry for not being there, I really thought it was going to be tomorrow... :\

I will do my best to make it to the next one. ",2021-01-05T20:39:56Z
754886143,Moved to #73122 (clean-up).,2021-01-05T20:40:34Z
754892742,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
Traceback (most recent call last):
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 220, in run
    return arguments.func(arguments)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 433, in command_release
    version, codename, date)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 811, in add_release
    changes.save()
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 162, in save
    self.sort()
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 646, in sort
    for section, entries in sorted(config['changes'].items())
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 646, in <dictcomp>
    for section, entries in sorted(config['changes'].items())
TypeError: '<' not supported between instances of 'dict' and 'str'
make: *** [changelog] Error 1
```
<!-- job_id: 3410 -->
<!-- job_id: 2bb0ee3b3b768026d17d57619b431625 -->
<!-- job_id: None -->
The test `ansible-test sanity --test changelog` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/changelog.html)] failed with 1 error:
```
changelogs/fragments/72809-dnf-remove-NV.yml:0:0: section ""minor_changes"" list items must be type str not dict
```
<!-- job_id: 3410 -->
<!-- job_id: 077ee85d8e064b60a8e62e71cd924db1 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-05T20:53:38Z
754893776,"@am-titan We did see that you reported “ALL HOSTS ARE NORMALLY REACHABLE, SSH KEYS HENCE PASSWORDLESS CONNECTION ARE WORKING WELL!”. It still seemed like a host resolution issue based on the output you provided:
```
resolving ""control01"" port 22
ssh: Could not resolve hostname control01: Name or service not known
```

Issues like that are best resolved in IRC where it is possible to debug in real time.

> This seems to me really contra productive to reply on a thread after almost three weeks with the answer that makes no sense!

As @bcoca mentioned, many if not all of the project maintainers were on holiday for the last two weeks of December and just returned to work yesterday. We are still working through the backlog. Normally we review issues twice a week, but you opened an issue while everyone was out.

In any case, engaging on IRC is the best place to get help with this issue.",2021-01-05T20:55:45Z
754902037,"> Testing on the test Ansible Tower with the follwing patch leads to strange behaviour:

Hmmm. I thought I added a test case for this. I see why that's happening, though. I'll keep working on it.

> do you have a PR for python3 module ?

#73016 is the PR with changes to the module. There is no ""Python 3"" module. It is written to work with Python 2.6, 2.7, and >=3.5.",2021-01-05T21:12:14Z
754903887,"@dericcrago Please create a new PR using a branch in your fork.
<!--- boilerplate: fork --->",2021-01-05T21:15:57Z
754904480,"@samdoran, @bcoca,

thank you both for the dedication and support in the community, that’s an important cause and also appreciated!

yes, I agree that this bug was initially was opened during the holidays, I was just hoping that due this fact the cases should stay a bit longer open in order to assure that this is notabug.

I have seen the massage that states host unreachable, due to IP communication or DNS issue, either way this could still be a bug that fails to resolve hosts while being query by the ansible playbooks and not using my “normal test”.

anyway thanks again, and a happy new year 😀


",2021-01-05T21:17:13Z
754907866,"@am-titan, Ansible does not do host resolution in this case, it just passes the info to the `ssh` command, which is issuing the error you see. ",2021-01-05T21:24:13Z
754935527,"@hunter86bg I believe I have fixed the behavior you were seeing. Can you test with the latest commit in #73016?

I am still working to fix this for BSD, but it should be fixed for Linux.",2021-01-05T22:16:06Z
754951868,https://github.com/ansible/proposals/issues/127,2021-01-05T22:56:40Z
754983866,/azp run,2021-01-06T00:28:23Z
754983955,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-06T00:28:36Z
755048775,"Files identified in the description:
* [`lib/ansible/plugins/connection/winrm.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/connection/winrm.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-06T03:13:42Z
755048777,"@beyondacm: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-06T03:13:43Z
755076011,Resolved by https://github.com/ansible/ansible/pull/72861,2021-01-06T04:49:44Z
755076537,Resolved by https://github.com/ansible/ansible/pull/72477,2021-01-06T04:51:36Z
755122799,"I've manually edited the module on another test system and based on my test the last commit in #73016 seems good:
First pass:
```
PLAY RECAP **********************************************************************************************************************************************************************************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```
```
[root@test3 ~]# grep test /etc/shadow
testuser1:!$6$OdJHswQFZxPKZj8K$<redacted>:18633:0:99999:7:::
```
Second pass:
```
PLAY RECAP **********************************************************************************************************************************************************************************************************************************
localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```
```
[root@test3 ~]# grep test /etc/shadow
testuser1:!$6$OdJHswQFZxPKZj8K$<redacted>:18633:0:99999:7:::
```
",2021-01-06T06:58:21Z
755128114,"Files identified in the description:
* `lib/ansible/galaxy`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-06T07:10:32Z
755131357,"Restarting tests, since now they should pass.",2021-01-06T07:18:31Z
755140157,CI is passing now (since 2.10.5 has been released and the docsite built).,2021-01-06T07:42:40Z
755143948,No need to open issue for existing pull request. Closing in favor of https://github.com/ansible/ansible/pull/73116.,2021-01-06T07:51:48Z
755208460,"@user340 this PR contains the following merge commits:

* https://github.com/ansible/ansible/commit/582cdb8be1f128218011be028c2eb7f867cf5ae8

Please [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: merge_commit_notify --->",2021-01-06T10:07:53Z
755293730,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
test/units/galaxy/test_role_requirements.py:82:1: E302: expected 2 blank lines, found 1
```
<!-- job_id: 3466 -->
<!-- job_id: d93674024b4218c57e3f69479f39322a -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-06T13:17:32Z
755313124,"Version: `ansible 2.9.9`

I get this bug when I run ansible module `user` and running `sudo useradd Test1 -m`.",2021-01-06T13:57:27Z
755356702,"Files identified in the description:
* [`lib/ansible/plugins/connection/winrm.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/connection/winrm.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-06T15:12:50Z
755370669,@hunter86bg Thanks for confirming. I added a test case for this scenario as well. I just need to get it fixed up for BSD now.,2021-01-06T15:35:16Z
755387597,Oops! Fixed.,2021-01-06T16:01:37Z
755421849,"@hferreira23 Yes, this will be in the next set of `ansible-base` releases.",2021-01-06T16:50:53Z
755429189,"Oops, this problem exists in devel too, it just isn't triggered in devel. Closing in favor of doing this the right way.",2021-01-06T17:02:31Z
755447838,Related to #73131. ,2021-01-06T17:35:17Z
755461491,"You should also add:
   HTTP_PROXY: ''
   HTTPS_PROXY: ''
   NO_PROXY: ''
",2021-01-06T18:01:01Z
755461876,"Files identified in the description:
* [`lib/ansible/modules/setup.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/setup.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-06T18:01:41Z
755463691,"@webknjaz This PR was evaluated as a potentially problematic PR for the following reasons:
* More than 50 commits.

Such PR can only be merged by human. Contact a Core team member to review this PR on IRC: `#ansible-devel` on irc.freenode.net

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: bad_pr --->",2021-01-06T18:05:02Z
755521784,@WojciechowskiPiotr @bmillemathias @samccann thanks a lot for reviewing this!!!,2021-01-06T18:59:47Z
755570024,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 1 error:
```
docs/docsite/rst/reference_appendices/config.rst:5:0: warning: Duplicate ID: ""envvar-ANSIBLE_CONNECTION_PASSWORD_FILE"".
```
<!-- job_id: 3392 -->
<!-- job_id: 1478a088c05b8b41db83837e8f9740b8 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-06T19:34:50Z
755628728,Resolved by https://github.com/ansible/ansible/pull/72126,2021-01-06T20:17:02Z
755709305,"note that in the past we've rejected changes that push to modules the functionality of `changed_when`, even if we were to revise that I would not create a specific 'changes' that only deals with files but would have to be a generic ruleset and apply a standard most modules would use.",2021-01-06T21:15:39Z
755731832,@mattclay would it be possible to get this merged so #72497 can proceed?,2021-01-06T21:42:26Z
755737946,"> note that in the past we've rejected changes that push to modules the functionality of `changed_when`, even if we were to revise that I would not create a specific 'changes' that only deals with files but would have to be a generic ruleset and apply a standard most modules would use.

Hi @bcoca, sorry I don't catch your comment. Is there anything I need to take into account regarding current changes? Could you please refer to the code if so?

Thank you! ",2021-01-06T21:57:03Z
755755180,"After going through the review of this and thinking through it more, I'm inclined to reject this feature. Not because of any problems in this PR, but due to inherent problems in feature.

With `creates` and `removes`, the command is prevented from running unnecessarily. With `changes`, the command will always be run.

The main point of these parameters is to _prevent_ the command from running. Since it's not possible to know if an arbitrary command would change a file without running the command, I don't think this feature adds enough value to justify including it.

Sorry it took working through this to come to that realization. I'll get some other folks to weigh in and see what they think.",2021-01-06T22:26:15Z
755756759,"No problem from my side. I always learn a lot from you guys.

I'm with you to have a different approach like running the command and check if a file was created in a separate task in a playbook.",2021-01-06T22:30:00Z
755761015,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-06T22:40:33Z
755761019,"@pramos84: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-06T22:40:34Z
755762780,"Yeah, this really seems like a fancified `changed_when` that would only invite a lot more asks for different behavior (you've already shown two- mtime vs hash). If you really need something like this, it's pretty trivial to write a wrapper action that calls arbitrary module(s) and applies whatever logic you want to calculate `changed` on the final result.",2021-01-06T22:45:24Z
755789594,/azp run,2021-01-07T00:10:45Z
755789642,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-07T00:10:55Z
755858870,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T03:27:10Z
755858976,"Files identified in the description:
* [`lib/ansible/modules/include.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/include.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T03:27:33Z
755955980,"@samdoran Any thoughts about this PR? The only missing part is to decide if we change the `literal` by `literal_search` I vote for `literal` as we have also `regex` and not `regex_search`. Once decided, I think the solution is implemented and the PR ready.

Thank you!",2021-01-07T08:07:01Z
755956260,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/azure.

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-07T08:07:32Z
756048945,"Files identified in the description:
* `lib/ansible/galaxy`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T11:06:19Z
756083768,"`destination_port` is of type string, see https://docs.ansible.com/ansible/latest/collections/ansible/builtin/iptables_module.html#parameter-destination_port The documentation states that explicitly and the description gives several reasons why that is needed: you can specify service names or provide port ranges. This obviously doesn't work with pure integers :-)",2021-01-07T12:20:50Z
756123428,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 134 errors:
```
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:129:0: undefined-label: undefined label: ansible_2_9:nxos_l3_interface_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:130:0: undefined-label: undefined label: ansible_2_9:nxos_linkagg_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:131:0: undefined-label: undefined label: ansible_2_9:nxos_l2_interface_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:133:0: undefined-label: undefined label: ansible_2_9:panos_nat_rule_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:134:0: undefined-label: undefined label: ansible_2_9:panos_security_rule_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:135:0: undefined-label: undefined label: ansible_2_9:vmware_guest_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:187:0: undefined-label: undefined label: na_ontap_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:215:0: undefined-label: undefined label: nginx_status_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:217:0: undefined-label: undefined label: nxos_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:219:0: undefined-label: undefined label: nxos_l2_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:221:0: undefined-label: undefined label: nxos_l3_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:223:0: undefined-label: undefined label: nxos_lag_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:225:0: undefined-label: undefined label: nxos_vlans_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:227:0: undefined-label: undefined label: online_server_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:229:0: undefined-label: undefined label: online_user_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:231:0: undefined-label: undefined label: purefa_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:233:0: undefined-label: undefined label: purefb_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:235:0: undefined-label: undefined label: scaleway_image_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:237:0: undefined-label: undefined label: scaleway_ip_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:239:0: undefined-label: undefined label: scaleway_organization_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:241:0: undefined-label: undefined label: scaleway_security_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:243:0: undefined-label: undefined label: scaleway_server_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:245:0: undefined-label: undefined label: scaleway_snapshot_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:247:0: undefined-label: undefined label: scaleway_volume_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:249:0: undefined-label: undefined label: vcenter_extension_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:251:0: undefined-label: undefined label: vmware_about_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:253:0: undefined-label: undefined label: vmware_category_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:255:0: undefined-label: undefined label: vmware_drs_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:257:0: undefined-label: undefined label: vmware_drs_rule_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:259:0: undefined-label: undefined label: vmware_dvs_portgroup_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:261:0: undefined-label: undefined label: vmware_guest_boot_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:263:0: undefined-label: undefined label: vmware_guest_customization_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:265:0: undefined-label: undefined label: vmware_guest_disk_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:267:0: undefined-label: undefined label: vmware_host_capability_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:269:0: undefined-label: undefined label: vmware_host_config_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:271:0: undefined-label: undefined label: vmware_host_dns_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:273:0: undefined-label: undefined label: vmware_host_feature_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:275:0: undefined-label: undefined label: vmware_host_firewall_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:277:0: undefined-label: undefined label: vmware_host_ntp_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:279:0: undefined-label: undefined label: vmware_host_package_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:281:0: undefined-label: undefined label: vmware_host_service_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:283:0: undefined-label: undefined label: vmware_host_ssl_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:285:0: undefined-label: undefined label: vmware_host_vmhba_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:287:0: undefined-label: undefined label: vmware_host_vmnic_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:289:0: undefined-label: undefined label: vmware_local_role_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:291:0: undefined-label: undefined label: vmware_local_user_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:293:0: undefined-label: undefined label: vmware_portgroup_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:295:0: undefined-label: undefined label: vmware_resource_pool_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:297:0: undefined-label: undefined label: vmware_target_canonical_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:299:0: undefined-label: undefined label: vmware_vmkernel_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:301:0: undefined-label: undefined label: vmware_vswitch_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:303:0: undefined-label: undefined label: vultr_account_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:305:0: undefined-label: undefined label: vultr_block_storage_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:307:0: undefined-label: undefined label: vultr_dns_domain_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:309:0: undefined-label: undefined label: vultr_firewall_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:311:0: undefined-label: undefined label: vultr_network_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:313:0: undefined-label: undefined label: vultr_os_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:315:0: undefined-label: undefined label: vultr_plan_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:317:0: undefined-label: undefined label: vultr_region_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:319:0: undefined-label: undefined label: vultr_server_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:321:0: undefined-label: undefined label: vultr_ssh_key_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:323:0: undefined-label: undefined label: vultr_startup_script_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:325:0: undefined-label: undefined label: vultr_user_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:327:0: undefined-label: undefined label: vyos_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:329:0: undefined-label: undefined label: vyos_l3_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:331:0: undefined-label: undefined label: vyos_lag_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:333:0: undefined-label: undefined label: vyos_lldp_global_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:335:0: undefined-label: undefined label: vyos_lldp_interfaces_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:340:0: undefined-label: undefined label: vmware_cluster_drs_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:340:0: undefined-label: undefined label: vmware_cluster_ha_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:340:0: undefined-label: undefined label: vmware_cluster_vsan_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:547:0: undefined-label: undefined label: one_image_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:548:0: undefined-label: undefined label: onepassword_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:551:0: undefined-label: undefined label: oneview_datacenter_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:554:0: undefined-label: undefined label: oneview_enclosure_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:557:0: undefined-label: undefined label: oneview_ethernet_network_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:560:0: undefined-label: undefined label: oneview_fc_network_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:563:0: undefined-label: undefined label: oneview_fcoe_network_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:566:0: undefined-label: undefined label: oneview_logical_interconnect_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:569:0: undefined-label: undefined label: oneview_network_set_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:572:0: undefined-label: undefined label: oneview_san_manager_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:575:0: undefined-label: undefined label: os_flavor_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:578:0: undefined-label: undefined label: os_image_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:581:0: undefined-label: undefined label: os_keystone_domain_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:584:0: undefined-label: undefined label: os_networks_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:587:0: undefined-label: undefined label: os_port_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:590:0: undefined-label: undefined label: os_project_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:593:0: undefined-label: undefined label: os_server_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:596:0: undefined-label: undefined label: os_subnets_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:599:0: undefined-label: undefined label: os_user_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:602:0: undefined-label: undefined label: ovirt_affinity_label_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:605:0: undefined-label: undefined label: ovirt_api_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:608:0: undefined-label: undefined label: ovirt_cluster_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:611:0: undefined-label: undefined label: ovirt_datacenter_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:614:0: undefined-label: undefined label: ovirt_disk_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:617:0: undefined-label: undefined label: ovirt_event_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:620:0: undefined-label: undefined label: ovirt_external_provider_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:623:0: undefined-label: undefined label: ovirt_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:626:0: undefined-label: undefined label: ovirt_host_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:629:0: undefined-label: undefined label: ovirt_host_storage_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:632:0: undefined-label: undefined label: ovirt_network_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:635:0: undefined-label: undefined label: ovirt_nic_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:638:0: undefined-label: undefined label: ovirt_permission_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:641:0: undefined-label: undefined label: ovirt_quota_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:644:0: undefined-label: undefined label: ovirt_scheduling_policy_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:647:0: undefined-label: undefined label: ovirt_snapshot_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:650:0: undefined-label: undefined label: ovirt_storage_domain_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:653:0: undefined-label: undefined label: ovirt_storage_template_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:656:0: undefined-label: undefined label: ovirt_storage_vm_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:659:0: undefined-label: undefined label: ovirt_tag_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:662:0: undefined-label: undefined label: ovirt_template_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:665:0: undefined-label: undefined label: ovirt_user_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:668:0: undefined-label: undefined label: ovirt_vm_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:671:0: undefined-label: undefined label: ovirt_vmpool_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:674:0: undefined-label: undefined label: python_requirements_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:675:0: undefined-label: undefined label: rds_instance_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:676:0: undefined-label: undefined label: rds_snapshot_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:677:0: undefined-label: undefined label: redfish_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:680:0: undefined-label: undefined label: redshift_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:681:0: undefined-label: undefined label: route53_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:685:0: undefined-label: undefined label: vertica_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:688:0: undefined-label: undefined label: vmware_cluster_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:689:0: undefined-label: undefined label: vmware_datastore_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:690:0: undefined-label: undefined label: vmware_guest_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:691:0: undefined-label: undefined label: vmware_guest_snapshot_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:692:0: undefined-label: undefined label: vmware_tag_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:693:0: undefined-label: undefined label: vmware_vm_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:694:0: undefined-label: undefined label: xenserver_guest_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:695:0: undefined-label: undefined label: zabbix_group_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:696:0: undefined-label: undefined label: zabbix_host_info_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:701:0: undefined-label: undefined label: vmware_cluster_drs_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:701:0: undefined-label: undefined label: vmware_cluster_ha_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:701:0: undefined-label: undefined label: vmware_cluster_vsan_module (if the link has no caption the label must precede a section header)
docs/docsite/rst/porting_guides/porting_guide_2.9.rst:705:0: undefined-label: undefined label: snow_record_find_module (if the link has no caption the label must precede a section header)
```
<!-- job_id: 3553 -->
<!-- job_id: 9e775c1122956fe2521a0dcf9c8977a4 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-07T13:42:02Z
756146680,"Files identified in the description:
* [`lib/ansible/modules/file.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/file.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T14:22:45Z
756150944,"You are right @felixfontein, my bad.",2021-01-07T14:30:09Z
756159494,Would it be possible to merge this PR? Otherwise I've to cope with the stale_ci label every other week or so ;) Let me know if there are any other things I should do ...,2021-01-07T14:45:00Z
756178533,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T15:16:13Z
756181337,@dvaerum Sorry about the noise. I was worried that consolidating that logic would result in some new warnings that were not there before. I'll work on a solution.,2021-01-07T15:20:54Z
756188310,@samdoran  Probably is good closing #72748 too?,2021-01-07T15:31:45Z
756190898,"@mzima You don't have to worry about `stale_ci`. If tests passed, we'll rerun them before merging.

This PR sparked some internal discussion around the need to have a good way to allow adding support for `iptables` extensions in a way that would fail nicely if the extension was not installed. I [opened a feature request](https://github.com/ansible/ansible/issues/73012) for that.

I was trying to determine if the `set` extension is in the default extensions provided by `iptables`. It seems like it is, but I wasn't able to 100% verify that. Do you know if this is in the default set of extensions?",2021-01-07T15:35:53Z
756201214,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T15:52:01Z
756201224,"@autocoder10: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-07T15:52:02Z
756201895,"After reviewing the feature a bit more, we have decided we do not include this feature. See https://github.com/ansible/ansible/pull/73092#issuecomment-755755180 for details.",2021-01-07T15:52:53Z
756202901,I'm planning to get rid of this noisy warning in 2.11. https://github.com/ansible/ansible/pull/62027,2021-01-07T15:54:21Z
756223092,"This may not be easy to fix.  The problem is that `AnsibleVaultEncryptedUnicode` does not inherit from a string type, but implements the methods to function as a string.

In both our `urlencode` filter (used with jinja2<2.7) and in upstream jinja2, there are `isinstance` checks which prevents it from being treated as a string.

More work would need to be done to test this, but on the surface, this change to `AnsibleVaultEncryptedUnicode` allows for it to work:

```python
    @property
    def __class__(self):
        return text_type

    def __copy__(self):
        return self

    def __deepcopy__(self, *args, **kwargs):
        return self
```

(The above breaks a lot of stuff)",2021-01-07T16:26:51Z
756223762,">**Do you know if this is in the default set of extensions?**

Yes it is. Since 1.2.10 (http://www.netfilter.org/projects/iptables/files/changes-iptables-1.2.10.txt) which was released back in 2004.",2021-01-07T16:27:59Z
756226947,"@samdoran I hope there's a chance of backporting str_strict to 2.9, because otherwise it will take many, many years until it can be used (until 2.9 is dead)...",2021-01-07T16:33:26Z
756231166,`ansible_failed_task` and `ansible_failed_result` are available in `rescue` for precisely this use case. See https://docs.ansible.com/ansible/latest/user_guide/playbooks_blocks.html,2021-01-07T16:40:42Z
756232728,Duplicate of https://github.com/ansible/ansible/issues/47023,2021-01-07T16:43:12Z
756239258,"The issue here seems to be that you are using python2 on the target host, and not python3.  You can see this here:

https://builds.sr.ht/~fourstepper/job/387663#task-ubuntu-2004-627

```
TASK [Install python3-apt] *****************************************************
[WARNING]: Updating cache and auto-installing missing dependency: python-apt
ok: [instance]
```

That would `WARNING` would have indicated `python3-apt` if you were executing python3.

As such, when you run the `pip` module, it also expects that `pip` be installed for the python2 interpreter being used.  Otherwise, you can set `executable: pip3` in your task.",2021-01-07T16:54:03Z
756240823,"If you check above, the first run installs python3-apt correctly (https://builds.sr.ht/~fourstepper/job/387663#task-ubuntu-2004-130)

On the second run, it installs python-apt v2. Why would that be done?",2021-01-07T16:56:32Z
756241540,"Or should this be set for Ubuntu specifically?

https://crapts.org/2020/04/30/set-python-3-as-default-in-ubuntu-20-04-fosca-fossa/",2021-01-07T16:57:46Z
756242713,"Your `/usr/local/bin/python2` is missing the Python stdlib `ast` module:  https://docs.python.org/2.7/library/ast.html

This indicates that your python install does not contain all necessary features.

You will need to investigate how to install this module on your platform or rebuild python so that it is included.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-07T16:59:46Z
756244926,"> On the second run, it installs python-apt v2. Why would that be done?

That indicates that python2 wasn't available when the first playbook execution happened, and it was installed during that first execution.  Then the 2nd execution discovered that py2 was available and used it.

Our python auto discovery still prefers `/usr/bin/python` if found.  See https://docs.ansible.com/ansible/latest/reference_appendices/config.html#interpreter-python for how to change that behavior.",2021-01-07T17:03:17Z
756246832,"Its quite beyond me how a task that installs the ""python3-apt"" package installs the python2 vesion of that package without warning about this right away or failing",2021-01-07T17:06:04Z
756250661,"Our modules are written in python, and they often uses the Python APIs for interacting with things like `apt`.

Since you are executing `/usr/bin/python` (python2) on the target, it requires those python API bindings, and thus auto installs `python-apt` for you so that it can perform it's job.  Effectively you are telling python2, to install `python3-apt`, but to do so, python2 needs `python-apt` to achieve that result.",2021-01-07T17:09:37Z
756254066,"Rebased after #73017 has been merged.

ready_for_review",2021-01-07T17:15:34Z
756256618,The topic was again skipped today. The next meeting is next Tuesday at 19:00 UTC.,2021-01-07T17:20:15Z
756260249,"Sorry about missing again. 

Is there anything we can talk about here that would help? ",2021-01-07T17:25:54Z
756264680,"If you just want documentation, you can start by reading https://www.reddit.com/r/ansible/comments/a7x92q/in_which_case_hash_behaviourmerge_can_become/ec8mf7f/

If you wish the decision to be reversed, you will need to attend the IRC meeting with the intention of convincing the core team to reverse the decision.",2021-01-07T17:33:25Z
756267921,"I fail to see what this reddit comment is supposed to document. Is it ""why was the hash_behaviour=merge deprecated?"" or ""what are hash_behaviour=merge's alternatives?"" ?",2021-01-07T17:39:06Z
756274197,"> I fail to see what this reddit comment is supposed to document

Why hash_behavior=merge is bad.

> what are hash_behaviour=merge's alternatives?

As far as alternatives, there is no drop in replacement. The deprecation warning lists that it will require explicit playbook author decisions when to merge variables with different variable names via the jinja2 `combine` filter, which will require rewriting playbooks.

To quote from another [issue](https://github.com/ansible/ansible/issues/72669) that was raised:

> We are explicitly removing a 1 stop method of merging data, in favor of requiring authors to make individual explicit decisions for variable merging. This is exactly what was intended.
> 
> We do not plan to resurrect such a general variable merging feature.
> 
> There is no non-refactoring option.
> 
> You may elect to stay on older versions of Ansible that supports the functionality you desire. Ansible 2.9 will be supported until 2023, and Ansible 2.12 may be supported until potentially 2026",2021-01-07T17:50:16Z
756276051,"Thanks for pointing me out the solution , sorry for inconvenience! ",2021-01-07T17:53:16Z
756283329,"> Why hash_behavior=merge is bad.

Here are quotes from the reddit post that, in my opinion, relate to ""why hash_behavior=merge is bad"" but fail to provide objective information as to ""why"" :

> This feature is a mistake

> This one, in particular, has to be avoided at all costs.

> This is evil.

Here are quotes that provide an embryo of information as to why it is so bad : 

> It encourages bad practices.

> and can lead to catastrophic failures

> If you need to use it, it means something is really wrong in your inventories.

Which bad practice ? Which catastrophic failures ? What is ""really wrong"" with the inventories ?

If you want a more constructive response from someone that was using this as a core feature (before I dropped ansible altogether for new projects because of this unexplained unilateral deprecation), see my unanswered comment https://github.com/ansible/ansible/pull/63300#issuecomment-543772169 from more than a year ago.",2021-01-07T18:05:31Z
756286988,"That reddit comment only says that the person who originally got `hash_behavior=merge` into Ansible now regrets it. One person changing their mind on something is not enough justification for causing hours of unexpected extra work. Much of it paid.

If `hash_behavior=merge` is actually bad, then there should be people who have seen it cause problems, and can explain how copying and pasting code hundreds of times is a better solution. Even better would be if they can associate a financial cost with it.

As for convincing the core team not to remove something, I've seen several concrete examples on how `hash_behavior=merge` saves time and keeps things simpler. I'd also argue that removing a feature should require that the ones advocating for the removal prove it's a good idea. Not the other way around.

If you look at my profile, you can find the roles I've written. Using those roles, plus `hash_behavior=merge`, means I can change 1 or 2 files, and have that change easily applied to dozens of servers. Take away `hash_behavior=merge`, and I end up multiplying how long it takes to apply a change by however many servers I have. 

(FYI, at my workplace, most of our servers are snowflakes, they all run different apps, so I end up with lots of stuff in host_vars instead of group_vars...)

Anyway, I will keep trying to attended the meetings, but I'm still confused on why we can't hold the discussion here...
",2021-01-07T18:12:17Z
756296394,"Since it wasn't included in this I tested what happens to a `git clone` from the CLI where a repo needs `git-lfs` but `git-lfs` is not installed

```
Cloning into 'git-lfs-test'...
remote: Enumerating objects: 28, done.
remote: Total 28 (delta 0), reused 0 (delta 0), pack-reused 28
Unpacking objects: 100% (28/28), done.
git-lfs smudge 'docs/images/Lesotho_Landscape.jpg': git-lfs: command not found
error: external filter 'git-lfs smudge %f' failed 127
error: external filter 'git-lfs smudge %f' failed
fatal: docs/images/Lesotho_Landscape.jpg: smudge filter lfs failed
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry with 'git restore --source=HEAD :/'
```

Additionally it results in an exit code of 128 from git.

Looking at least in the devel code, it seems this should cause an error, but I didn't test, because I don't have a role using `git-lfs`, so it will require someone to make one, and jump through hoops to install `git-lfs` add a file using it, and then remove `git-lfs`",2021-01-07T18:28:17Z
756306478,@user340 it looks like the `string.replace()` changes got lost in your rebase? Not seeing them in the current diff.,2021-01-07T18:45:57Z
756323846,"The `python3-apt` library is only available to the system Python and not available in virtual environments. When you are using the [implicit localhost](https://docs.ansible.com/ansible/latest/inventory/implicit_localhost.html#implicit-localhost) it is necessary to specify the system Python interpreter. On a task, you would have to define `ansible_python_interpreter`.

To discuss this further, please reach out on IRC or the mailing list:

   * IRC: #ansible-devel on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-devel",2021-01-07T19:17:40Z
756326182,"Ansible 2.8 is near end of life and is currently only receives security fixes. This works in Ansible >= 2.9. Please upgrade to a newer Ansible version.

To discuss this further, please reach out on IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-07T19:22:24Z
756328060,Closing as a duplicate of https://github.com/ansible/ansible/issues/71058. We are discussing other collection level directories that would be helpful to have.,2021-01-07T19:25:55Z
756329495,"When this feature is implemented, the documentation change in https://github.com/ansible/ansible/pull/73079 needs to be removed.",2021-01-07T19:28:40Z
756333897,This change looks accurate - @jruariveiro can you please [rebase your branch](https://docs.ansible.com/ansible/latest/dev_guide/developing_rebasing.html#rebasing-a-pull-request) so we can merge this? Thanks!,2021-01-07T19:33:17Z
756334600,"Looks good, thanks @sbraz. I'll kick off a fresh CI run and merge this once it passes.",2021-01-07T19:34:32Z
756335575,"You will need to add those ciphers to your `ssh_config` in order to connect to the device. Newer versions of `openssh` disable older ciphers by default.

To discuss this further, please reach out on IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-07T19:36:22Z
756339656,"This seems like a misunderstanding when or how to use `become` on a task. This is best solved by discussing on IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-07T19:43:40Z
756342474,"We have been looking at and experimenting with different process models in Ansible (https://github.com/ansible/ansible/pull/44280). I'm going to close this since we don't have plans to work on it currently and don't like to keep feature requests open indefinitely. But we are aware of this and plan to make changes in the future.

To discuss this further, please reach out on IRC or the mailing list:

   * IRC: #ansible-devel on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-devel",2021-01-07T19:47:48Z
756344290,"Could you provide more output from the task with `-vvvvvv`? Also, IRC may be a good place to ask for help if this a connection issue and not a bug.

   * IRC: #ansible-windows or #ansible on irc.freenode.net   

needs_info",2021-01-07T19:50:50Z
756346576,Thanks @pragmatiker  and @jborean93. ,2021-01-07T19:55:09Z
756349538,"```
[all]
127.0.0.1  ansible_connection=local ansible_python_interpreter=/usr/bin/python3
```

I discovered I have this in my inventory file, which makes things even more interesting",2021-01-07T20:00:35Z
756351138,"According to your task output, you are not targeting `127.0.0.1` as defined in inventory, but targeting `instance` which is created for you by molecule as a docker container.",2021-01-07T20:03:33Z
756353093,"Files identified in the description:
* [`lib/ansible/modules/lineinfile.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/lineinfile.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T20:07:04Z
756358370,rebuild_merge,2021-01-07T20:16:24Z
756362051,rebuild_merge,2021-01-07T20:23:32Z
756362587,I believe this is a duplicate of the already resolved https://github.com/ansible/ansible/issues/70269,2021-01-07T20:24:35Z
756363107,"I believe the problem is that you did not supply `follow: false`, and the permissions were set on the target, and not the symlink itself.",2021-01-07T20:25:33Z
756363203,@samccann @acozine thanks for reviewing and merging!,2021-01-07T20:25:47Z
756379586,"Hm.. that's true, didnt realize that molecule actually isn't using the inventory file. I will close this, thank you for the help",2021-01-07T20:57:03Z
756387043,@sivel Wiill try that tomorrow. I am currently testing a migration from Ansible 2.8 to Ansible 2.10 and that would be an unexpected behavior change of the module. Will crawl through the changelog again...,2021-01-07T21:11:53Z
756389831,"The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 2 errors:
```
lib/ansible/plugins/lookup/sequence.py:62:1: error: EXAMPLES: syntax error: could not find expected ':' (syntax)
lib/ansible/plugins/lookup/sequence.py:62:1: unparsable-with-libyaml: while scanning a simple key - could not find expected ':'
```
<!-- job_id: 3583 -->
<!-- job_id: a29d3a57f51ba8398f8a6cfcc15c3ee4 -->
<!-- job_id: None -->
The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/plugins/lookup/sequence.py:79:44: W291: trailing whitespace
```
<!-- job_id: 3583 -->
<!-- job_id: e28caff85f6daf4f21fbcac28d8e8e7c -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-07T21:17:32Z
756392391,"This fix appears to have been done for the 2.9 release and would seem related: https://github.com/ansible/ansible/pull/57217

It fixed a bug where the creation of a link (attributes applied to the link) differed from ensuring the link (attributes applied to the target) on subsequent runs.

That change ensured that with `follow: yes` (which is the default) that it always applied to the target and not the link.",2021-01-07T21:21:13Z
756397440,rebuild_merge,2021-01-07T21:30:27Z
756397940,"Thanks.  Tested this for the issue I was currently seeing while porting from 2.9.10 to 2.10.4.  Works well enough to let me know what was deprecated...

```
[DEPRECATION WARNING]: community.general.actionable has been deprecated. see plugin documentation for details. This feature will be removed from community.general in version 2.0.0. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
```

I actually want to add that about 10 minutes later I was able to figure out what we were calling that was making this error be deprecation warning be displayed.  So, thank you - and I hope this patch makes it in!",2021-01-07T21:31:26Z
756399035,Related to #73137. ,2021-01-07T21:33:39Z
756400680,rebuild_merge,2021-01-07T21:37:09Z
756401998,rebuild_merge,2021-01-07T21:40:11Z
756402501,"There may still be bugs related to this on DragonFlyBSD, OpenBSD, and NetBSD. Since I don't have an easy way to test on those OSs, I'm not going to change the code for fear of breaking existing functionality. It was non-trivial to get this fixed correctly for FreeBSD.",2021-01-07T21:41:09Z
756402557,rebuild_merge,2021-01-07T21:41:15Z
756402631,Thanks for the backport @flowerysong.,2021-01-07T21:41:27Z
756404293,rebuild_merge,2021-01-07T21:44:33Z
756416356,Done rebasing,2021-01-07T22:05:21Z
756428390,"Looks good, thanks @jruariveiro! ",2021-01-07T22:32:48Z
756429598,"This change will appear in the `devel` documentation within 24 hours. If you'd like to see it appear in the `latest` documentation also, feel free to open a [backport PR](https://docs.ansible.com/ansible/latest/community/development_process.html#backporting-merged-prs-in-ansible-base). ",2021-01-07T22:35:54Z
756435146,"@relrod Yes, it seems `string.replace()` issue was resolved in this commit: 

https://github.com/ansible/ansible/commit/e0c75a6756f2c9d54239f882fed89cbeb31d2106

My pull request is duplicate to the commit. So I'd close the request.",2021-01-07T22:51:38Z
756439714,Fixed by https://github.com/ansible/ansible/commit/e0c75a6756f2c9d54239f882fed89cbeb31d2106,2021-01-07T23:03:53Z
756456450,"@JonTheNiceGuy This PR contains `@` mentions in at least one commit message. Those mentions can cause cascading notifications through GitHub and need to be removed. Please squash or amend your commits to remove the mentions.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: commit_msg_mentions --->",2021-01-07T23:50:40Z
756458861,"Files identified in the description:
* `lib/ansible/modules/net_tools/dnsimple.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-07T23:57:39Z
756458865,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/net_tools/dnsimple.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-07T23:57:39Z
756476909,"@felixfontein @samdoran Perhaps we could do one of the following to improve the transition while maintaining backwards compatibility?

1. Require setting an environment variable to opt-in to the new behavior. This would only be needed for the backports.
2. Provide another version of the scripts (such as a _v2 suffixed) that would provide the new behavior. This would be needed in all supported branches.

I think the first option is the most appealing, since it wouldn't require a separate script and the additional logic would only be needed for the backports.",2021-01-08T00:51:13Z
756556328,"The more I think about this, the more I'm wondering if there really is much of a backwards compatibility concern here. Yes, we're using a different tool to create the virtual environment, but it should provide the same behavior in the end.

If a virtual environment was created before, it should still be. If it was failing to create a virtual environment before, then the test would already be failing -- making it pass shouldn't be a problem.",2021-01-08T05:31:12Z
756572095,"As long as it suffices to set the env variable in the test scripts (and not when calling ansible-test), that's fine for me. But your new argument sounds reasonable to me as well.",2021-01-08T06:17:27Z
756572668,"@acozine thanks, your rewording sounds good! :)",2021-01-08T06:19:08Z
756572831,@samccann @acozine thanks for reviewing and merging!,2021-01-08T06:19:41Z
756574225,Thank you @sivel. This does indeed work. Seems like i was not that concentrated enough yesterday. Sorry for this issue.,2021-01-08T06:23:42Z
756635570,"Ok we've already hit our first discrepancy there. I originally encountered this in my Debian 10 WSL environment (git version 2.20.1)

Trying to repro In Ubuntu 18.04.5:

```bash
jantari@amdesktop:~$ git clone git@gitlab.company.com:ansible-roles/lfs.git lfstest
Cloning into 'lfstest'...
remote: Enumerating objects: 14, done.
remote: Counting objects: 100% (14/14), done.
remote: Compressing objects: 100% (13/13), done.
remote: Total 305 (delta 3), reused 0 (delta 0), pack-reused 291
Receiving objects: 100% (305/305), 39.76 KiB | 2.34 MiB/s, done.
Resolving deltas: 100% (152/152), done.
jantari@amdesktop:~$ echo $?
0
jantari@amdesktop:~$ git --version
git version 2.17.1
jantari@amdesktop:~$ git lfs version
fatal: 'lfs' appears to be a git command, but we were not
able to execute it. Maybe git-lfs is broken?
```

So that's where my problem came from then - Debian 10s and Ubuntu 18s *wildly* outdated git!
Testing under Ubuntu 20.04:

```bash
jantari@amdesktop:~$ git clone git@gitlab.company.com:ansible-roles/lfs.git lfstest
Cloning into 'lfstest'...
remote: Enumerating objects: 14, done.
remote: Counting objects: 100% (14/14), done.
remote: Compressing objects: 100% (13/13), done.
remote: Total 305 (delta 3), reused 0 (delta 0), pack-reused 291
Receiving objects: 100% (305/305), 39.76 KiB | 814.00 KiB/s, done.
Resolving deltas: 100% (152/152), done.
git-lfs filter-process: 1: git-lfs: not found
fatal: the remote end hung up unexpectedly
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry with 'git restore --source=HEAD :/'

jantari@amdesktop:~$ echo $?
128
jantari@amdesktop:~$ git --version
git version 2.25.1
jantari@amdesktop:~$ git lfs version
fatal: 'lfs' appears to be a git command, but we were not
able to execute it. Maybe git-lfs is broken?
```

Perhaps just a warning then when `ansible-galaxy` detects old git versions?",2021-01-08T08:58:21Z
756646558,"> Still need to decide about 'RHEV'

RHEV has been renamed to RHV in RHV 4.0, which was released in August 2016, so the last version with RHEV name 3.6, which is completely unsupported from September 2018. So from my point of view we don't need to worry about change from RHEV to RHV anymore",2021-01-08T09:21:37Z
756650499,I have added a new commit that could support both rhv and rhev for backward compatibility in the worst case I can reset the commit. ,2021-01-08T09:29:18Z
756691673,"Files identified in the description:
* `lib/ansible/modules/cloud/amazon/ec2_instance.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T10:55:03Z
756691683,"@shubhamsetia05, just so you are aware we have a dedicated Working Group for aws.
You can find other people interested in this in `#ansible-aws` on Freenode IRC
For more information about communities, meetings and agendas see https://github.com/ansible/community

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: community_workgroups --->",2021-01-08T10:55:04Z
756691688,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/cloud/amazon/ec2_instance.py -> https://galaxy.ansible.com/community/aws

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-08T10:55:05Z
756694337,"> ##### SUMMARY
> As import_playbook doesn't support vars_files so I am using something like below to read from var file
> cluster_vars: ""{{ lookup('file','vars_files/es_vars.yml' ) | from_yaml }}""
> but variable substitution is not happening if I am referring declaring one variable in vars_files and calling that variable value while declaring 2nd variable in same vars_file itself.
> 
> Please check steps to reproduce, actual and expected results below.
> 
> ##### ISSUE TYPE
> * Bug Report
> 
> ##### COMPONENT NAME
```
import_playbook
```
> ##### ANSIBLE VERSION
> ```
> 2.8.1
> ```
> 
> ##### CONFIGURATION
> ```
> 
> ```
> 
> ##### OS / ENVIRONMENT
> ##### STEPS TO REPRODUCE
> Below code is from my playbook:
> 
> ```
> - name: Spawning ES Data Nodes
>   import_playbook: provision.yml
>   vars:
>     cluster_vars: ""{{ lookup('file','vars_files/es_vars.yml' ) | from_yaml }}""
>     provision_nodes_ec2_volumes: ""{{ cluster_vars['provision_nodes_ansible2_ec2_volumes_data_node'] }}
> ```
> 
> Below code is from my vars file:
> 
> ```
> provision_nodes_ansible2_ec2_volumes_master_node:
>   - device_name: /dev/sda1
>     ebs:
>       volume_size: 15
>       delete_on_termination: true
>   - device_name: /dev/xvdb
>     virtual_name: ephemeral0
> 
> provision_nodes_ec2_volumes_data_node: ""{{ provision_nodes_ec2_volumes_master_node }}""
> ```
> 
> ##### EXPECTED RESULTS
> ```
> TASK [provision_nodes : debug] ***************************************************************************************************************************************************************************************************************
> ok: [localhost] => {
>     ""msg"": ""Var is [{'ebs': {'delete_on_termination': True, 'volume_size': 15}, 'device_name': '/dev/sda1'}, {'virtual_name': 'ephemeral0', 'device_name': '/dev/xvdb'}]""
> }
> ```
> 
> ##### ACTUAL RESULTS
> ```
> TASK [provision_nodes : debug] ***************************************************************************************************************************************************************************************************************
> ok: [localhost] => {
>     ""msg"": ""Var is {{ provision_nodes_ansible2_ec2_volumes_master_node }}""
> }
> ```
> 
> ```
> 
> ```

",2021-01-08T11:01:10Z
756735147,!needs_collection_redirect,2021-01-08T12:39:24Z
756735483,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T12:40:21Z
756735487,"@shubhamsetia05: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-08T12:40:21Z
756746153,@sivel I can't see how the solution you mention could help on this one.. can you please explain?,2021-01-08T13:06:21Z
756768963,"@bcoca I have added the changelog and CI is passing

Before adding the test I would like to ask for advice because I have never done it. should I add the test [here](https://github.com/ansible/ansible/tree/devel/test/integration/targets/unarchive) ?

Is ok if I add something similar to the test playbook I posted when I opened the PR? Testing this PR requires to run the playbook as root to verify if the permissions are properly applied to other user. I am not sure what would be the right way to do this so the test is accepted. Any advice?

If you point me to any docs or example on how I should write the test that would be great. thanks",2021-01-08T13:59:06Z
756801549,"Files identified in the description:
* `lib/ansible/playbook`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T15:03:18Z
756804489,closing as per above.,2021-01-08T15:08:26Z
756806449,"Files identified in the description:
* [`lib/ansible/modules/copy.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/copy.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T15:11:39Z
756807324,also need 'global' fix for dwim by passing in error/warning required by caller from the global `errors` that lookups now have.,2021-01-08T15:13:08Z
756809235,proxy suport was added to the internal `fetch_file` function that apt_key uses so this is fixed in newer versions.,2021-01-08T15:16:14Z
756809884,"closing as per
https://github.com/ansible/ansible/issues/31691#issuecomment-336619221",2021-01-08T15:17:10Z
756812883,reclassified as this is still correct for ansible-test's main usage but we can add a feature to disable this check for those using it outside the ansible repo.,2021-01-08T15:22:24Z
756814037,closing as subset #34594,2021-01-08T15:24:27Z
756814698,Dupe of #46780,2021-01-08T15:25:43Z
756816066,"we still have no reproducer of this nor any other reports of this issue happening with other editors.

@brandonkal is this still and issue? have you been able to reproduce in any other way?

needs_info",2021-01-08T15:28:12Z
756816646,"anything still missing on this?

needs_info",2021-01-08T15:29:13Z
756817459,"it is already mentioned in third party utilities, we believe this is sufficient for now.",2021-01-08T15:30:32Z
756818187,"is this still being worked on?

needs_info",2021-01-08T15:31:53Z
756818303,"is this still being worked on?

needs_info",2021-01-08T15:32:03Z
756818417,"is this still being worked on?

needs_info",2021-01-08T15:32:15Z
756818545,"is this still being worked on?

needs_info",2021-01-08T15:32:28Z
756820486,closing as per above,2021-01-08T15:35:52Z
756820883,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T15:36:29Z
756821162,mostly implemented in  #62151,2021-01-08T15:37:04Z
756821623,closing as per above,2021-01-08T15:37:48Z
756822902,"Enabled `debugger: on_failure` and got this message.

```
TASK [Install nginx] ***********************************************************
fatal: [13.233.167.149]: FAILED! => {""changed"": false, ""msg"": ""No package matching 'nginx' is available""}
[13.233.167.149] TASK: Install nginx (debug)> User interrupted execution
```

but there was no manual interruption from me.",2021-01-08T15:40:10Z
756823389,"I was unable to duplicate this using Atom or Nova. This seems to be working properly.

```
> sw_vers
ProductName:	macOS
ProductVersion:	11.1
BuildVersion:	20C69

> ansible --version
ansible 2.10.4
  config file = /Users/sdoran/.ansible.cfg
  configured module search path = ['/usr/local/share/ansible/library']
  ansible python module location = /Users/sdoran/.pyenv/versions/3.9.0/envs/ansible-core-2.10-3.9.0/lib/python3.9/site-packages/ansible
  executable location = /Users/sdoran/.pyenv/versions/ansible-core-2.10-3.9.0/bin/ansible
  python version = 3.9.0 (default, Oct 14 2020, 11:40:34) [Clang 12.0.0 (clang-1200.0.32.2)]

> atom --version
Atom    : 1.53.0
Electron: 6.1.12
Chrome  : 76.0.3809.146
Node    : 12.4.0

> ansible-vault view vaulted.yml
Vault password:
# vaulted file
some: var

> set -x EDITOR atom -w

> ansible-vault edit vaulted.yml
Vault password:

> ansible-vault view vaulted.yml
Vault password:
# vaulted file
some: var
another: var
```",2021-01-08T15:41:05Z
756823747,closing as per above,2021-01-08T15:41:41Z
756824947,"Thanks @JonTheNiceGuy. I'll merge now, and the new example will appear in the `devel` docs within 24 hours. If you'd also like to see it in the `latest` docs, feel free to open a [backport PR](https://docs.ansible.com/ansible/latest/community/development_process.html#backporting-merged-prs-in-ansible-base). ",2021-01-08T15:43:48Z
756825905,"Files identified in the description:
* [`lib/ansible/modules/package.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/package.py)
* [`lib/ansible/modules/yum.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/yum.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-08T15:45:38Z
756825971,closing as per above,2021-01-08T15:45:45Z
756826984,closing as the original issue is mostly a misunderstanding and now the issue is trending into different discussions more appropriate for core IRC meetings.,2021-01-08T15:47:37Z
756827987,"Thanks for noticing and fixing that, @JensHeinrich. I have no idea why the CI suite is failing, but it is not related to this change. I will investigate.",2021-01-08T15:49:09Z
756831323,Closing since we cannot reproduce and also do not believe this is an issue as we do handle templating post queue.,2021-01-08T15:54:32Z
756833698,waiting_on_contributor,2021-01-08T15:58:34Z
756836080,"@bcoca Thanks for keeping tabs on these older issues!

I just tested it and also cannot reproduce this anymore. So, this has been fixed somewhere in the last 2 years.",2021-01-08T16:02:30Z
756836439,"Closing as we have no plans to implement this feature nor do we forsee accepting it if someone else would develop it.

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourageopen dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implenting a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-08T16:03:07Z
756841513,"note: we can add a 'vault file extension' config (default to .vault) but would 'multiply it' with existing yaml/vars file extensions to avoid collisions with other vaulted content. i.e ( .json.vault, .yaml.vault, etc)",2021-01-08T16:09:15Z
756859794,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/plugins/strategy/__init__.py:910:5: E303: too many blank lines (2)
```
<!-- job_id: 3629 -->
<!-- job_id: 670ef7b3eaba5830262ee8ad024f62e2 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-08T16:39:13Z
756864080,"When using python2 did you have libselinux-python installed?  If you didn't then ansible would not have set selinux context on the files.

Curious if this is something different between py2 vs py3, or whether you've introduced selinux python APIs into the equation when they weren't with py2.",2021-01-08T16:46:46Z
756897819,"I updated the macOS 11 image to 11.1 and Python 3.9.1 as well as removed `virutalenv`. I think that should resolve the last test issue. As a bonus, the 11.1 image is 2GB smaller than the 11.0 image.",2021-01-08T17:34:55Z
756904404,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 1 error:
```
docs/docsite/rst/reference_appendices/config.rst:93:0: warning: malformed hyperlink target.
```
<!-- job_id: 3635 -->
<!-- job_id: 3f0a6b591293b8ffcf02ea5c54c30cf8 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-08T17:49:03Z
756938401,@sivel - Yes we had `libselinux-python` installed. We've had selinux enabled when running with py2 and py3. But it seemed like when running Ansible with py3 that the selinux permissions were not correct.,2021-01-08T19:00:24Z
756942503,/azp run,2021-01-08T19:09:08Z
756942581,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-08T19:09:20Z
756944064,/azp run,2021-01-08T19:11:36Z
756944148,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-08T19:11:48Z
756946179,"Thank you @NamalSanjaya for your interest in the Ansible documentation. Unfortunately, these changes do not match the overall Ansible [documentation style](https://docs.ansible.com/ansible/latest/dev_guide/style_guide/index.html). If you have questions about the documentation, or about using Ansible, you can [contact the Ansible community](https://docs.ansible.com/ansible/latest/community/communication.html) for answers.",2021-01-08T19:16:14Z
756949295,apologies for leaving open @bcoca its all clear,2021-01-08T19:23:46Z
756959932,@sivel @acozine thanks for reviewing and merging!,2021-01-08T19:48:43Z
756962855,"This is an improvement, thanks @sey and @Akasurde. I've committed the last whitespace correction and will merge as soon as the latest commit passes our CI suite.",2021-01-08T19:55:36Z
756966152,"@bmillemathias I like `duplicated`, which is clearly an adjective; `duplicate` is less clear because it can be an adjective or a verb.",2021-01-08T20:02:56Z
756966458,/rebuild,2021-01-08T20:03:33Z
756967476,rebuild,2021-01-08T20:05:41Z
756967903,rebuild,2021-01-08T20:06:39Z
756968984,Thanks @bsolomon1124 and sorry I dropped the ball on this over the holidays. I'll try to get it merged now.,2021-01-08T20:08:58Z
756969047,rebuild_merge,2021-01-08T20:09:06Z
756969399,/azp run,2021-01-08T20:09:48Z
756969466,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-08T20:09:58Z
756969536,/azp run,2021-01-08T20:10:10Z
756969601,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-08T20:10:20Z
756980392,Closing per discussion in #73076,2021-01-08T20:21:57Z
756990344,@relrod thanks!,2021-01-08T20:46:10Z
757000476,"@samdoran thanks, that would be awesome :D",2021-01-08T21:12:49Z
757006705,/azp run,2021-01-08T21:28:48Z
757006769,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-08T21:28:59Z
757012395,"@felixfontein I've opened backports for stable-2.10 and stable-2.9:

- https://github.com/ansible/ansible/pull/73163
- https://github.com/ansible/ansible/pull/73164

After discussing with @relrod we decided to go with opt-in behavior, just to be safe. To opt-in to the new behavior in those branches, tests will need to set the `ANSIBLE_TEST_PREFER_VENV` environment variable. So something like this would work:

```bash
export ANSIBLE_TEST_PREFER_VENV=1
source virtualenv.sh
```

Whereas before the tests simply used:

```bash
source virtualenv.sh
```

This should allow a single test configuration to work across 2.9, 2.10 and devel once the backports are merged.",2021-01-08T21:44:40Z
757021171,Thanks @acozine. Backport PR raised - #73165,2021-01-08T22:02:31Z
757044418,"@ganeshrn This pullrequest is waiting for your response. Please respond or the pullrequest will be closed.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-08T23:18:59Z
757119806,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-09T09:04:00Z
757119809,"@aybcoo: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-09T09:04:00Z
757134536,"Files identified in the description:
* [`lib/ansible/module_utils/facts/virtual/linux.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/module_utils/facts/virtual/linux.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-09T11:18:26Z
757335194,"It's caused by `dnf` upgrade and already solved via commit 0708421, which is released since v2.9.8. So you need to upgrade your Ansible or manually patch the file.

Just a note for how I found this.

1. I don't have this issue with the latest version of Ansible which is 2.9.16
2. So I diff the dnf module between 2.9.6 and 2.9.16. 

    ```bash
    $ git diff v2.9.6 v2.9.16 -- lib/ansible/modules/packaging/os/dnf.py
    ```

    And found these additions

    ```diff
    -        if to_text(""no package matched"") in to_text(error):
    +        if (
    +            to_text(""no package matched"") in to_text(error) or
    +            to_text(""No match for argument:"") in to_text(error)
    +        ):
    ```
3. I blamed the line and found the relevant commit.
    
    ```bash
    git blame -L 364 lib/ansible/modules/packaging/os/dnf.py

    07084217dc4 lib/ansible/modules/packaging/os/dnf.py        (Rick Elrod        2020-04-29 16:30:01 -0500  364)             'No match for argument:' in to_native(error)
    ```

4. Get all the tags that contain this commit 

    ```bash
    git tag --list --contains 0708421 --sort v:refname

    v2.9.8
    v2.9.9
    v2.9.10
    v2.9.11
    v2.9.12
    v2.9.13
    v2.9.14
    v2.9.14rc1
    v2.9.15
    v2.9.15rc1
    v2.9.16
    v2.9.16rc1
    ```",2021-01-09T16:58:55Z
757340352,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-09T17:35:42Z
757371089,"@mattclay great, thanks! I've tried it out in ansible-collections/community.hashi_vault#45, works perfectly!",2021-01-09T21:39:26Z
757377085,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
mkdir -p rst/cli
../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py
../../hacking/build-ansible.py document-keywords --template-dir=../templates --output-dir=rst/reference_appendices/ ../../lib/ansible/keyword_desc.yml
../../hacking/build-ansible.py docs-build base -o rst ;\

../bin/testing_formatter.sh
CPUS=2 make -f Makefile.sphinx singlehtml
make[1]: Entering directory '/root/ansible/docs/docsite'
sphinx-build -M singlehtml ""rst"" ""_build"" -j 2 -n -w rst_warnings 
Running Sphinx v1.7.9
Makefile.sphinx:24: recipe for target 'singlehtml' failed
make[1]: Leaving directory '/root/ansible/docs/docsite'
Makefile:66: recipe for target 'base_singlehtmldocs' failed
--> Standard Error
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize config: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.config:plugin_type=lookup|ansible.builtin.config did not return correct RETURN or EXAMPLES.
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize random_choice: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.random_choice:plugin_type=lookup|ansible.builtin.random_choice did not return correct RETURN or EXAMPLES.
../bin/testing_formatter.sh: 38: ../bin/testing_formatter.sh: cannot open ../docsite/rst/dev_guide/testing/sanity/index.rst: No such file

Extension error:
Could not import extension pygments_lexer (exception: No module named 'pygments_lexer')
make[1]: *** [singlehtml] Error 2
make: *** [base_singlehtmldocs] Error 2
```
<!-- job_id: 3701 -->
<!-- job_id: df17c1076a1eade15fccec08184c1c1e -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-09T22:30:14Z
757378803,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
mkdir -p rst/cli
../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py
../../hacking/build-ansible.py document-keywords --template-dir=../templates --output-dir=rst/reference_appendices/ ../../lib/ansible/keyword_desc.yml
../../hacking/build-ansible.py docs-build base -o rst ;\

../bin/testing_formatter.sh
CPUS=2 make -f Makefile.sphinx singlehtml
make[1]: Entering directory '/root/ansible/docs/docsite'
sphinx-build -M singlehtml ""rst"" ""_build"" -j 2 -n -w rst_warnings 
Running Sphinx v1.7.9
Makefile.sphinx:24: recipe for target 'singlehtml' failed
make[1]: Leaving directory '/root/ansible/docs/docsite'
Makefile:66: recipe for target 'base_singlehtmldocs' failed
--> Standard Error
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize config: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.config:plugin_type=lookup|ansible.builtin.config did not return correct RETURN or EXAMPLES.
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize random_choice: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.random_choice:plugin_type=lookup|ansible.builtin.random_choice did not return correct RETURN or EXAMPLES.
../bin/testing_formatter.sh: 38: ../bin/testing_formatter.sh: cannot open ../docsite/rst/dev_guide/testing/sanity/index.rst: No such file

Exception occurred:
  File ""/usr/local/lib/python3.6/dist-packages/sphinx_antsibull_ext/assets.py"", line 45, in setup_assets
    app.add_css_file(file)
AttributeError: 'Sphinx' object has no attribute 'add_css_file'
The full traceback has been saved in /tmp/sphinx-err-yzrz69z_.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
make[1]: *** [singlehtml] Error 2
make: *** [base_singlehtmldocs] Error 2
```
<!-- job_id: 3702 -->
<!-- job_id: 958647d7d495ed55b7ce71353590d61a -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-09T22:46:00Z
757441434,"This is strange. Sphinx 2.1.2 (https://github.com/ansible/ansible/blob/devel/docs/docsite/requirements.txt#L5) already has add_css_file (https://github.com/sphinx-doc/sphinx/blob/v2.1.2/sphinx/application.py#L960). Maybe an even older version of Sphinx is used here? It must have been before version 1.8.0, since add_css_file was added then (https://github.com/sphinx-doc/sphinx/commit/3afc72fba41f945610263be79d14c95d21478248).

This should get fixed by ansible-community/antsibull#233, but maybe the very old Sphinx version used for docsite testing also needs to be updated :)",2021-01-10T08:58:32Z
757457344,Can confirm the same issue in ansible 2.10.4,2021-01-10T11:08:04Z
757463384,"By default, Ansible [replaces the hash in the variables](https://docs.ansible.com/ansible/latest/reference_appendices/config.html#default-hash-behaviour). 

In your case, the value of `nginx` is replaced by the one configured in `nx2.yml`, which is `{'servername5': 'nx.server5.com', 'servername6': 'nx.server6.com'}`, so `nginx.servername1` is not actually available in the end.

If you want Ansible to merge(update) your hash instead of replace it, you need to configure it specifically. 

Via environment variables

```bash
ANSIBLE_HASH_BEHAVIOUR=merge ansible-playbook roles/test/tasks/main1.yml 
```

Or via `ansible.cfg`

```ini
[defaults]
hash_behaviour = merge
```

Cheers!",2021-01-10T11:51:37Z
757478921,"> > Enabling passwordless sudo for rsync seems to do the trick for me:
> > ```yaml
> >   lineinfile:
> >     path: /etc/sudoers
> >     state: present
> >     insertafter: EOF
> >     line: '{{ ansible_user }} ALL=NOPASSWD:/usr/bin/rsync'
> > ```
> 
> Attention, that gives the connecting user root access to the entire system.

you shouldn't trade security for convenience, IMHO.",2021-01-10T13:46:09Z
757512056,"@bmillemathias You have not responded to information requests in this issue so we will assume it no longer affects you. If you are still interested in this, please create a new issue with the requested information.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-10T17:24:38Z
757518208,/azp run,2021-01-10T18:07:24Z
757518234,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-10T18:07:37Z
757602908,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-11T03:14:09Z
757628684,needs_info,2021-01-11T05:17:25Z
757635511,"Files identified in the description:
* [`lib/ansible/modules/import_playbook.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/import_playbook.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-11T05:41:46Z
757636931,"Hi, any updates on this?",2021-01-11T05:46:11Z
757649075,@relrod thanks!,2021-01-11T06:21:46Z
757649113,@relrod thanks!,2021-01-11T06:21:51Z
757649336,@relrod and thanks for this one as well :),2021-01-11T06:22:26Z
757659181,"@acozine @samccann i resolved the conflict
ready_for_review",2021-01-11T06:49:16Z
757662420,This probably merits a retroactive changelog entry.,2021-01-11T06:57:31Z
757853479,I just need to add: `follow: no`,2021-01-11T10:17:01Z
757863061,"Files identified in the description:
* [`lib/ansible/modules/git.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/git.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-11T10:34:52Z
757934294,"I do not have the time this week to test this, but this will probably solve the issue.
I had forgotten that I had to revert to the default ansible of ubuntu since the upgrade to 20.04 and was no longer up to date, I apologise for the trouble. Thanks for the reply.",2021-01-11T12:55:51Z
757984294,Thanks @relrod !,2021-01-11T14:25:15Z
757991590,"> Before adding the test I would like to ask for advice because I have never done it. should I add the test [here](https://github.com/ansible/ansible/tree/devel/test/integration/targets/unarchive) ?

yes
 
> Is ok if I add something similar to the test playbook I posted when I opened the PR? Testing this PR requires to run the playbook as root to verify if the permissions are properly applied to other user. I am not sure what would be the right way to do this so the test is accepted. 

yes, though the test above is a role, which is one type of test we use the other is based on `runme.sh` to run ansible and plays, but you should be able to adapt your playbook to the role format.

> If you point me to any docs or example on how I should write the test that would be great. thanks

https://docs.ansible.com/ansible/latest/dev_guide/testing.html#developing-testing

Though this needs updating, we just recently moved away from shippable to use azure pipelines so that part of the docs is out of date.",2021-01-11T14:36:49Z
757993327,"What if the ansible.builtin.command, ansible.builtin.script or ansible.builtin.shell plugins are used? None of those provide a parameter to create world-writeable files. I know for a fact we need this to work to make sure the task does not fail.",2021-01-11T14:39:44Z
758013246,"@eavdmeer the shell plugin is used to execute the commands around modules (make temp, copy files, cleanup) and the modules themselves (except script/raw) so it doesn't matter the action used.",2021-01-11T15:12:01Z
758056085,"> this is fixed in newer versions.

Which is ""newer""? Newer than 2.7?",2021-01-11T16:09:54Z
758084409,"I've changed the IP addresses, names, and playbook name in the ansible-playbook run to obscure sensitive data.",2021-01-11T16:55:27Z
758088985,"@felixfontein Looks good. I recommend including a comment when setting the env var that it is only needed while supporting 2.9 and 2.10, so that it will be more obvious in the future when it can be removed.",2021-01-11T17:02:51Z
758093484,"I'll salvage the tests, but the rest of this will be implemented pretty differently - closing this to start from scratch.",2021-01-11T17:10:30Z
758099865,"The test `ansible-test sanity --test test-constraints` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/test-constraints.html)] failed with 1 error:
```
test/lib/ansible_test/_data/requirements/sanity.rstcheck.txt:1:10: put constraints in `test/lib/ansible_test/_data/requirements/constraints.txt`
```
<!-- job_id: 3790 -->
<!-- job_id: 9e49d9348ee03e10ad7902b7608de85f -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-11T17:21:42Z
758115545,Related: https://github.com/ansible/ansible/issues/34281,2021-01-11T17:49:06Z
758130980,CC @samccann about the older Sphinx requirement,2021-01-11T18:15:08Z
758134297,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
Makefile:120: recipe for target 'config' failed
--> Standard Error
Traceback (most recent call last):
  File ""../../hacking/build-ansible.py"", line 103, in <module>
    main()
  File ""../../hacking/build-ansible.py"", line 92, in main
    retval = command.main(args)
  File ""/root/ansible/hacking/build_library/build_ansible/command_plugins/dump_config.py"", line 72, in main
    config_options = fix_description(config_options)
  File ""/root/ansible/hacking/build_library/build_ansible/command_plugins/dump_config.py"", line 29, in fix_description
    for config_key in config_options:
RuntimeError: dictionary changed size during iteration
make: *** [config] Error 1
```
<!-- job_id: 3797 -->
<!-- job_id: ab68a87ea3072c9b3f57dd7020d0ebdb -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-11T18:20:36Z
758149074,"@bcoca that still does not tell me where to put the replacement for this:
```ini
[defaults]
allow_world_readable_tmpfiles=true
```
The deprecation warning says support for this will go away, and I noticed that having this here without `deprecation_warnings=false` even reports the job as failed.",2021-01-11T18:48:17Z
758152525,@abadger FYI there's a PR allowing better sphinx: https://github.com/ansible/ansible/pull/73176.,2021-01-11T18:54:09Z
758153152,"> This particular table row is baffling: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/sh_shell.html#parameter-world_readable_temp
> 
> Is there a `world_readable_temp` option in the plugin section, or is that a truncated reference to the global setting?
> 
> This would be a great place to be explicit about how to utilize it correctly.

@jorhett That is the internal parameter name, and is generally of no concern for users. What you are interested in, is the information in the `Configuration` column. The parameter name, and the configuration names are not always the same.",2021-01-11T18:55:15Z
758157900,"@bcoca it looks like both the https://docs.ansible.com/ansible/latest/reference_appendices/config.html#allow-world-readable-tmpfiles and https://docs.ansible.com/ansible/latest/collections/ansible/builtin/sh_shell.html#parameter-world_readable_temp specify `allow_world_readable_tmpfiles` as the INI key under `defaults`.  

If we intended on not renaming `allow_world_readable_tmpfiles` to `shell_allow_world_readable_tmpfiles`, then we probably need to remove the deprecation in `base.yml` or remove the entry entirely.",2021-01-11T19:03:31Z
758166576,Related to #72287 and to #72717.,2021-01-11T19:19:21Z
758177038,"In any case, whatever comes first (#73176 merged or new antsibull release), this issue should be fixed soon :)",2021-01-11T19:38:18Z
758186746,/azp run,2021-01-11T19:56:09Z
758186862,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-11T19:56:24Z
758218603,@s-hertel @bcoca Can we get a test for this (and probably retroactively in devel) before we pull it into the stable branches?,2021-01-11T20:57:29Z
758218704,@s-hertel @bcoca Can we get a test for this (and probably retroactively in devel) before we pull it into the stable branches?,2021-01-11T20:57:43Z
758245709,"I'm seeing something similar:

Playbook
```
--- 
- 
  hosts: windows
  tasks:
    - name: Copy ssh public key to server(s)
      ansible.windows.win_copy:
        src: /Users/rtn361/.ssh/id_rsa.pub
        dest: C:\Users\sadmin\.ssh\authorized_key
    - name:  Update Acme’s Windows 2012, 2016 and 2019 servers
      ansible.windows.win_updates:
        category_name:
        - SecurityUpdates
        - CriticalUpdates
        reboot: yes
        reboot_timeout: 360
        log_path: C:\ansible_wu.txt          
    - name: set the default shell to PowerShell
      win_regedit:
        path: HKLM:\SOFTWARE\OpenSSH
        name: DefaultShell
        data: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
        type: string
        state: present
    # output results
    - name: Display any useful output
      debug:
        var: hostvars[inventory_hostname]
        verbosity: 4
```

Error:

```
[fatal: [myserver1.edu]: FAILED! => {""ansible_facts"": {}, ""changed"": false, ""failed_modules"": {""ansible.legacy.setup"": {""failed"": true, ""module_stderr"": ""At line:1 char:26\r\n+ chcp.com 65001 >nul 2>&1 && PowerShell -NoProfile -NonInteractive -Ex ...\r\n+                          ~~\r\nThe token '&&' is not a valid statement separator in this version.\r\n    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException\r\n    + FullyQualifiedErrorId : InvalidEndOfLine\r\n \r\n"", ""module_stdout"": """", ""msg"": ""MODULE FAILURE\nSee stdout/stderr for the exact error"", ""rc"": 1}}, ""msg"": ""The following modules failed to execute: ansible.legacy.setup\n""}
fatal: myserver2.edu]: FAILED! => {""ansible_facts"": {}, ""changed"": false, ""failed_modules"": {""ansible.legacy.setup"": {""failed"": true, ""module_stderr"": ""At line:1 char:26\r\n+ chcp.com 65001 >nul 2>&1 && PowerShell -NoProfile -NonInteractive -Ex ...\r\n+                          ~~\r\nThe token '&&' is not a valid statement separator in this version.\r\n    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException\r\n    + FullyQualifiedErrorId : InvalidEndOfLine\r\n \r\n"", ""module_stdout"": """", ""msg"": ""MODULE FAILURE\nSee stdout/stderr for the exact error"", ""rc"": 1}}, ""msg"": ""The following modules failed to execute: ansible.legacy.setup\n""}](url)
```

Ansible info:
```
ansible 2.10.4
  config file = None
  configured module search path = ['/Users/rtn361/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/Cellar/ansible/2.10.5/libexec/lib/python3.9/site-packages/ansible
  executable location = /usr/local/bin/ansible
  python version = 3.9.1 (default, Jan  8 2021, 17:17:43) [Clang 12.0.0 (clang-1200.0.32.28)]
```",2021-01-11T21:46:40Z
758249545,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
ERROR! module validate_arg_spec missing documentation (or could not parse documentation): while parsing a block mapping
  in ""<unicode string>"", line 2, column 1
did not find expected key
  in ""<unicode string>"", line 26, column 2
Traceback (most recent call last):
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 220, in run
    return arguments.func(arguments)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 423, in command_release
    use_ansible_doc=args.use_ansible_doc)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/plugins.py"", line 353, in load_plugins
    paths, None, plugin_type, collection_name, use_ansible_doc=use_ansible_doc)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/plugins.py"", line 266, in load_plugin_metadata
    plugins_data = run_ansible_doc(paths, playbook_dir, plugin_type, plugins_list)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/plugins.py"", line 238, in run_ansible_doc
    output = subprocess.check_output(command)
  File ""/usr/lib/python3.6/subprocess.py"", line 356, in check_output
    **kwargs).stdout
  File ""/usr/lib/python3.6/subprocess.py"", line 438, in run
    output=stdout, stderr=stderr)
subprocess.CalledProcessError: Command '['ansible-doc', '--json', '-t', 'module', 'add_host', 'apt', 'apt_key', 'apt_repository', 'assemble', 'assert', 'async_status', 'blockinfile', 'command', 'copy', 'cron', 'debconf', 'debug', 'dnf', 'dpkg_selections', 'expect', 'fail', 'fetch', 'file', 'find', 'gather_facts', 'get_url', 'getent', 'git', 'group', 'group_by', 'hostname', 'import_playbook', 'import_role', 'import_tasks', 'include', 'include_role', 'include_tasks', 'include_vars', 'iptables', 'known_hosts', 'lineinfile', 'meta', 'package', 'package_facts', 'pause', 'ping', 'pip', 'raw', 'reboot', 'replace', 'rpm_key', 'script', 'service', 'service_facts', 'set_fact', 'set_stats', 'setup', 'shell', 'slurp', 'stat', 'subversion', 'systemd', 'sysvinit', 'tempfile', 'template', 'unarchive', 'uri', 'user', 'validate_arg_spec', 'wait_for', 'wait_for_connection', 'yum', 'yum_repository']' returned non-zero exit status 1.
make: *** [changelog] Error 1
```
<!-- job_id: 3814 -->
<!-- job_id: 88eacf90da6b986fddb69b6853001f68 -->
<!-- job_id: None -->
The test `ansible-test sanity --test ansible-doc` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/ansible-doc.html)] failed with the error:
```
Command ""ansible-doc -t module add_host apt apt_key apt_repository assemble assert async_status blockinfile command copy cron debconf debug dnf dpkg_selections expect fail fetch file find gather_facts get_url getent git group group_by hostname import_playbook import_role import_tasks include include_role include_tasks include_vars iptables known_hosts lineinfile meta package package_facts pause ping pip raw reboot replace rpm_key script service service_facts set_fact set_stats setup shell slurp stat subversion systemd sysvinit tempfile template unarchive uri user validate_arg_spec wait_for wait_for_connection yum yum_repository"" returned exit status 1.
>>> Standard Error
ERROR! module validate_arg_spec missing documentation (or could not parse documentation): while parsing a block mapping
  in ""<unicode string>"", line 2, column 1
did not find expected key
  in ""<unicode string>"", line 26, column 2
```
<!-- job_id: 3814 -->
<!-- job_id: be1d1afbb08e6e4ba825cf8e55cb4eeb -->
<!-- job_id: None -->
The test `ansible-test sanity --test validate-modules` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/validate-modules.html)] failed with 2 errors:
```
lib/ansible/modules/validate_arg_spec.py:0:0: documentation-error: Unknown DOCUMENTATION error, see TRACE: while parsing a block mapping
  in ""<unicode string>"", line 2, column 1
did not find expected key
  in ""<unicode string>"", line 26, column 2
lib/ansible/modules/validate_arg_spec.py:63:2: return-syntax-error: RETURN is not valid YAML
```
<!-- job_id: 3814 -->
<!-- job_id: 535fca24b57a428e00ed72503a9663b3 -->
<!-- job_id: None -->
The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 2 errors:
```
lib/ansible/modules/validate_arg_spec.py:63:2: error: RETURN: syntax error: expected <block end>, but found '<block mapping start>' (syntax)
lib/ansible/modules/validate_arg_spec.py:63:2: unparsable-with-libyaml: while parsing a block mapping - did not find expected key
```
<!-- job_id: 3814 -->
<!-- job_id: b8b7538b11d59b821f05cfd8528d929b -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-11T21:54:57Z
758263854,"@dvaerum Can you test with #73182? I made a change to only display the warning when `pause` is run in the background and no timeout parameter is supplied. I believe that is how it should work since otherwise it would cause an indefinite hang. If a timeout parameter is provided (`seconds` or `minutes`), the warning should not be necessary.

In your case, are you always providing a timeout parameter?

I would like to avoid adding a new `warn` parameter since new features cannot be backported. It may be something nice to add, but it wouldn't help resolve your problem until 2.11 is released.",2021-01-11T22:25:28Z
758270971,"@vbotka this PR contains the following merge commits:

* https://github.com/ansible/ansible/commit/7d6df94c156eb6e3324a6e2992fc890a5b9fba2a
* https://github.com/ansible/ansible/commit/7651723a6e4f43cccee7410f4a5aff8beb303dbd
* https://github.com/ansible/ansible/commit/5e730d952dc9a7eda35138a9fd35c96854b7e6ea
* https://github.com/ansible/ansible/commit/0c6edcb23de193a3c29938c1e0af0a2e22540da9
* https://github.com/ansible/ansible/commit/60f0bff29030323079dc3f210c7169c5f2f577ec
* https://github.com/ansible/ansible/commit/d32768f503a42bfac2a89b3fba99dab02502d746
* https://github.com/ansible/ansible/commit/dbaea9f93e5ec6364fe2a9dee45467da0d15f044
* https://github.com/ansible/ansible/commit/67101456481236f9dec51539dd9f8b248d717603
* https://github.com/ansible/ansible/commit/d984f8758f42808b721e12fe3b3fb57f976a72f2
* https://github.com/ansible/ansible/commit/71d72a064467c62919870e2b5cc354950d443c16
* https://github.com/ansible/ansible/commit/f3f7d2e35100a843800cf5c81e2e6cb6859e3e32
* https://github.com/ansible/ansible/commit/f0f783898a51b1ee4e0efdb965d52ebb54b5a03e
* https://github.com/ansible/ansible/commit/3d7585781cc9d21426fbe6aac7bc216041e2b686
* https://github.com/ansible/ansible/commit/43120dd91b57c7ff0ef27d2e8ecd149b4a95bc45
* https://github.com/ansible/ansible/commit/51d3d77b10f3f662a53f5f76149376454a00c271
* https://github.com/ansible/ansible/commit/54e6422e67f29864e8460cb3ae59ec8f91f77bcd

Please [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: merge_commit_notify --->",2021-01-11T22:41:51Z
758298429,"Files identified in the description:
* `lib/ansible/modules/network/aireos/aireos_command.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-11T23:53:56Z
758298435,"@nasedora, just so you are aware we have a dedicated Working Group for network.
You can find other people interested in this in `#ansible-network` on Freenode IRC
For more information about communities, meetings and agendas see https://github.com/ansible/community

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: community_workgroups --->",2021-01-11T23:53:57Z
758298437,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/network/aireos/aireos_command.py -> https://galaxy.ansible.com/community/network

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-11T23:53:58Z
758298599,"for what it's worth, I ""resolved"" this issue by installing python3 and set ansible to find the binary",2021-01-11T23:54:26Z
758305732,"Thanks, @fredericrous 

I think I am already using python3.9

ansible --version | grep ""python version""
`  python version = 3.9.1 (default, Jan  8 2021, 17:17:43) [Clang 12.0.0 (clang-1200.0.32.28)]`",2021-01-12T00:15:38Z
758391767," > @jorhett What you are interested in, is the information in the `Configuration` column. The parameter name, and the configuration names are not always the same.

I'm sorry, I wasn't clear. The table row makes sense. Linking to the table row as a ""solution"" is baffling because as others have said: 
> that still does not tell me where to put the replacement

If you're going to link to this as an answer, then
> This would be a great place to be explicit about how to utilize it correctly.

In short, something somewhere needs to say ""replace this with this"" and as all the comments in this thread indicate-- it's just not clear.",2021-01-12T04:33:46Z
758498869,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-12T08:38:51Z
758517861,"what‘s mean it？ I just add the group，then how to ask question?
![image](https://user-images.githubusercontent.com/42507175/104292692-1c65fa80-54f8-11eb-8b89-df42725afa07.png)
’",2021-01-12T09:14:04Z
758667152,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T13:50:29Z
758667159,"@som-shekhar: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T13:50:30Z
758675403,"Internal Ansible API
====================

Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us
to have an active community that is willing to submit feedback so that we may
continue to make Ansible better.

The internal Python API is considered an unsupported aspect of Ansible and this
is not considered a bug unless there is an issue with an Ansible binary
(`ansible`, `ansible-playbook`, `ansible-doc`, etc) or an issue with an external
API such as are provided for the development of plugins (modules, dynamic
inventories, callbacks, strategies, etc).

Thank you once again for this and your interest in Ansible!

If you have further questions please stop by IRC or the mailing list:
* IRC: #ansible-devel on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-devel",2021-01-12T14:04:13Z
758678784,!component,2021-01-12T14:10:03Z
758679822,"> The variable ansible_play_hosts actually does not includes failed or unreachable hosts

Ah, sorry, my statement above was partially wrong. After doing some additional experiments, we found `ansible_play_hosts` may include unreachable hosts in some cases.

https://gist.github.com/ajalab/254a1e866b5d92ef1815650414a13c81

Especially,

- failed host `foo2` is _excluded_ from `ansible_play_hosts` in the first play (`foo1` and `foo2`): https://gist.github.com/ajalab/254a1e866b5d92ef1815650414a13c81#file-playbook-failure-log-L61-L67
- failed host `foo2` is _excluded_ from `ansible_play_hosts` in the second play (`foo3`): https://gist.github.com/ajalab/254a1e866b5d92ef1815650414a13c81#file-playbook-failure-log-L114-L120
- unreachable host `foo2` is _excluded_ from `ansible_play_hosts` in the first play (`foo1` and `foo2`): https://gist.github.com/ajalab/254a1e866b5d92ef1815650414a13c81#file-playbook-unreachable-log-L61-L67
- unreachable host `foo2` is _included_ in `ansible_play_hosts` in the second play (`foo3`): https://gist.github.com/ajalab/254a1e866b5d92ef1815650414a13c81#file-playbook-unreachable-log-L115-L122

Do you have any suggestions to fix?",2021-01-12T14:11:45Z
758723267,"@l3ender this PR contains the following merge commits:

* https://github.com/ansible/ansible/commit/3411e14956d6afc73bb44041b399b2bfb516bbd8

Please [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: merge_commit_notify --->",2021-01-12T15:15:39Z
758729726,"note: we have duplicate options for collection paths, with different spellings.",2021-01-12T15:24:40Z
758730926,"I think we would need to verify whether this is handled on *nix via SSH as well.  If it doesn't, we probably shouldn't do this for Windows.",2021-01-12T15:26:29Z
758731249,"There are several things going on here:

1. We have incorrect/inconsistent options that need to be corrected: `--collections-path` vs `--collection-path`
2. #72940 was just merged yesterday and will be in the next release.
3. What is the value of `.` in your command line? The value of `--collections-path` replaces the list of default paths. ",2021-01-12T15:26:57Z
758731998,@samdoran the intention of `.` was to give it a path so it stops complaining that none of the provided paths are usable.,2021-01-12T15:28:07Z
758733103,"This is very possibly related to the timeout, which can be adjusted using the following configuration https://docs.ansible.com/ansible/latest/reference_appendices/config.html#default-gather-timeout

Can you test applying that configuration to a longer timeout, and verify whether all mount information is retrieved?

needs_info",2021-01-12T15:29:06Z
758736552,"Closing as a duplicate (subset) of #34281.  If we implement `include_playbook` this is likely to be a possible with that feature.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:31:26Z
758738350,"We have discussed this in our triage, and have decided not to pursue this further.

Closing per above, as this is a git problem, and we don't want to add arbitrary git version inspection.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:34:07Z
758740530,"This issue was resolved by https://github.com/ansible/ansible/pull/70312

This will require that you upgrade to the most recent 2.9.16 and disable remote syslog logging to get around the issue.  Or ensure that the NULL character is not included.

> by setting `no_target_syslog` to True in your Ansible config

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:37:16Z
758742748,"All data loaded from `lookup` is marked as ""unsafe"" which means we explicitly will not template it.

I'd recommend using `vars_files` within the play from `provision.yml`

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:40:27Z
758744196,"This issue is either related to a misconfigured machine, or a problematic network connection.

You may wish to add an `until` on the task to loop until successful install, which we have to use in CI sometimes due to network interruptions or mirrors that are misbehaving.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:42:34Z
758744531,Fragment added. Done.,2021-01-12T15:43:03Z
758750354,@mattclay thoughts on this?,2021-01-12T15:51:45Z
758751906,This change is backwards incompatible for users relying on the fact that `--directory` is relative to `/`,2021-01-12T15:53:59Z
758753298,"This will need a changelog fragment, as well as integration tests.",2021-01-12T15:56:18Z
758755434,"Part of the functionality of the `git` module is to explicitly checkout a version.  And in your case the default of `HEAD` is identified as `master` by the git clone.

However, with an empty repo, there are no branches, and this operation correctly fails.

We discussed adding the ability to use `version: null` but ultimately this isn't useful as it would only work until the repo is populated.

As such, we've decided this behavior is correct, and we are not pursuing any fixes or changes to allow this.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T15:59:27Z
758764082,@bcoca I have added a test based on the existing ones. Please let me know if you need any change/improvement in the test,2021-01-12T16:12:31Z
758767226,One other thing that was brought up: should this be a warning not an error?,2021-01-12T16:17:10Z
758767745,"```
- name: Test
  fetch:
    src: /home/andy/new[12].txt
    dest: test
```

Works as expected:
```
% ansible-playbook test.yml

PLAY [Test playbook] *************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************
ok: [www]

TASK [Test] ************************************************************************************************************************************
changed: [www]

PLAY RECAP **********************************************************************************************************************************
www           : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

```",2021-01-12T16:17:59Z
758772708,"So I modified the ansible.cfg and added `gather_timeout=60` to the `defaults` section and it is still having the issue.   I created a little test playbook that clears the cached facts and prints the output.
```yaml
  tasks:
  - meta: 'clear_facts'
  - setup:
  - debug: var=ansible_mounts
```
And here are the results:
```
        {
            ""device"": ""/dev/mapper/system--vg-var+log+audit"",
            ""fstype"": ""ext4"",
            ""mount"": ""/var/log/audit"",
            ""options"": ""rw,relatime,data=ordered"",
            ""uuid"": ""03c0d0a5-b940-40ff-ad48-62615bef7267""
        }
    ]
}

PLAY RECAP ****************************************************************************************************
<redacted>               : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Tuesday 12 January 2021  16:23:19 +0000 (0:00:00.060)       0:00:01.718 *******
===============================================================================
setup -------------------------------------------------------------------------------------------------- 1.55s
debug -------------------------------------------------------------------------------------------------- 0.06s

```


",2021-01-12T16:25:35Z
758774005,"@samdoran I would expect it to be a warning. ""The list is empty"" is a valid answer, not an error.",2021-01-12T16:27:32Z
758775815,"Since it is completing in far under the timeout, I'd have to guess that one of the operations may be producing an `OSError`.

To troubleshoot, you could try testing all the code from `lib/ansible/module_utils/facts/utils.py:get_mount_size`

You could hack that function to `raise` instead of `pass` to see if you can get more info.

In short, I don't think we are going to be much help, since we cannot reproduce this. As such, debugging the cause is likely going to be your responsibility.",2021-01-12T16:30:14Z
758776502,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
Traceback (most recent call last):
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 220, in run
    return arguments.func(arguments)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 433, in command_release
    version, codename, date)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 808, in add_release
    if changes.add_fragment(fragment, version):
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/changes.py"", line 671, in add_fragment
    raise ValueError('Found unknown section ""{0}""'.format(section))
ValueError: Found unknown section ""bugfix""
make: *** [changelog] Error 1
```
<!-- job_id: 3901 -->
<!-- job_id: f024952b5fad8f609bd5e458c802a85b -->
<!-- job_id: None -->
The test `ansible-test sanity --test changelog` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/changelog.html)] failed with 1 error:
```
changelogs/fragments/fix_expression_as_filename_in_compile.yaml:0:0: invalid section: bugfix
```
<!-- job_id: 3901 -->
<!-- job_id: 27681376feeaaa3d30a9955211b9f1f3 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-12T16:31:16Z
758788517,"If I modify it to print out the exception it is a permissions issue.  Seems when the system is locked down you have to either run the entire playbook with `become:True` or re-run the gather facts with it.  Makes sense now that I see it.

Thanks for you help.

Edited out the erroneous fact that df can still show the sizes when not root.",2021-01-12T16:49:58Z
758792703,Duplicate of https://github.com/ansible/ansible/issues/73027,2021-01-12T16:55:12Z
758796546,"Well, if there are zero valid paths, then it's an error, I guess. If there are any legitimate paths, then empty list would make sense to say ""the list is empty"" w/o erroring out, I guess.",2021-01-12T16:57:57Z
758798501,"If the list is supposed to be empty, why should there be legitimate paths? It should only be an error if you actually need at least one path to exist (f.ex. while installing).",2021-01-12T17:00:09Z
758826880,note that we have it x2 do we really need both instances?,2021-01-12T17:45:58Z
758830071,Thank you very much @sivel ,2021-01-12T17:51:24Z
758867260,I think I had it as shared originally but ran into problems trying to reuse across sub commands.,2021-01-12T18:57:26Z
758867780,"@jeffwarnica this PR contains the following merge commits:

* https://github.com/ansible/ansible/commit/ba12f383df6231ab646c832e89dd6fb5d58c3a0b
* https://github.com/ansible/ansible/commit/2f41029c6aca43a8d92fa1d7f3480d6758d76f8d

Please [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: merge_commit_notify --->",2021-01-12T18:58:23Z
758871611,"Files identified in the description:
* [`lib/ansible/cli/__init__.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/cli/__init__.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:05:29Z
758879657,"General proposal - https://hackmd.io/TQmzyhCUSSKa22iFR_079A
First plan (for 3.0.0 beta timeframe) - https://hackmd.io/x0VwaKSYQCaHGJR4LelSEw",2021-01-12T19:20:37Z
758884850,"Tasks we need to accomplish this goal by Feb - 

- [x] Makefile changes - create `make core-docs`, to create a separate documentation set for core, with versions specific to core. - issue #73196 
- [x] version changer - must list and work with only the versions for that docsite - Ansible 2.9, 2.10, 3.  ansible-core - devel only until 2.11 releases. - issue #73198
- [x] Create banners for both to clarify that one is Ansible the package and a pointer to ansible-core. (and visa-versa on ansible-core docs) - issue #73197
- [x] Test antsibull - can it continue to pick up stable-2.10 and new 3.x collections?
- [x] Can the old docs that point to devel for release&maint/porting guides etc still work if we only have ansible-core/devel for a time? (aka we don't want to change eol releases yet again)
- [x] Ansible docs should only have Ansible porting guide, release-maint, and roadmap. Similarly, ansible-core docs should only have core versions of these, and only in devel. (core is covered by issue ##73196 and Ansible is covered by issue #73200). 

The following are tasks that can only be handled internally by redhat as it involves jenkins build or docsite repo changes:

- [x] update docsite (docs.ansible.com) to add Ansible documentation as separate from Ansible core documentation

- [x] Create a manual jenkins build for Ansible (3) - fix the current problem where the build requires x.y for a version (aka 3.x)
- [x] Create new manual jenkins build for ansible-core devel - to publish to docs.ansible.com/ansible-core/devel
- [x] Create new nightly jenkins build for ansible-core devel
- [x] Update existing nightly jenkins build for Ansible devel 
- [x] Evaluate which builds must remain (since something has to continue to publish 2.9, 2.10 etc)

Stretch goals - 

- [x] Find a way to differentiate the themes on Ansible vs ansible-core so it is immediately obvious to the user which docsite they are on. This cannot be 'red' like Tower uses as that suggests 'supported by redhat' at this point.  - issue #73202",2021-01-12T19:30:17Z
758885350,"Keys are not templated in dictionaries, only values.  You can create a template file and use the `template` lookup to render your data the way you want.

There are several examples around for using `lookup` with `definition`.  See:

* https://docs.ansible.com/ansible/latest/collections/community/kubernetes/k8s_module.html#parameter-src
* https://docs.ansible.com/ansible/latest/collections/community/kubernetes/k8s_module.html#examples

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-12T19:31:13Z
758890409,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:40:50Z
758890435,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:40:53Z
758890460,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:40:55Z
758890470,"@samccann: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T19:40:56Z
758895150,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:49:40Z
758895176,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:49:43Z
758895680,That was my work around.  Wasn't ideal but did work.,2021-01-12T19:50:40Z
758900000,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T19:58:46Z
758906601,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T20:07:29Z
758906612,"@samccann: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T20:07:29Z
758906673,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T20:07:33Z
758906678,"@samccann: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T20:07:33Z
758916543, fwiw - the Ansible maintained collections talk about versioning and deprecation and their own flare of 'maintained' collections that can last 2 years - https://access.redhat.com/articles/4993781,2021-01-12T20:18:42Z
758917227,"For the result of conversations about this, see https://github.com/ansible-collections/overview/blob/main/collection_requirements.rst#versioning-and-deprecation. ",2021-01-12T20:19:28Z
758938486,"it is still an issue, I am getting these exact errors with just around 120-150 existing VMs in VMSSs in our region. Does it have a permanent fix in new Ansible versions or I should turn off batch mode?  I use ansible 2.9.1 ",2021-01-12T20:34:41Z
758949068,!component =lib/ansible/plugins/inventory/azure_rm.py,2021-01-12T20:39:27Z
758950713,"Instead of redirects, we should put stub pages, or a special 404 to say 'hey Ansible is different from ansible-core, go here for ansible-core xxx files'.",2021-01-12T20:40:08Z
758958893,"Files identified in the description:
* `lib/ansible/plugins/inventory/azure_rm.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T20:45:36Z
758958917,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/inventory/azure_rm.py -> https://galaxy.ansible.com/awx/awx

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-12T20:45:37Z
758978017,"The list of paths to search won't be empty by adding `-p .`. I doubled checked the behavior. Paths passed to `-p` are combined with the default `COLLECTIONS_PATHS`.

Each path is examined for a `collections` subdir. If none of the paths provided contain a `collections` sub dir, then an error is produced. Whether this should be an error or a warning is debatable. I'm not convinced this should silently produce no output, though.

I believe the reason this was made an error rather than a warning was an error also shows the command help output.",2021-01-12T20:56:51Z
758984626,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T21:01:21Z
758984639,"@syed-shah100: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T21:01:22Z
759033013,"I've been going round and round trying to work out the desired behavior. I'm going to have to look again tomorrow.

I want to say something like `env ANSIBLE_COLLECTIONS_PATHS='' ansible-galaxy collection list` should silently list nothing, but I think that may depend on the presence of external dirs and whether or not they contain an `ansible_collections` subdir.",2021-01-12T21:34:23Z
759062510,!component =lib/ansible/modules/network/nxos/nxos_config.py,2021-01-12T21:58:40Z
759063441,"Files identified in the description:
* `lib/ansible/modules/network/nxos/nxos_config.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T22:00:38Z
759063448,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/network/nxos/nxos_config.py -> https://galaxy.ansible.com/cisco/nxos

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-12T22:00:39Z
759083894,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T22:42:22Z
759096370,"Files identified in the description:
* [`lib/ansible/modules/async_status.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/async_status.py)
* `lib/ansible/modules/windows/async_status.ps1`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T23:13:04Z
759096528,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
test/units/module_utils/facts/virtual/__init__.py:1:1: W391: blank line at end of file
```
<!-- job_id: 3932 -->
<!-- job_id: dc8931064a0d77f13051388489840332 -->
<!-- job_id: None -->
The test `ansible-test sanity --test empty-init` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/empty-init.html)] failed with 1 error:
```
test/units/module_utils/facts/virtual/__init__.py:0:0: empty __init__.py required
```
<!-- job_id: 3932 -->
<!-- job_id: abeda1a3787168e98c4821ee2e65839e -->
<!-- job_id: None -->
The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 1 error:
```
test/units/module_utils/facts/virtual/__init__.py:1:0: trailing-newlines: Trailing newlines
```
<!-- job_id: 3932 -->
<!-- job_id: 518a3405c5162895ecc0e2db8fa668d0 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-12T23:13:29Z
759121884,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T00:25:28Z
759145840,!component =lib/ansible/modules/cloud/amazon/aws_s3.py,2021-01-13T01:36:44Z
759146816,"Files identified in the description:
* `lib/ansible/modules/cloud/amazon/aws_s3.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T01:39:04Z
759146819,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/cloud/amazon/aws_s3.py -> https://galaxy.ansible.com/amazon/aws

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-13T01:39:05Z
759197867,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T04:30:01Z
759197870,"@srible: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-13T04:30:02Z
759200048,"@srible Please fill the issue template which helps us to identify the issue. Also, provide playbooks used, console log, and Ansible version?

",2021-01-13T04:38:25Z
759313456,"Files identified in the description:
* `lib/ansible/modules/database/mysql/mysql_replication.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T09:12:19Z
759313465,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/database/mysql/mysql_replication.py -> https://galaxy.ansible.com/community/mysql

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-13T09:12:20Z
759354384,"Files identified in the description:
* `lib/ansible/playbook/role`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T10:24:12Z
759381940,"Files identified in the description:
* [`lib/ansible/modules/service.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/service.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T11:15:51Z
759475456,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T14:14:30Z
759475463,"@Perfect10NickTailor: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-13T14:14:30Z
759481744,"tests say

```
02:32 ERROR: docs/docsite/rst/user_guide/intro_patterns.rst:158:0: Error in ""code-block"" directive: (100%)
```

which is the line I have edited, but they helpfully not tell me what the error should be?",2021-01-13T14:24:24Z
759482375,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 5 errors:
```
docs/docsite/rst/index.rst:0:0: unknown: 
docs/docsite/rst/index.rst:0:0: unknown:     ansible-playbook site.yml --limit @site.retry
docs/docsite/rst/index.rst:0:0: unknown: .. code-block::
docs/docsite/rst/index.rst:0:0: unknown: 1 argument(s) required, 0 supplied.
docs/docsite/rst/user_guide/intro_patterns.rst:158:0: warning: Error in ""code-block"" directive:
```
<!-- job_id: 3976 -->
<!-- job_id: e6f50d092b9dd3d07f0875e59b7426ec -->
<!-- job_id: None -->
The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 1 error:
```
docs/docsite/rst/user_guide/intro_patterns.rst:158:0: Error in ""code-block"" directive:
```
<!-- job_id: 3976 -->
<!-- job_id: 61ca0a9ef39102fdde13e3b1f233f841 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-13T14:25:22Z
759485807,just running `rstcheck` on that file doesn't yield any errors either.,2021-01-13T14:30:53Z
759489953,"Yeah, whatever",2021-01-13T14:37:26Z
759530427,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 3 errors:
```
test/units/cli/test_adhoc.py:97:161: E501: line too long (170 > 160 characters)
test/units/cli/test_adhoc.py:119:1: E302: expected 2 blank lines, found 1
test/units/cli/test_adhoc.py:133:5: E303: too many blank lines (2)
```
<!-- job_id: 3978 -->
<!-- job_id: eacc684b9340fe84d12a658635508a5f -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-13T15:39:45Z
759557599,"This is a function of how `vars:` on a role are scoped.  `vars:` on a role are scoped at the play level, so the last one defined wins.

You may instead want to use role ""params"" which are scoped to the role:

```
---
- hosts: localhost
  roles:
    - role: parent
      parent_var: first
    - role: parent
      parent_var: second
```

See also: https://github.com/ansible/ansible/pull/69040

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-13T16:17:17Z
759558020,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!
",2021-01-13T16:18:01Z
759570257,"The `group_names` variable is purposefully alphanumerically sorted by name, and not sorted by definition order.

Capital letters, sort before lowercase which is the reason you see them sorted differently between using `chg0240322` and `CHG0240322`

```pycon
>>> sorted(['c', 'C', 'N'])
['C', 'N', 'c']
```

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-13T16:37:16Z
759587936,@xylle Can you test with #73204 and see if that works as expected?,2021-01-13T17:05:24Z
759594538,"Can you try this with a more recent version of Ansible?  Perhaps Ansible 2.9.x?  2.7 has reached its end of life as of August 2020, and is no longer supported.",2021-01-13T17:16:39Z
759600232,Splitting PR into two.,2021-01-13T17:26:22Z
759607973,"The `ansible` command is provided by the `ansible-base` package, and returns the version of the `ansible-base` package.

See https://github.com/ansible/ansible/pull/72287 for work being done to clarify that the version is not of the ""ansible"" package.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-13T17:39:56Z
759611680,"The test `ansible-test sanity --test compile --python 2.6` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
test/units/module_utils/facts/virtual/test_linux.py:25:46: SyntaxError: 'virtualization_tech_guest': {'bhyve'},
```
<!-- job_id: 3987 -->
<!-- job_id: e6be3969544c83a4eb2976353daa7dc2 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-13T17:46:57Z
759621763,"@samdoran  Yes I am always proving `seconds` so from my perspective your solution would work 👍 
I have also tested your patch/merge request #73182, and it seems to work perfectly 😄 ",2021-01-13T18:04:08Z
759622700,"@samdoran Thanks for added this patch. I have tested it, and it works as expected without having to do anything 👍 

Btw, will it be possible to backport this to Ansible 2.10?",2021-01-13T18:05:49Z
759655716,@samccann thanks for reviewing and merging!,2021-01-13T19:06:06Z
759738851,"Can you provide the output of the following command:

```
systemctl list-units --no-pager --type service --all
```

!component =lib/ansible/modules/service_facts.py",2021-01-13T21:04:45Z
759741100,"Files identified in the description:
* [`lib/ansible/modules/service_facts.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/service_facts.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T21:09:23Z
759741290,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T21:09:43Z
759741310,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T21:09:46Z
759741330,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T21:09:49Z
759743486,needs_info,2021-01-13T21:14:20Z
759747133,"Files identified in the description:
* [`docs/docsite/README.md`](https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-13T21:21:32Z
759747425,"@dvaerum Thank you for testing. This will be backported to 2.9 and 2.10. We have currently frozen the next set of releases, so this fix will be in 2.10.6  and 2.9.18 and later.",2021-01-13T21:22:07Z
759828648,"Thank you for letting me know about the 'flatten' role param syntax, though I do not see this document anywhere in the current version of Ansible (and at least 2.8) - I suspect it is old/discouraged as I can see that variable names would already clash with variable keys (`role`, `tags`, etc) - But it is not deprecated?

If as you say, `vars:` on `role:` apples them at play scope then this contradicts the documentation [Running role dependencies multiple times](https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html#running-role-dependencies-multiple-times-in-one-playbook) which explicitly has this as a use case (reusable parent and child roles) when passing in different parameter values on parent role invocation:
  
The example from the documentation which I copy verbatim says:

> **Running role dependencies multiple times in one playbook**
> 
> Ansible treats duplicate role dependencies like duplicate roles listed under roles: Ansible only executes role dependencies once, even if defined multiple times, unless the parameters, tags, or when clause defined on the role are different for each definition. If two roles in a playbook both list a third role as a dependency, Ansible only runs that role dependency once, unless you pass different parameters, tags, when clause, or use allow_duplicates: true in the dependent (third) role. See Galaxy role dependencies for more details.
> 
> For example, a role named `car` depends on a role named `wheel` as follows:
> 
> ```yaml
> ---
> dependencies:
>   - role: wheel
>     vars:
>       n: 1
>   - role: wheel
>     vars:
>       n: 2
>   - role: wheel
>     vars:
>       n: 3
>   - role: wheel
>     vars:
>       n: 4
> ```      
> And the wheel role depends on two roles: tire and brake. The `meta/main.yml` for wheel would then contain the following:
> 
> ```yaml
> ---
> dependencies:
>   - role: tire
>   - role: brake
> ```  
> And the `meta/main.yml` for tire and brake would contain the following:
> 
> ```yaml
> ---
> allow_duplicates: true
> ```
> The resulting order of execution would be as follows:
> 
> ```
> tire(n=1)
> brake(n=1)
> wheel(n=1)
> tire(n=2)
> brake(n=2)
> wheel(n=2)
> ...
> car
> ```
> 

Note that in this case the last var `n` does _not_ win.
",2021-01-13T23:43:25Z
759892403,"Files identified in the description:
* `lib/ansible/modules/database/mysql/mysql_user.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T02:57:10Z
759892406,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/database/mysql/mysql_user.py -> https://galaxy.ansible.com/community/mysql

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-14T02:57:11Z
759896949,"Thanks for the review, @samdoran.

> Can you please add unit tests for this?

Will do. I don't see any tests related to role installation...am I starting from scratch, or can you advise? Thanks!",2021-01-14T03:12:35Z
760002310,!waffling ci_verified,2021-01-14T07:59:28Z
760067049,"> > this is fixed in newer versions.
> 
> Which is ""newer""? Newer than 2.7?

`fetch_file` is only used if a URL is used, if a key ID is give, it runs apt-key, which does not use the proxy settings...

[An easy workaround](https://github.com/ansible/ansible/issues/31691#issuecomment-574560195) is to just build the URL directly.",2021-01-14T09:18:16Z
760073055,"If you need a way to reproduce this, inspect the logs of the Ansible init container of OAS's wordpress-helm chart prior to commit:  https://open.greenhost.net/openappstack/wordpress-helm/-/commit/d101b9b1bea483117a9f76f79752a8ab422a2df0",2021-01-14T09:28:43Z
760145570,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T11:45:06Z
760155819,"Files identified in the description:
* [`lib/ansible/modules/uri.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/uri.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T12:07:06Z
760163178,"I just figured out what was wrong :
it was the generation of encrypted password, the proper way is:
```
ansible-vault encrypt_string 'my_password' --name vault_password
```
while I used in the wrong scenario:
```
ansible-vault encrypt_string --stdin-name vault_password
```
",2021-01-14T12:23:11Z
760188246,"Files identified in the description:
* `lib/ansible/modules/system/locale_gen.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T13:12:36Z
760188250,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/system/locale_gen.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-14T13:12:37Z
760192470,!component =lib/ansible/plugins/connection/local.py ,2021-01-14T13:20:29Z
760193302,"In 2.10.4 error still exists. As @loop-evgeny said, it seems to be serious error that can be unnoticed in long playbooks. This makes whole `dependencies` mechanism unreliable, and requires from user manual dependency handling. `include_role` or `import_role` aren't real solutions because they don't provide a mechanism allowing to run role only once for each set of parameters.",2021-01-14T13:22:04Z
760194166,bot_broken,2021-01-14T13:23:36Z
760205079,"As a workaround for the issue above - if you run an update of minimum_tls_version immediately after creating the storage account the minimum_tls_version attribute gets correctly updated 

Eg
Where storage_tls_version is set to TLS1_2 below

- name: Create Blob Container for state storage
  azure.azcollection.azure_rm_storageaccount:
    name: ""{{ project }}{{ env }}tfst""
    resource_group: ""{{ project }}-{{ env }}-rg""
    account_type: Standard_LRS
    location: ""{{ azure_location }}""
    minimum_tls_version: ""{{ storage_tls_version }}""
    kind: StorageV2
    tags:
        controller: ""{{ controller }}""
        platform: ""{{ project }}-{{ env }}""
        owner: ""{{ environment_owner }}""
        costcenter: ""{{ environment_costcenter }}""

- name: Update state storage account to ensure correct tls version is set
  azure_rm_storageaccount:
    name: ""{{ project }}{{ env }}tfst""
    resource_group: ""{{ project }}-{{ env }}-rg""
    minimum_tls_version: ""{{ storage_tls_version }}""
    state: present


",2021-01-14T13:44:21Z
760209079,@mrussell-axway  Thanks for the help..!! Your workaround resolves the issue we were facing.,2021-01-14T13:51:23Z
760209181,!needs_collection_redirect,2021-01-14T13:51:33Z
760209258,!bot_broken,2021-01-14T13:51:40Z
760211852,"Files identified in the description:
* [`lib/ansible/plugins/connection/local.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/connection/local.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T13:55:47Z
760242239,"I don't know if I have correctly installed the dev version:

- I create new venv
- install requirements.txt
- git clone https://github.com/ansible/ansible.git
- source ./hacking/env-setup
- manually add pr modification on file lib/ansible/module_utils/facts/virtual/linux.py

Work fine.

PS : how to add your PR in code whitout manually editing ?

",2021-01-14T14:46:30Z
760243834,"That documentation was recently updated about 4 weeks ago, and hasn't been published yet:

https://github.com/ansible/ansible/pull/72666",2021-01-14T14:49:05Z
760248982,Caused by ce52e6738cdb3e3e729e1355866bee4f65a214d7,2021-01-14T14:57:08Z
760270025,"GitHub allows you to [checkout PR branches locally](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/checking-out-pull-requests-locally).
```
git fetch origin pull/$pr_num/head:$local_branch_name
git checkout $local_branch_name
```

Since you're already setup to run from source, you'll now be running with the changes in that PR branch.",2021-01-14T15:29:11Z
760283603,The issue author [confirmed](https://github.com/ansible/ansible/issues/73167#issuecomment-760242239) this works as expected.,2021-01-14T15:50:30Z
760294539,"Currently the tomcat is now returning correctly.....after running it a few times.

However, I have another service ""salt-minion"", doing the same the thing. 
```
[root@ansible]# systemctl list-units --no-pager --type service --all | grep -i salt
● salt-master.service                                                                       not-found inactive dead    salt-master.service
  salt-minion.service                                                                       loaded    active   running The Salt Minion
```

```
TASK [Setup-saltminions : check salt-minion service is running] *************************************************************************************************************************************
ok: [test2] => {
    ""ansible_facts.services[\""salt-minion.service\""]"": {
        ""name"": ""salt-minion.service"",
        ""source"": ""systemd"",
        ""state"": ""stopped"",
        ""status"": ""enabled""
    }
}
```
Server
===========
```
[root@test2 ~]# systemctl status salt-minion.service
● salt-minion.service - The Salt Minion
   Loaded: loaded (/usr/lib/systemd/system/salt-minion.service; enabled; vendor preset: disabled)
   Active: active (running) since Thu 2021-01-14 16:04:04 GMT; 1min 5s ago
     Docs: man:salt-minion(1)
           file:///usr/share/doc/salt/html/contents.html
           https://docs.saltstack.com/en/latest/contents.html
 Main PID: 11472 (salt-minion)
   CGroup: /system.slice/salt-minion.service
           ├─11472 /usr/bin/python /usr/bin/salt-minion
           ├─11476 /usr/bin/python /usr/bin/salt-minion
           └─11486 /usr/bin/python /usr/bin/salt-minion
```

Here is the full command you requested below:
Thank you for your help. :)
```
[root@ansible]# systemctl list-units --no-pager --type service --all
  UNIT                                                                                  LOAD      ACTIVE   SUB     DESCRIPTION
  abrt-ccpp.service                                                                     loaded    active   exited  Install ABRT coredump hook
  abrt-oops.service                                                                     loaded    active   running ABRT kernel log watcher
  abrt-vmcore.service                                                                   loaded    inactive dead    Harvest vmcores for ABRT
  abrt-xorg.service                                                                     loaded    inactive dead    ABRT Xorg log watcher
  abrtd.service                                                                         loaded    active   running ABRT Automated Bug Reporting Tool
  atd.service                                                                           loaded    active   running Job spooling tools
  auditd.service                                                                        loaded    active   running Security Auditing Service
  auth-rpcgss-module.service                                                            loaded    inactive dead    Kernel Module supporting RPCSEC_GSS
  autofs.service                                                                        loaded    active   running Automounts filesystems on demand
  blk-availability.service                                                              loaded    active   exited  Availability of block devices
  brandbot.service                                                                      loaded    inactive dead    Flexible Branding Service
  chronyd.service                                                                       loaded    active   running NTP client/server
● cloud-init-local.service                                                              not-found inactive dead    cloud-init-local.service
  cpupower.service                                                                      loaded    inactive dead    Configure CPU power related settings
  crond.service                                                                         loaded    active   running Command Scheduler
  dbus.service                                                                          loaded    active   running D-Bus System Message Bus
● display-manager.service                                                               not-found inactive dead    display-manager.service
  dm-event.service                                                                      loaded    inactive dead    Device-mapper event daemon
  dmraid-activation.service                                                             loaded    inactive dead    Activation of DM RAID sets
  dracut-cmdline.service                                                                loaded    inactive dead    dracut cmdline hook
  dracut-initqueue.service                                                              loaded    inactive dead    dracut initqueue hook
  dracut-mount.service                                                                  loaded    inactive dead    dracut mount hook
  dracut-pre-mount.service                                                              loaded    inactive dead    dracut pre-mount hook
  dracut-pre-pivot.service                                                              loaded    inactive dead    dracut pre-pivot and cleanup hook
  dracut-pre-trigger.service                                                            loaded    inactive dead    dracut pre-trigger hook
  dracut-pre-udev.service                                                               loaded    inactive dead    dracut pre-udev hook
  dracut-shutdown.service                                                               loaded    inactive dead    Restore /run/initramfs
  emergency.service                                                                     loaded    inactive dead    Emergency Shell
  exim.service                                                                          loaded    active   running Exim Mail Transport Agent
● fcoe.service                                                                          not-found inactive dead    fcoe.service
  getty@tty1.service                                                                    loaded    active   running Getty on tty1
  goferd.service                                                                        loaded    active   running Gofer Agent
  gssproxy.service                                                                      loaded    active   running GSSAPI Proxy Daemon
  initrd-cleanup.service                                                                loaded    inactive dead    Cleaning Up and Shutting Down Daemons
  initrd-parse-etc.service                                                              loaded    inactive dead    Reload Configuration from the Real Root
  initrd-switch-root.service                                                            loaded    inactive dead    Switch Root
  initrd-udevadm-cleanup-db.service                                                     loaded    inactive dead    Cleanup udevd DB
● ip6tables.service                                                                     not-found inactive dead    ip6tables.service
● iptables.service                                                                      not-found inactive dead    iptables.service
  irqbalance.service                                                                    loaded    active   running irqbalance daemon
● iscsi-shutdown.service                                                                not-found inactive dead    iscsi-shutdown.service
● iscsi.service                                                                         not-found inactive dead    iscsi.service
● iscsid.service                                                                        not-found inactive dead    iscsid.service
  kdump.service                                                                         loaded    active   exited  Crash recovery kernel arming
  kmod-static-nodes.service                                                             loaded    active   exited  Create list of required static device nodes for the current kernel
  libstoragemgmt.service                                                                loaded    active   running libstoragemgmt plug-in server daemon
● livesys.service                                                                       not-found inactive dead    livesys.service
● lvm2-activation-early.service                                                         not-found inactive dead    lvm2-activation-early.service
● lvm2-activation.service                                                               not-found inactive dead    lvm2-activation.service
  lvm2-lvmetad.service                                                                  loaded    active   running LVM2 metadata daemon
  lvm2-lvmpolld.service                                                                 loaded    inactive dead    LVM2 poll daemon
  lvm2-monitor.service                                                                  loaded    active   exited  Monitoring of LVM2 mirrors, snapshots etc. using dmeventd or progress polling
  lvm2-pvscan@8:2.service                                                               loaded    active   exited  LVM2 PV scan on device 8:2
  mdmonitor.service                                                                     loaded    inactive dead    Software RAID monitoring and management
  microcode.service                                                                     loaded    inactive dead    Load CPU microcode update
  multipathd.service                                                                    loaded    inactive dead    Device-Mapper Multipath Device Controller
● named.service                                                                         not-found inactive dead    named.service
  network.service                                                                       loaded    active   exited  LSB: Bring up/down networking
  NetworkManager-wait-online.service                                                    loaded    inactive dead    Network Manager Wait Online
  NetworkManager.service                                                                loaded    inactive dead    Network Manager
  nfs-config.service                                                                    loaded    inactive dead    Preprocess NFS configuration
  nfs-idmapd.service                                                                    loaded    inactive dead    NFSv4 ID-name mapping service
  nfs-mountd.service                                                                    loaded    inactive dead    NFS Mount Daemon
● nfs-secure-server.service                                                             not-found inactive dead    nfs-secure-server.service
  nfs-server.service                                                                    loaded    inactive dead    NFS server and services
  nfs-utils.service                                                                     loaded    inactive dead    NFS server and client services
  nslcd.service                                                                         loaded    active   running Naming services LDAP client daemon.
● ntpd.service                                                                          not-found inactive dead    ntpd.service
  ntpdate.service                                                                       loaded    inactive dead    Set time via NTP
  plymouth-quit-wait.service                                                            loaded    inactive dead    Wait for Plymouth Boot Screen to Quit
  plymouth-quit.service                                                                 loaded    inactive dead    Terminate Plymouth Boot Screen
  plymouth-read-write.service                                                           loaded    inactive dead    Tell Plymouth To Write Out Runtime Data
  plymouth-start.service                                                                loaded    inactive dead    Show Plymouth Boot Screen
  plymouth-switch-root.service                                                          loaded    inactive dead    Plymouth switch root service
  polkit.service                                                                        loaded    active   running Authorization Manager
● postfix.service                                                                       not-found inactive dead    postfix.service
● rbdmap.service                                                                        not-found inactive dead    rbdmap.service
  rc-local.service                                                                      loaded    inactive dead    /etc/rc.d/rc.local Compatibility
  rescue.service                                                                        loaded    inactive dead    Rescue Shell
  rhel-autorelabel-mark.service                                                         loaded    inactive dead    Mark the need to relabel after reboot
  rhel-autorelabel.service                                                              loaded    inactive dead    Relabel all filesystems, if necessary
  rhel-configure.service                                                                loaded    inactive dead    Reconfigure the system on administrator request
  rhel-dmesg.service                                                                    loaded    active   exited  Dump dmesg to /var/log/dmesg
  rhel-domainname.service                                                               loaded    active   exited  Read and set NIS domainname from /etc/sysconfig/network
  rhel-import-state.service                                                             loaded    active   exited  Import network configuration from initramfs
  rhel-loadmodules.service                                                              loaded    inactive dead    Load legacy module configuration
  rhel-readonly.service                                                                 loaded    active   exited  Configure read-only root support
  rhsmcertd.service                                                                     loaded    active   running Enable periodic update of entitlement certificates.
  rngd.service                                                                          loaded    active   running Hardware RNG Entropy Gatherer Daemon
  rpc-gssd.service                                                                      loaded    inactive dead    RPC security service for NFS client and server
  rpc-statd-notify.service                                                              loaded    inactive dead    Notify NFS peers of a restart
  rpc-statd.service                                                                     loaded    active   running NFS status monitor for NFSv2/3 locking.
  rpcbind.service                                                                       loaded    active   running RPC bind service
  rsyslog.service                                                                       loaded    active   running System Logging Service
● salt-master.service                                                                   not-found inactive dead    salt-master.service
  salt-minion.service                                                                   loaded    active   running The Salt Minion
  selinux-policy-migrate-local-changes@targeted.service                                 loaded    inactive dead    Migrate local SELinux policy changes from the old store structure to the new structur
● sendmail.service                                                                      not-found inactive dead    sendmail.service
● slapd.service                                                                         not-found inactive dead    slapd.service
  smartd.service                                                                        loaded    active   running Self Monitoring and Reporting Technology (SMART) Daemon
  snmpd.service                                                                         loaded    active   running Simple Network Management Protocol (SNMP) Daemon.
● sntp.service                                                                          not-found inactive dead    sntp.service
  sshd-keygen.service                                                                   loaded    inactive dead    OpenSSH Server Key Generation
  sshd.service                                                                          loaded    active   running OpenSSH server daemon
● sssd.service                                                                          not-found inactive dead    sssd.service
● syslog.service                                                                        not-found inactive dead    syslog.service
  sysstat.service                                                                       loaded    active   exited  Resets System Activity Logs
  systemd-ask-password-console.service                                                  loaded    inactive dead    Dispatch Password Requests to Console
  systemd-ask-password-plymouth.service                                                 loaded    inactive dead    Forward Password Requests to Plymouth
  systemd-ask-password-wall.service                                                     loaded    inactive dead    Forward Password Requests to Wall
  systemd-binfmt.service                                                                loaded    inactive dead    Set Up Additional Binary Formats
  systemd-firstboot.service                                                             loaded    inactive dead    First Boot Wizard
  systemd-fsck-root.service                                                             loaded    active   exited  File System Check on Root Device
  systemd-fsck@dev-disk-by\x2duuid-0057a455\x2d44f4\x2d4713\x2d832d\x2d64836220ee52.service loaded    active   exited  File System Check on /dev/disk/by-uuid/0057a455-44f4-4713-832d-64836220ee52
  systemd-fsck@dev-mapper-rhel\x2dvar.service                                           loaded    active   exited  File System Check on /dev/mapper/rhel-var
  systemd-fsck@dev-mapper-rhel\x2dvar_log.service                                       loaded    active   exited  File System Check on /dev/mapper/rhel-var_log
  systemd-fsck@dev-mapper-rhel\x2dvar_log_audit.service                                 loaded    active   exited  File System Check on /dev/mapper/rhel-var_log_audit
  systemd-fsck@dev-mapper-rhel\x2dvar_tmp.service                                       loaded    active   exited  File System Check on /dev/mapper/rhel-var_tmp
  systemd-hwdb-update.service                                                           loaded    inactive dead    Rebuild Hardware Database
  systemd-initctl.service                                                               loaded    inactive dead    /dev/initctl Compatibility Daemon
  systemd-journal-catalog-update.service                                                loaded    inactive dead    Rebuild Journal Catalog
  systemd-journal-flush.service                                                         loaded    active   exited  Flush Journal to Persistent Storage
  systemd-journald.service                                                              loaded    active   running Journal Service
  systemd-logind.service                                                                loaded    active   running Login Service
  systemd-machine-id-commit.service                                                     loaded    inactive dead    Commit a transient machine-id on disk
  systemd-modules-load.service                                                          loaded    inactive dead    Load Kernel Modules
  systemd-random-seed.service                                                           loaded    active   exited  Load/Save Random Seed
  systemd-readahead-collect.service                                                     loaded    inactive dead    Collect Read-Ahead Data
  systemd-readahead-done.service                                                        loaded    inactive dead    Stop Read-Ahead Data Collection
  systemd-readahead-replay.service                                                      loaded    inactive dead    Replay Read-Ahead Data
  systemd-reboot.service                                                                loaded    inactive dead    Reboot
  systemd-remount-fs.service                                                            loaded    active   exited  Remount Root and Kernel File Systems
  systemd-shutdownd.service                                                             loaded    inactive dead    Delayed Shutdown Service
  systemd-sysctl.service                                                                loaded    active   exited  Apply Kernel Variables
● systemd-sysusers.service                                                              not-found inactive dead    systemd-sysusers.service
● systemd-timesyncd.service                                                             not-found inactive dead    systemd-timesyncd.service
  systemd-tmpfiles-clean.service                                                        loaded    inactive dead    Cleanup of Temporary Directories
  systemd-tmpfiles-setup-dev.service                                                    loaded    active   exited  Create Static Device Nodes in /dev
  systemd-tmpfiles-setup.service                                                        loaded    active   exited  Create Volatile Files and Directories
  systemd-udev-settle.service                                                           loaded    active   exited  udev Wait for Complete Device Initialization
  systemd-udev-trigger.service                                                          loaded    active   exited  udev Coldplug all Devices
  systemd-udevd.service                                                                 loaded    active   running udev Kernel Device Manager
  systemd-update-done.service                                                           loaded    inactive dead    Update is Completed
  systemd-update-utmp-runlevel.service                                                  loaded    inactive dead    Update UTMP about System Runlevel Changes
  systemd-update-utmp.service                                                           loaded    active   exited  Update UTMP about System Boot/Shutdown
  systemd-user-sessions.service                                                         loaded    active   exited  Permit User Sessions
  systemd-vconsole-setup.service                                                        loaded    active   exited  Setup Virtual Console
  tuned.service                                                                         loaded    active   running Dynamic System Tuning Daemon
  vdo.service                                                                           loaded    active   exited  VDO volume services
  vgauthd.service                                                                       loaded    active   running VGAuth Service for open-vm-tools
  vmtoolsd-init.service                                                                 loaded    inactive dead    One-time configuration for vmtoolsd
  vmtoolsd.service                                                                      loaded    active   running Service for virtual machines hosted on VMware
● ypbind.service                                                                        not-found inactive dead    ypbind.service
● yppasswdd.service                                                                     not-found inactive dead    yppasswdd.service
● ypserv.service                                                                        not-found inactive dead    ypserv.service
● ypxfrd.service                                                                        not-found inactive dead    ypxfrd.service

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

156 loaded units listed.
To show all installed unit files use 'systemctl list-unit-files'.
```",2021-01-14T16:07:32Z
760300364,"Based on that output, the code generates:

```
{'salt-minion.service': {'name': 'salt-minion.service',
  'state': 'running',
  'status': 'unknown',
  'source': 'systemd'}}
```

(`status` is updated later from output of a different command)

I do see:

```
Active: active (running) since Thu 2021-01-14 16:04:04 GMT; 1min 5s ago
```

Maybe ansible was run before it was started? Or maybe the service is restarting repeatedly, and you just happen to have queried it via Ansible while it was stopped?",2021-01-14T16:16:48Z
760307833,"I thought that too, but the service stops and starts fine. I tailed the log to confirm that. The state query is right after the start. 

Could i possibly add a delay or something to the query? 

I also reviewed if anyone else had this problem. Someone else had also reported this but in a older version. The issue never had a resolution as far as i could see and was closed for comments.

",2021-01-14T16:28:38Z
760325287,"All of those directories within the `playbooks` dir are arbitrary, but named via convention.  None of them have any more meaning in a collection than they would in your own ansible project directory where you store playbooks.

Additionally: https://github.com/ansible/ansible/pull/72602",2021-01-14T16:56:33Z
760325346,"Files identified in the description:
* [`docs/docsite/rst/dev_guide/developing_collections.rst`](https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/dev_guide/developing_collections.rst)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-14T16:56:37Z
760329493,!component =lib/ansible/modules/clustering/k8s/k8s.py,2021-01-14T17:03:06Z
760331617,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/clustering/k8s/k8s.py -> https://galaxy.ansible.com/community/kubernetes

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-14T17:06:43Z
760350805,@mkrizek thanks!,2021-01-14T17:38:20Z
760400589,"@sivel including templates? In my playbook directory it has meaning. Is there any way to have variables relative to the playbooks? e.g. `git_url` is default to `github.com`, but can be overwritten via group/host vars in inventory. ",2021-01-14T18:55:12Z
760408304,"I concur, this is not a bug, the machine is unreachable, ansible returns the correct message.",2021-01-14T19:10:15Z
760408893,doesn't the checksum indicate if the content changed?,2021-01-14T19:11:31Z
760409178,"@bcoca I don't understand, the machine is online, but ansible can not execute modules on it which is clearly error behavior, not unreachable behavior.

To add on to that, ansible itsself is even stating that the device is ""online"" otherwise it wouldn't have moved beyond this statement
```
<testdevice> SSH: EXEC ssh -vvv -o ForwardAgent=yes -o ControlPersist=1800s -o ControlMaster=auto -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=""debian""' -o ConnectTimeout=120 -o ControlPath=/home/<name>/.ansible/cp/8ebc0a9871 testdevice '/bin/sh -c '""'""'sudo -H -S -n  -u root /bin/sh -c '""'""'""'""'""'""'""'""'echo BECOME-SUCCESS-mppcuqjdhlhwljddxlrdzqhwstxudvlg ; /usr/bin/python'""'""'""'""'""'""'""'""' && sleep 0'""'""''
```",2021-01-14T19:12:06Z
760414907,"Possible Misunderstanding
=========================

Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us.

We believe the ticket you have filed is being somewhat misunderstood, as one thing works a little differently than stated.

This is correct as local connections don't use `ansible_user`, the previous value was incorrect most of the time, only being correct when the local user executing ansible happens to be the same as the remote user defined. 

So this might have been correct for your case, but was incorrect in general.

In the future, this might be a topic more well suited for the user list, which you can also post here if you'd like some more help with the above.
   
   * https://groups.google.com/forum/#!forum/ansible-project

Thank you once again for this and your interest in Ansible!",2021-01-14T19:23:11Z
760417526,"vars/files/templates are 'normal' relative directories for playbooks and roles, they don't have a 'more special' meaning in collections, just the same as they would for any playbook file within the parent directory.

tasks was added as a suggestion, but won't work with relative paths automatically as the other 3.

In any case we should document this better in general, not just for collections, closing this issue as a subset of that general documentation item.",2021-01-14T19:27:03Z
760435069,can you reach it via ssh? 'being online' and 'being reachable' are 2 diff things.,2021-01-14T19:46:30Z
760445416,"Yes. I was also able to execute rm commands, but no creation type commands given the disk full status of the device.",2021-01-14T20:05:17Z
760445720,"`Data could not be sent to remote host` goes along with the tmp dir being full as you mentioned.  And it doesn't fail on earlier tasks because of pipelining, but `copy` requires a remote tmp dir.

If the data cannot be copied to the remote host because the tmp dir is full, it would appear that causes the device to be marked as unreachable.",2021-01-14T20:05:58Z
760451687,"> doesn't the checksum indicate if the content changed?

Content of what?",2021-01-14T20:17:56Z
760454213,"> More idempotent way without using `command`/`shell`:
> 
> ```yaml
> - name: disable default mysql module
>   copy:
>     dest: /etc/dnf/modules.d/mysql.module
>     content: |
>       [mysql]
>       name=mysql
>       stream=
>       profiles=
>       state=disabled
>   when: 
>     - ansible_os_family == 'RedHat'
>     - ansible_distribution_major_version | int >= 8
> ```

Untested, but think should work too (for MariaDB in this case).

```yaml
  - name: disable default MariaDB module
    ini_file:
      path: /etc/dnf/modules.d/mariadb.module
      section: mariadb
      option: state
      value: disabled
      no_extra_spaces: yes
```",2021-01-14T20:23:03Z
760458212,"The test `ansible-test sanity --test no-assert` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/no-assert.html)] failed with 13 errors:
```
lib/ansible/galaxy/collection/__init__.py:1010:5: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:65:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:123:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:189:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:194:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:199:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:212:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:217:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/collection/concrete_artifact_manager.py:222:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/dependency_resolution/dataclasses.py:328:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/dependency_resolution/dataclasses.py:404:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/dependency_resolution/providers.py:146:9: raise AssertionError instead of: assert 
lib/ansible/galaxy/dependency_resolution/providers.py:170:9: raise AssertionError instead of: assert
```
<!-- job_id: 4106 -->
<!-- job_id: b74e35b9e8b79fcb22e5a456822866a7 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-14T20:30:54Z
760465699,@nitzmahone @relrod thanks!,2021-01-14T20:46:11Z
760480246,Split up into two PRs: #73239 and #73240.,2021-01-14T21:14:31Z
760480592,A test for this is contained in #73240.,2021-01-14T21:15:09Z
760494717,Can anyone test with #73241 to see if that fixes the issue?,2021-01-14T21:42:45Z
760499784,"To me, that would constitute an error condition as the actual ssh process did not fail to connect to the device. 

I would imagine the logic for unreachable would check to see if the ssh connection timed out and if true ""unreachable"" else ...",2021-01-14T21:52:54Z
760501330,"Unfortunately, we just see that SSH cut the connect off during transfer and ssh exited with a 255 which indicates an unknown connection failure.  Your debug from SSH actually says it was a timeout.",2021-01-14T21:56:14Z
760501910,"Ahhh interesting. Limitation of the technology then, I appreciate the info.",2021-01-14T21:57:32Z
760690397,/rebuild_failed,2021-01-15T06:46:15Z
760690431,/rebuild_failed,2021-01-15T06:46:21Z
760728772,"Files identified in the description:
* [`lib/ansible/modules/uri.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/uri.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T08:07:39Z
760801235,"The test `ansible-test sanity --test validate-modules` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/validate-modules.html)] failed with 3 errors:
```
lib/ansible/modules/uri.py:0:0: nonexistent-parameter-documented: Argument 'headers_scret' is listed in DOCUMENTATION.options, but not accepted by the module argument_spec
lib/ansible/modules/uri.py:0:0: parameter-type-not-in-doc: Argument 'headers_secret' in argument_spec defines type as 'dict' but documentation doesn't define type
lib/ansible/modules/uri.py:0:0: undocumented-parameter: Argument 'headers_secret' is listed in the argument_spec, but not documented in the module documentation
```
<!-- job_id: 4145 -->
<!-- job_id: 2da612e453e8ac18b78dbddae40f954d -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-15T10:11:31Z
760912302,"What is then the recommended way to get the user name of the user used for the local connection? I.e. the user that launched the playbook?

EDIT: in case it helps others, I ended up replacing my instances of `ansible_user` with `(ansible_connection == 'local') | ternary(lookup('env','USER'), ansible_user)`, which ensures that I get the intended user, whether or not I run the playbook with a local connection (during testing), or over ssh.
I'd much prefer to use a 'special' connection variable rather than the lookup - but this seems the best possible AFAIK.

Note: if fact gathering is possible, then it is also possible to use `ansible_facts.user_id`, I think, although I did not further investigate that.

",2021-01-15T12:24:32Z
760934915,"Files identified in the description:
* [`lib/ansible/modules/import_tasks.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/import_tasks.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T13:14:12Z
760962773,"This is likely caused by the following code:
https://github.com/ansible/ansible/blob/aa21804165aa51db552d687c8d7c970fce454fbf/lib/ansible/plugins/strategy/linear.py#L419-L430

Specifically by `s = iterator.get_active_state(s)` where, in case of the `always` sections starts with a new `block`, we get `ITERATING_TASKS` for which we fail the host instead of executing `rescue`/`always` section.

We might do something similar as in https://github.com/ansible/ansible/pull/72947.

",2021-01-15T14:09:21Z
760965510,"This isn't the right place to do this, it should really be in the dep resolver. #72591 will improve the error by indicating that a concrete artifact pointer wasn't found in addition to giving the expected format for collection names.",2021-01-15T14:14:02Z
760965842,"Files identified in the description:
* `lib/ansible/galaxy`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T14:14:40Z
760984059,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T14:47:20Z
760984989,!component =lib/ansible/modules/cloud/amazon/ec2_ami.py,2021-01-15T14:48:56Z
760989930,"Files identified in the description:
* `lib/ansible/modules/cloud/amazon/ec2_ami.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T14:57:38Z
760989934,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/cloud/amazon/ec2_ami.py -> https://galaxy.ansible.com/amazon/aws

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T14:57:39Z
760990189,"The documentation you reference is for installing a ***role*** from a git repo.

The documentation for installing a collection from a git repo can be found at https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#installing-a-collection-from-a-git-repository

If you select the `collections` segment of the docs on the page you reference, it will direct you to the page I linked.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-15T14:58:04Z
760996801,!component =lib/ansible/plugins/lookup/filetree.py,2021-01-15T15:09:47Z
760999615,"We have added many specific error messages for the ssh issues that are capturable, some sadly will remain as generic as ssh itself does not give enough information. As such I'm going to close this issue and deal with specific messages as they appear.",2021-01-15T15:14:35Z
761000708,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this feature request because we don't want to add unneeded complexity to vars_prompt as you can already use assert/fail tasks to ensure a value is passed in.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourage open dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implementing a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-15T15:16:27Z
761002758,"As discussed above, this is a result of running parallel tasks against the same file, ansible does not lock by default so there is a concurrency issue as different processes update the file. Adding `serial: 1` at the play level or `throttle: 1` at the task level should solve this issue (also mentioned above).",2021-01-15T15:19:51Z
761003448,!component =lib/ansible/plugins/callbacks/log_plays.py,2021-01-15T15:20:55Z
761003808,"Files identified in the description:
* `lib/ansible/plugins/lookup/filetree.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T15:21:27Z
761003817,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/lookup/filetree.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T15:21:28Z
761004463,!component =lib/ansible/plugins/inventory/virtualbox.py,2021-01-15T15:22:30Z
761005747,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this feature because this is not very friendly to most users and any programmer (the main consumer of a stacktrace) can already enable -vvv by default (config, env var, etc).

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourage open dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implementing a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-15T15:24:34Z
761006972,!component =lib/ansible/plugins/callback/selective.py,2021-01-15T15:26:42Z
761007765,!component =lib/ansible/plugins/callback/full_skip.py,2021-01-15T15:27:50Z
761007848,"It appears this issue was actually fixed in the community.general collection:

https://github.com/ansible-collections/community.general/commit/151551b04f4afde96ca047d406c0da654a424e82

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-15T15:27:55Z
761009492,"sorry for the delay in responding, but we cannot reproduce this issue.

Can you give a simple reproducer example?

needs_info",2021-01-15T15:30:40Z
761010553,"Files identified in the description:
* `lib/ansible/plugins/callbacks/log_plays.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T15:32:31Z
761010583,"Files identified in the description:
* `lib/ansible/plugins/inventory/virtualbox.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T15:32:34Z
761010590,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/inventory/virtualbox.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T15:32:35Z
761010613,"Files identified in the description:
* `lib/ansible/plugins/callback/full_skip.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T15:32:38Z
761010619,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/callback/full_skip.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T15:32:38Z
761011559,"
List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This does not seem to be a vault issue (the value is not decrypted when reading the file) but a YAML syntax issue, this is probably a bad whitespace (tab?) in that line. In any case this is not a bug. 

We'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-15T15:34:14Z
761012115,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/community.general

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-15T15:35:07Z
761012805,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/community.general

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-15T15:36:13Z
761013520,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

I would expect this since the user cannot read/see the file so any test will show it as 'non existing' though it is really 'non accessible'. I would adjust permissions on the tempfile directory to allow the other user to access it so it is not seen as missing.

Since this is not a bug, If you need further help with this issue please go to:

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-15T15:37:17Z
761015365,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this request becasue we already include a 'path' option that will allow you to set this for any specific user.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourage open dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implenting a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-15T15:40:22Z
761016893,closing as per above,2021-01-15T15:43:05Z
761017913,"have you tried quoting `'^Password for \w+':`

needs_info",2021-01-15T15:44:45Z
761019190,"closing in favour of #67757, the decrypted extension should really reflect the original file extension, since that is what a decrypted vault is in the end ",2021-01-15T15:46:56Z
761020746,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This is not a bug, it is by design, to achieve what you want do the following:

```
 - set_fact: mypass=lookup(...)
   run_once: true
```
This will generate the password once and with the same value for all hosts in the play batch.

We'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-15T15:49:22Z
761021410,"I can't reproduce this on 2.9.6 from my test case above, so I guess it's no longer an issue.",2021-01-15T15:50:29Z
761022276,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this feature, aside from being unclear what you expect to happen when things match/don't match the expected result, `changed_when` and `failed_when` allow for a very flexible processing of result data already and provide a superset of what this seems to request.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourageopen dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implenting a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-15T15:52:07Z
761023748,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we are going to decline this feature because it adds too much complexity to the cron module and it can easily be provided by a template.

However, we're absolutely always up for discussion.  
Since this is a really busy project, we don't always see comments on closed tickets, but want to encourageopen dialog.  

You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implenting a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-15T15:54:37Z
761024581,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 4 errors:
```
lib/ansible/executor/play_iterator.py:644:61: E226: missing whitespace around arithmetic operator
lib/ansible/executor/play_iterator.py:644:65: E226: missing whitespace around arithmetic operator
lib/ansible/playbook/block.py:84:9: E265: block comment should start with '# '
lib/ansible/playbook/handler_block.py:35:161: E501: line too long (164 > 160 characters)
```
<!-- job_id: 4155 -->
<!-- job_id: 84b8f5aec050bff0a5c215e601048374 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-15T15:56:04Z
761025998,"It looks the real problem is not the `\w`, as the output you are reading is JSON, which requires backslashes to be escaped.

The actual problem is the `^`, as pexpect does not use `MULTILINE`.  And additionally it does not match on a per line basis, it has the concept of a ""window"" and it does matches within the window, which has a default size of 2000 bytes.  So it would require that the window start with `Password`.

You may be able to try including the multiline flag in the pattern itself.

`'(?m)^Password for \w+':

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-15T15:58:24Z
761026142,"We continually add platforms, but the fix hould also add a fallback looking for tools (systemd/hostname/etc) if no platform is matched.",2021-01-15T15:58:40Z
761028644,"closing this for 2 reasons:

 - Though here it is for a specific keyword, we have had the general ask is for adding play keywords for inheritance to `import_playbook` which is not something we are looking to do at the moment but might reconsider in a future refactoring.

 -  The 'gathering' https://docs.ansible.com/ansible/latest/reference_appendices/config.html#default-gathering  setting already accomplishes what is being asked for here.",2021-01-15T16:03:00Z
761034941,"`(ansible_connection in (""local"", ""chroot"", ""jail"" ....` there are several connections that drop the remote user.

with fact gathering you also need to factor 'become' and you have both 'effective' and 'real' user ids in facts",2021-01-15T16:13:42Z
761037164,closing via #60702,2021-01-15T16:17:39Z
761038266,"added in 2.10
https://docs.ansible.com/ansible/2.10/collections/ansible/builtin/sh_shell.html#parameter-world_readable_temp

variable name: `ansible_shell_allow_world_readable_temp` ",2021-01-15T16:19:32Z
761039810,note: paths we might want to keep as bytes.,2021-01-15T16:22:25Z
761040799,!component =lib/ansible/plugins/inventory/gcp_compute.py,2021-01-15T16:24:11Z
761042755,"Files identified in the description:
* `lib/ansible/plugins/inventory/gcp_compute.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T16:27:49Z
761042765,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/inventory/gcp_compute.py -> https://galaxy.ansible.com/google/cloud

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T16:27:49Z
761063786,"Files identified in the description:
* `lib/ansible/modules/windows/win_dsc.ps1`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T17:05:42Z
761063794,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/windows/win_dsc.ps1 -> https://galaxy.ansible.com/ansible/windows

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T17:05:43Z
761080947,"Files identified in the description:
* `lib/ansible/modules/windows/win_package.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T17:38:03Z
761080955,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/windows/win_package.py -> https://galaxy.ansible.com/ansible/windows

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-15T17:38:03Z
761117432,Do we want to load antsi-bull in 2.9? The 2.9 docs don't use it . . .,2021-01-15T18:46:12Z
761118554,Same question here as on #73252. Do we need/want antsi-bull on the old stable branches?,2021-01-15T18:48:24Z
761143262,Restarting tests (since rstcheck / sphinx were updated).,2021-01-15T19:26:19Z
761155430,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
mkdir -p rst/cli
../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py
../../hacking/build-ansible.py document-keywords --template-dir=../templates --output-dir=rst/reference_appendices/ ../../lib/ansible/keyword_desc.yml
../../hacking/build-ansible.py docs-build base -o rst ;\

../bin/testing_formatter.sh
CPUS=2 make -f Makefile.sphinx singlehtml
make[1]: Entering directory '/root/ansible/docs/docsite'
sphinx-build -M singlehtml ""rst"" ""_build"" -j 2 -n -w rst_warnings 
Running Sphinx v1.7.9
Makefile.sphinx:24: recipe for target 'singlehtml' failed
make[1]: Leaving directory '/root/ansible/docs/docsite'
Makefile:66: recipe for target 'base_singlehtmldocs' failed
--> Standard Error
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize config: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.config:plugin_type=lookup|ansible.builtin.config did not return correct RETURN or EXAMPLES.
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize random_choice: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.random_choice:plugin_type=lookup|ansible.builtin.random_choice did not return correct RETURN or EXAMPLES.
../bin/testing_formatter.sh: 38: ../bin/testing_formatter.sh: cannot open ../docsite/rst/dev_guide/testing/sanity/index.rst: No such file

Exception occurred:
  File ""/usr/local/lib/python3.6/dist-packages/sphinx_antsibull_ext/assets.py"", line 45, in setup_assets
    app.add_css_file(file)
AttributeError: 'Sphinx' object has no attribute 'add_css_file'
The full traceback has been saved in /tmp/sphinx-err-7t4im9y9.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
make[1]: *** [singlehtml] Error 2
make: *** [base_singlehtmldocs] Error 2
```
<!-- job_id: 4178 -->
<!-- job_id: 3c46391b62f2a8d6ffc6858ca10c524b -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-15T19:38:29Z
761162338,"Files identified in the description:
* [`lib/ansible/modules/ping.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/ping.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T19:46:55Z
761172760,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
mkdir -p rst/cli
../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py
../../hacking/build-ansible.py document-keywords --template-dir=../templates --output-dir=rst/reference_appendices/ ../../lib/ansible/keyword_desc.yml
../../hacking/build-ansible.py docs-build base -o rst ;\

../bin/testing_formatter.sh
CPUS=2 make -f Makefile.sphinx singlehtml
make[1]: Entering directory '/root/ansible/docs/docsite'
sphinx-build -M singlehtml ""rst"" ""_build"" -j 2 -n -w rst_warnings 
Running Sphinx v1.7.9
Makefile.sphinx:24: recipe for target 'singlehtml' failed
make[1]: Leaving directory '/root/ansible/docs/docsite'
Makefile:66: recipe for target 'base_singlehtmldocs' failed
--> Standard Error
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize config: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.config:plugin_type=lookup|ansible.builtin.config did not return correct RETURN or EXAMPLES.
ERROR:antsibull:func=write_rst:mod=antsibull.write_docs:nonfatal_errors=['Unable to normalize random_choice: return due to: 1 validation error for PluginReturnSchema\nreturn -> _raw -> type\n  string does not match regex ""^(bool|complex|dict|float|int|list|str)$"" (type=value_error.str.regex; pattern=^(bool|complex|dict|float|int|list|str)$)']:plugin_name=ansible.builtin.random_choice:plugin_type=lookup|ansible.builtin.random_choice did not return correct RETURN or EXAMPLES.
../bin/testing_formatter.sh: 38: ../bin/testing_formatter.sh: cannot open ../docsite/rst/dev_guide/testing/sanity/index.rst: No such file

Exception occurred:
  File ""/usr/local/lib/python3.6/dist-packages/sphinx_antsibull_ext/assets.py"", line 45, in setup_assets
    app.add_css_file(file)
AttributeError: 'Sphinx' object has no attribute 'add_css_file'
The full traceback has been saved in /tmp/sphinx-err-008tzu2v.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
A bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!
make[1]: *** [singlehtml] Error 2
make: *** [base_singlehtmldocs] Error 2
```
<!-- job_id: 4179 -->
<!-- job_id: dddcc9c10ec85d053acb72a2dbf0d3b9 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-15T20:10:10Z
761178560,"@samccann for some reason, the sanity test is still using Sphinx v1.7.9.",2021-01-15T20:23:06Z
761225074,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
make: *** [changelog] Error 5
```
<!-- job_id: 4192 -->
<!-- job_id: f3dac575687dfb30cbad9184636b0547 -->
<!-- job_id: None -->
The test `ansible-test sanity --test changelog` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/changelog.html)] failed with 1 error:
```
changelogs/fragments/73176_sphinx_rstcheck_versions.yml:0:0: yaml parsing error
```
<!-- job_id: 4192 -->
<!-- job_id: e4112e51e4a35c2f2f90b258e3f428da -->
<!-- job_id: None -->
The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 2 errors:
```
changelogs/fragments/73176_sphinx_rstcheck_versions.yml:3:1: error: syntax error: could not find expected ':' (syntax)
changelogs/fragments/73176_sphinx_rstcheck_versions.yml:3:1: unparsable-with-libyaml: while scanning a simple key - could not find expected ':'
```
<!-- job_id: 4192 -->
<!-- job_id: 523c9a31ef4698ffddebe9bb78fcbcb8 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-15T22:11:48Z
761229021,Superseded by #73260,2021-01-15T22:22:35Z
761259132,"Files identified in the description:
* [`lib/ansible/modules/uri.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/uri.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-15T23:48:38Z
761259134,"@redgryphon: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-15T23:48:38Z
761618254,I also have a change lined up where a confirmation of the string is required when hidden - if this would be the preferred behaviour I'll push it up.,2021-01-16T19:14:25Z
761668790,"Files identified in the description:
* [`lib/ansible/modules/pause.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/pause.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-16T21:23:04Z
761722642,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-17T03:03:52Z
761722647,"@Wobak: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-17T03:03:52Z
761758482,"+vmware
+label affects_2.11",2021-01-17T09:07:22Z
761813710,"[This answer](https://stackoverflow.com/a/36916316/1369191) on a 2016 StackOverflow question has a good explanation on possible root cause of the issue, that might be helpful to anyone working a permanent fix.

Also #34335 and its comments might be worth reading.

**Some workarounds, depending on the use case:**

- `ignore_errors: true` 
- `register: file_deleted retries: X until: file_deleted is success`
- If the file is blocked by a running process, define a task with `wait_for: <path to pid> timeout: N`
",2021-01-17T13:35:12Z
761835638,Hi @PierreLesouhaitier what about using the `no_log` option in the playbook header? Regards,2021-01-17T16:04:35Z
761856779,"Hi @Bilge 

I cannot see how this could be implemented. The handlers are called when there is a change in a single task: 

For instance, if you do:

```yaml
## mintask.yml file
- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: foo.conf
    state: touch
  notify:
    - Debug
```

This task will call a handler like this, even though it comes from a `import_task` and the handler is located in the main file:

```yaml
---
- name: MyPlay
  hosts: localhost
  connection: local
  gather_facts: false

  tasks:

    - name: Import
      import_tasks: minitask.yml

  handlers:

    - name: Debug
      debug:
        msg: ""Notify""
```

If your imported task is like this:

```yaml
- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: foo.conf
    state: touch
  changed_when: False
  notify:
    - Debug
```

The handler will never be called

Or if you have something like this:

```yml
---
- name: Test
  debug:
    msg: ""Call Notify""
  changed_when: True
  notify:
    - Debug


- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: foo.conf
    state: touch
  notify:
    - Debug
```

The handler will be called once.

I have several questions:

* How do you expect in a block to call a handler? 
* How you will manage if a single task has changed? 
* How you will manage a handler if you have a loop?

I personally can see this feature quite complicated to implement beforehand.

What do you think?
",2021-01-17T18:23:04Z
761867631,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 5 errors:
```
test/lib/ansible_test/_internal/executor.py:1498:29: E231: missing whitespace after ','
test/lib/ansible_test/_internal/executor.py:1498:35: E231: missing whitespace after ','
test/lib/ansible_test/_internal/executor.py:1498:41: E231: missing whitespace after ','
test/lib/ansible_test/_internal/executor.py:1499:23: E201: whitespace after '['
test/lib/ansible_test/_internal/executor.py:1499:119: E202: whitespace before ']'
```
<!-- job_id: 4285 -->
<!-- job_id: ec2176a2a38340413ccff692ccbe8631 -->
<!-- job_id: None -->
The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 5 errors:
```
test/lib/ansible_test/_internal/executor.py:1498:28: bad-whitespace: Exactly one space required after comma     python_versions = [""3.6"",""3.7"",""3.8"",""3.9""]                             ^
test/lib/ansible_test/_internal/executor.py:1498:34: bad-whitespace: Exactly one space required after comma     python_versions = [""3.6"",""3.7"",""3.8"",""3.9""]                                   ^
test/lib/ansible_test/_internal/executor.py:1498:40: bad-whitespace: Exactly one space required after comma     python_versions = [""3.6"",""3.7"",""3.8"",""3.9""]                                         ^
test/lib/ansible_test/_internal/executor.py:1499:21: bad-whitespace: No space allowed after bracket     callback_paths = [ ""/usr/lib/python%s/site-packages/ara/plugins/callback"" % version for version in python_versions ]                      ^
test/lib/ansible_test/_internal/executor.py:1499:119: bad-whitespace: No space allowed before bracket     callback_paths = [ ""/usr/lib/python%s/site-packages/ara/plugins/callback"" % version for version in python_versions ]                                                                                                                        ^
```
<!-- job_id: 4285 -->
<!-- job_id: 9a902230a62ccdb0f76b9ce6c2d4120f -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-17T19:38:35Z
761881469,"Files identified in the description:
* [`lib/ansible/config/manager.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/config/manager.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-17T21:16:39Z
761888923,"~The example playbook was successful for me in 2.9~ (see [future comment](https://github.com/ansible/ansible/issues/73268#issuecomment-761902721)), but failed in devel.

Note: when successful, output is large from ansible.com, I used this for easier reading:

```yaml
- hosts: localhost
  tasks:
  - debug:
      msg: ""{{ lookup('url', 'https://api.ipify.org') }}""
    vars:
      ansible_lookup_url_timeout: ""{{ 1 + 1 }}""
```

Also I thought it might've been a difference between Jinja2 native setting or not. 
Running with `ANSIBLE_JINJA2_NATIVE=true` did not work in devel either though.",2021-01-17T22:09:14Z
761902670,"> The example playbook was successful for me in 2.9, but failed in devel.

The `uri` lookup did not consult variables when loading configuration in 2.9. So things in 2.9 may still be broken, but `uri` lookup plugin will not reveal it.

",2021-01-17T23:50:17Z
761902721,"Ok, so I wrote a little script to go back and try the test playbook on every commit in devel, going back in time, to try to see where it changed, and the results are disappointing. In short, it ""works"" in 2.9 because there is no vars entry in 2.9; it was added in this commit: https://github.com/ansible/ansible/commit/37e7191304bcefb9c2863ccc87162df798daa6e2

Guess I could've found that out more easily just looking at the 2.9 docs 🤦‍♂️",2021-01-17T23:50:40Z
761966562,"Files identified in the description:
* [`lib/ansible/modules/command.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/command.py)
* [`lib/ansible/modules/file.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/file.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T04:08:54Z
761968750,"Files identified in the description:
* [`lib/ansible/modules/command.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/command.py)
* [`lib/ansible/modules/file.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/file.py)
* [`lib/ansible/modules/lineinfile.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/lineinfile.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T04:17:22Z
761982764,"This error is probable due to the playbook being run in an AWX container, and groups available on the host OS are not available in the container. :O

Will do some more testing and report back.",2021-01-18T05:07:16Z
762046787,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/community.vmware.

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-18T07:32:54Z
762102340,"Files identified in the description:
* `lib/ansible/modules/windows/win_copy.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T09:08:52Z
762102344,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/windows/win_copy.py -> https://galaxy.ansible.com/ansible/windows

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-18T09:08:52Z
762196248,"By defining that group in the AWX container as well it works fine. This is not a bug.
```
- name: Ensure group ""webhook"" exists
  group:
    name: webhook
    state: present
 ```",2021-01-18T11:44:18Z
762225405,"The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 1 error:
```
docs/docsite/rst/scenario_guides/vmware_scenarios/vmware_requirements.rst:64:0: (rst) Link is formatted in Markdown style.
```
<!-- job_id: 4315 -->
<!-- job_id: a63655747f8bc9b3aa067abb0c0e7736 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-18T12:39:32Z
762229417,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T12:47:21Z
762230971,@ansibot !component include_tasks,2021-01-18T12:50:41Z
762236541,"Files identified in the description:
* [`lib/ansible/modules/import_tasks.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/import_tasks.py)
* [`lib/ansible/modules/include_tasks.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/include_tasks.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T13:01:58Z
762263705,"I would like to say that as an avid user of hash merging I would really like to see a more precise deprecation message that tells men where I am actually using merging, (still). I have already begun the process to get rid of merging as a requirement, but it's quite deeply rooted in my workflow.

It seems the easiest way to get merging back after it is deprecated is to use the inherent merging of the different inventory sources. So, I go from something like this:

```yaml
# group_vars/all.yml
backup:
  global_encryption_key_id: a234cde
#host_vars/host.yml
backup:
  encryption_key_id: b234cde
```

To this:
```yaml
# group_vars/all.yml
backup_global_encryption_key_id: a234cde
#host_vars/host.yml
backup_encryption_key_id: b234cde
```

I have to say that I find dictionaries as namespaces a heckin good idea (ok, I'm a python programer) and deeply regret that they are not supported anymore. I am fairly sure that ansible will not be able to stop allowing merging of different variable sources as that is way too deeply ingrained in it's DNA.

I have to say I found merging a really nice extension of this basic behaviour that allowed nice and clean grouping of variables in dicts as namespaces and too never understood why that wasn't the default as it simplifies the whole mental model a lot (as with merging, not only the first level of variables is merged, but all of them, making - for me - for a much simpler mental model.",2021-01-18T13:51:23Z
762269337,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T14:01:27Z
762307950,"I cannot reproduce your issue, I get the expected output:

```
ok: [localhost] => {
    ""mydict"": {
        ""a"": ""b"",
        ""c"": ""d""
    }
}
```

I can only reproduce this issue, if I create a variable named `dict` that is a `dict` such as:

```yaml
  vars:
    dict: {}
    list_of_pairs: [ ['a', 'b'], ['c', 'd'] ]
    mydict: ""{{ dict(list_of_pairs) }}""
```",2021-01-18T15:08:17Z
762309086,"You are using naming conventions of a role, but are not actually using a role.  As such, ansible has no idea to look in the `handlers` directory.

You will need to restructure your files to accommodate this functionality.

Please stop by IRC or the mailing list for help in how to achieve your goal:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-18T15:10:19Z
762314318,Partially related to https://github.com/ansible/ansible/commit/1da47bfa8c6711e19902e4a1460d3276d33664e1,2021-01-18T15:19:00Z
762316077,"Bug in Launchpad is still waiting to be solved in Ubuntu 20.04. As bug seems to be fixed in 20.10 I think that version should be already supported and wait for Ubuntu 20.04.
https://bugs.launchpad.net/ubuntu/+source/python-virtualenv/+bug/1880749
![image](https://user-images.githubusercontent.com/30119472/104933474-f2d52500-5976-11eb-822c-d7a806bb41a3.png)
",2021-01-18T15:22:09Z
762317229,"@sivel well spotted, I made that mistake a long time ago in group_vars/all/ and I would not have thought about this honestly. Thanks.",2021-01-18T15:24:06Z
762322559,I agree. IMHO there is no reason to not support Ubuntu 20.10 if the bug is fixed on it.,2021-01-18T15:33:32Z
762390245,!component =lib/ansible/plugins/filter/ipaddr.py,2021-01-18T17:42:17Z
762391825,!component =lib/ansible/plugins/lookup/filetree.py,2021-01-18T17:45:53Z
762398281,"Files identified in the description:
* `lib/ansible/plugins/filter/ipaddr.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-18T18:01:23Z
762398285,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/filter/ipaddr.py -> https://galaxy.ansible.com/ansible/netcommon

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-18T18:01:24Z
762399355,"I'm guessing this is something that may be specific to the Ubuntu FIPS 140-2 implementation.  Unfortunately, to get access to FIPS support on Ubuntu, you have to purchase Ubuntu Advantage.

I've not found a way to download the NSX Edge appliance either.",2021-01-18T18:03:51Z
762399743,"the format of the doc also has a mistake.

```yaml
- name: Prints two lines of messages, but only if there is an environment value set
  ansible.builtin.debug:
    msg:
    # wrong indentation
    - ""Provisioning based on YOUR_KEY which is: {{ lookup('env', 'YOUR_KEY') }}""
    - ""These servers were built using the password of '{{ password_used }}'. Please retain this for later use.""
```
should be 
```yaml
- name: Prints two lines of messages, but only if there is an environment value set
  ansible.builtin.debug:
    msg:
    # Correct
      - ""Provisioning based on YOUR_KEY which is: {{ lookup('env', 'YOUR_KEY') }}""
      - ""These servers were built using the password of '{{ password_used }}'. Please retain this for later use.""
```",2021-01-18T18:04:45Z
762400418,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/plugins/lookup/filetree.py -> https://galaxy.ansible.com/community/general

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-18T18:06:19Z
762400717,Closing in favor of https://github.com/ansible/ansible/issues/72668,2021-01-18T18:06:58Z
762403141,"> the format of the doc also has a mistake.

That is not a mistake, that is valid YAML.  List indicators do not need to be indented past their parent.",2021-01-18T18:12:43Z
762403888,"@gzzchh: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-18T18:14:15Z
762404847,"See also https://github.com/ansible/ansible/issues/39686

I think #39686 likely just needs to be closed.",2021-01-18T18:16:26Z
762410402,We already have an `isidentifier` function in ansible. Located at `ansible.utils.vars.isidentifier`,2021-01-18T18:28:50Z
762413332,"ok, but how about the parameter type issue above?",2021-01-18T18:36:13Z
762425928,"> We already have an `isidentifier` function in ansible. Located at `ansible.utils.vars.isidentifier`

I've taken a prompt look and it seems that this helper doesn't replicate the stdlib behavior so I'm not sure if we want to reuse it for FQCNs.",2021-01-18T19:08:24Z
762434516,"Just as an FYI, I tried this change locally and it looks like it requires the plugin to call `set_options()` before the deprecation message will appear. Many of our builtin plugins (e.g., `file`) do not call that method since it doesn't seem to be required to do so.",2021-01-18T19:29:32Z
762440679,"Hrm, looks like the message does change, but it still references the wrong line number when I use the example from the original reported issue (with an invalid, two-line role `meta/main.yml`).

Without your change:
```
% ansible-playbook site.yml 
[DEPRECATION WARNING]: Ansible will require Python 3.8 or newer on the controller starting with Ansible 2.12. Current version: 3.7.3 (default, Apr 24 2020, 18:51:23) 
[Clang 11.0.3 (clang-1103.0.32.62)]. This feature will be removed from ansible-core in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
[WARNING]: You are running the development version of Ansible. You should only run Ansible from ""devel"" if you are modifying the Ansible engine, or trying out features
under development. This is a rapidly changing source of code and can become unstable at any point.
ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/shrews/Devel/playground/t/roles/a/meta/main.yml': line 3, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

(specified line no longer in file, maybe it changed?)
```

With your change:
```
% ansible-playbook site.yml
[DEPRECATION WARNING]: Ansible will require Python 3.8 or newer on the controller starting with Ansible 2.12. Current version: 3.7.3 (default, Apr 24 2020, 18:51:23) 
[Clang 11.0.3 (clang-1103.0.32.62)]. This feature will be removed from ansible-core in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
[WARNING]: You are running the development version of Ansible. You should only run Ansible from ""devel"" if you are modifying the Ansible engine, or trying out features
under development. This is a rapidly changing source of code and can become unstable at any point.
ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/shrews/Devel/playground/t/roles/a/meta/main.yml': line 3, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

dependencies:
 - { role: b, a_value=""{{ ""foo"" }}"" }
^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - ""{{ foo }}""
```",2021-01-18T19:45:23Z
762444669,@Andersson007 @samccann thanks for reviewing and merging!,2021-01-18T19:56:24Z
762446246,"Seems you can get 3 lic for free [source](https://ubuntu.com/advantage)

> Anyone can use UA Infrastructure Essential for free on up to 3 machines (limitations apply). All you need is an Ubuntu One account. And if you’re a recognised Ubuntu community member, it’s free on up to 50 machines.",2021-01-18T20:00:35Z
762454567,Thanks @js94x for the Ansible documentation fix!,2021-01-18T20:21:59Z
762456871,"Actually, whatever type you use for `msg` is just parroted back in the return, so it may be more than just `list`. Example as also valid:

```yaml
  tasks:
    - debug:
        msg:
          something: ""else""
          also: 5
```

If anything, `type` should be `complex` maybe?",2021-01-18T20:27:46Z
762458811,Probably `raw`,2021-01-18T20:33:03Z
762459230,"no, its still a string, the issue is that 'anything passed' gets converted into a string representation of itself, so lists and dictionaries become the 'string version' of themselves.",2021-01-18T20:34:10Z
762460386,"the text is still not correct, the 'ansible_become_*' vars are not AUTOMATICALLY populated, but if you set them in any way vars can be set (not the same as using cli options, keywords or configuration) they are still there
```
#> ansible -m debug -a 'msg={{ansible_become_password}}' -e ansible_become_password=test2 localhost

localhost | SUCCESS => {
    ""msg"": ""test2""
}
```
vs

```
ansible -m debug -a 'msg={{ansible_become_password}}' -K localhost
BECOME password:

localhost | FAILED! => {
    ""msg"": ""The task includes an option with an undefined variable. The error was: 'ansible_become_password' is undefined. 'ansible_become_password' is undefined""
}

```",2021-01-18T20:37:21Z
762460411,"This should be easy to add.  Just need to add a `ca_path` argument, and pass it on to `fetch_url`.",2021-01-18T20:37:27Z
762471146,Duplicate of https://github.com/ansible/ansible/issues/33831,2021-01-18T21:08:17Z
762478259,"As of now, when using `vars:` on a role definition, this is the expected behavior.

`vars:` are scoped at the play level, and the last one defined wins.  When roles are encountered during playbook parsing time, they are automatically merged into the play.

Switching to role params instead, produces: `bar`, `bar`, `cat`, `cat`

a/meta/main.yml:
```yaml
dependencies:
  - role: dep
    foo: bar
```

b/meta/main.yml
```yaml
dependencies:
  - role: dep
    foo: cat
```

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-18T21:28:06Z
762481207,"Currently the actual precedence is:

```
14. role vars (defined in `vars:`)
15. role vars (defined in role/vars/main.yml)
16. block vars (only for tasks in block)
17. task vars (only for the task, excluding `vars:` on roles)
```

I think honestly, `vars:` should probably override `role/vars/main.yml`.  I cannot imagine anyone would be relying on the current behavior, unless they don't realize thier `vars:` aren't doing what they anticipated.

This would require a change in `Role.get_vars` to swap those 2 lines.",2021-01-18T21:37:07Z
762491411,"@Shrews Unfortunately, that's expected. That's the position we get from YAML. Since it's an ""end of stream"" error, the error address is effectively the last line and column of the file. I'm not sure how we would go about getting the ""correct"" position in this situtaion.

https://github.com/ansible/ansible/blob/30d93995ddcf92636919c2238435064a8089e240/lib/ansible/parsing/utils/yaml.py#L37",2021-01-18T22:10:22Z
762499609,"Looking at your play again, I see those tasks are 1 after another.

You might be able to add a `pause` task in between. The big thing with many service managers, is that they don't wait to ensure that service fully started.  So after telling a service to start, it may take some amount of time afterwards before it fully starts.

Maybe you can put an `until` on the `service_facts` to wait until the service is actually started.

needs_info",2021-01-18T22:38:09Z
762501805,Is this even still an issue since https://github.com/ansible/ansible/pull/73000 was merged?,2021-01-18T22:46:54Z
762503650,@sivel Thanks for the ping. I've commented on the PR.,2021-01-18T22:54:03Z
762513012,Good find @sivel ,2021-01-18T23:31:01Z
762682335,"Files identified in the description:
* [`lib/ansible/modules/yum.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/yum.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-19T08:25:18Z
762695661,closed. will use module instead.,2021-01-19T08:50:53Z
762783663,I just ran into this exact issue. Is there a specific reason why this merge conflict hasn't been resolved since almost a year?,2021-01-19T11:31:08Z
762798859,"Files identified in the description:
* [`lib/ansible/modules/template.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/template.py)
* [`lib/ansible/plugins/lookup/vars.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/lookup/vars.py)
* `lib/ansible/template`
* [`lib/ansible/vars/hostvars.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/vars/hostvars.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-19T12:03:27Z
762808820,Duplicate of #56017 #56116,2021-01-19T12:24:52Z
762825755,"> It still isn't a bug because you can't silent the warning as the module is being used a way beyond its intention.
> 
> Now I do see your challenge, but everyone has their own way to deal with a ""disabled"" cron file. Probably best is to have a new ""feature"" to the cron module allowing you to have the managed cron file ""disabled"". And yes, that might result in a cron file ending in .disabled, but also explicitly managed as such (including suppressing the filename warning).
> 
> **Looking at the module, option ""disabled"" is already in place but only affects lines in files (prefixing lines with a #). It seems feasible to have the ""disabled"" option affect the filename when used in combination with option ""filename""**

This behavior changed compared from v2.9.x or earlier. I used the functionality as it previously worked but ran into unexpected issues after updating to v2.10.x, I changed my playbooks and roles according to the comments in this issue but it would be good to mention this in the documentation as well; https://docs.ansible.com/ansible/latest/collections/ansible/builtin/cron_module.html
",2021-01-19T13:01:46Z
762829014,"> ...
> **Looking at the module, option ""disabled"" is already in place but only affects lines in files (prefixing lines with a #). It seems feasible to have the ""disabled"" option affect the filename when used in combination with option ""filename""**

I used the cron module functionality as it previously worked in v2.9.x. After updating to v2.10.5, my crontab file was removed when just one line should have been removed. I found the comments in this issue and adjusted my playbook and roles as such but it would be good to mention this in the documentation as well: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/cron_module.html.",2021-01-19T13:08:31Z
762843151,"mode=preserve would be a great help.

It's far easier to set the correct permissions when creating the archive (zero effort if it is created on a unix filesystem) - and also much more fine-grained control of which files get which permission.

e.g Quite often, only some of the files in the archive require execute permission - and not possible afaik to apply permissions selectively when unarchiving.

Consequently, it requires a seperate task _after_ unarchiving. 
Moreover, it isn't very fast setting permissions using file module - as even with loop or with_glob, it tends to modify 1 file at a time. If there are many files to modify, it can take longer than the download and unarchive!

A preserve mode would eliminate all need for post-unarchive tasks

Right now, I either have to deal with slow post task - or complexity of using shell module to do what unarchive does
",2021-01-19T13:36:15Z
762843378,"Hey, I noticed this issue still occurs on Ansible 2.10.5. What's required to get PR #72035 merged?

Workaround:

```shell
mv skeleton/.git skeleton/.git.not
ansible-galaxy init --role-skeleton=skeleton MY_ROLE
# - Role MY_ROLE was created successfully
mv skeleton/.git.not/ skeleton/.git
```",2021-01-19T13:36:37Z
762866362,"Hi Matt,


Ahhh yeah that makes sense.


I had a feeling it was probably that. I didnt realise i could put ""unti"".


That would definitely solve my problem. I will give that a try.


Thanks so much.


Cheers


Nick Tailor

nicktailor.com






On Mon, Jan 18, 2021 at 10:38 PM Matt Martz <notifications@github.com>
wrote:

> Looking at your play again, I see those tasks are 1 after another.
>
> You might be able to add a pause task in between. The big thing with many
> service managers, is that they don't wait to ensure that service fully
> started. So after telling a service to start, it may take some amount of
> time afterwards before it fully starts.
>
> Maybe you can put an until on the service_facts to wait until the service
> is actually started.
>
> needs_info
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/ansible/ansible/issues/73215#issuecomment-762499609>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AKK6MHJQHUWZTPRUYVXOKADS2SZ6BANCNFSM4WA3HZJA>
> .
>
",2021-01-19T14:15:39Z
762878374,created by mistake,2021-01-19T14:32:56Z
762879403,"It's a pattern that would be easy to mistakenly change again, so it's waiting on a test. Anyone who has time should feel free to cherry-pick the initial work to keep attribution and open a new PR with a test, since it appears the original author may not be interested in working on it anymore.",2021-01-19T14:34:31Z
762903888,We will need a changelog and tests before we consider merging this. We may also want to bikeshed on the `headers_secret` name.,2021-01-19T15:10:05Z
762910435,Thanks! I tested this and seems to work as expected. We will need some tests for this. There are existing unit tests you could use/modify to make sure that `display.prompt()` is being called with the expected arguments.,2021-01-19T15:19:14Z
762914716,"This will subsume #71091 if merged, so we should close that one at that point.",2021-01-19T15:25:10Z
762914722,"This is happening because `ncurses` is available in the Emacs shell buffer but `ncurses.tigetstr()` is returning `None` which is quite odd. The fix is pretty simple.

```patch
diff --git lib/ansible/plugins/action/pause.py lib/ansible/plugins/action/pause.py
index 88babe61b3..7a149c6621 100644
--- lib/ansible/plugins/action/pause.py
+++ lib/ansible/plugins/action/pause.py
@@ -51,8 +51,9 @@ except ImportError:
     HAS_CURSES = False
 
 if HAS_CURSES:
-    MOVE_TO_BOL = curses.tigetstr('cr')
-    CLEAR_TO_EOL = curses.tigetstr('el')
+    # In case curses.tigetstr() returns None
+    MOVE_TO_BOL = curses.tigetstr('cr') or b'\r'
+    CLEAR_TO_EOL = curses.tigetstr('el') or b'\x1b[K'
 else:
     MOVE_TO_BOL = b'\r'
     CLEAR_TO_EOL = b'\x1b[K'

```

Testing this will most likely required creating a unit test to mock the `curses.tigetstr()` calls.",2021-01-19T15:25:11Z
762920342,"Discussed this in triage. The `type: str` here actually means that what is passed in will be converted to `str`, if possible, otherwise then you'll get an error. Given that, closing per above.",2021-01-19T15:33:04Z
762924739,Closing per above.,2021-01-19T15:39:37Z
762928811,Tests and changelog.,2021-01-19T15:45:28Z
762959796,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-19T16:30:09Z
762959807,"@gituser-ensco: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-19T16:30:10Z
762963338,fyi @samccann @acozine ,2021-01-19T16:35:13Z
762965426,"@silverdr This issue is waiting for your response. Please respond or the issue will be closed.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-19T16:38:26Z
762972648,"Ansible version: 2.9.14
Problematic Component:  Ansible facts
",2021-01-19T16:49:18Z
762994772,I got intrigued a bit and looked into this and it does indeed seem that bash [uses temp files](https://git.savannah.gnu.org/cgit/bash.git/tree/redir.c#n479) for heredocs if the size of the heredoc is larger than `F_SETPIPE_SZ`.,2021-01-19T17:23:06Z
763016267,"Would this be preferable to avoid the repeated constants?

```patch
diff -u pause.py.orig pause.py
--- pause.py.orig	2021-01-19 12:55:35.000000000 -0500
+++ pause.py	2021-01-19 12:56:34.000000000 -0500
@@ -46,12 +46,12 @@
 except ImportError:
     HAS_CURSES = False
 
+MOVE_TO_BOL = b'\r'
+CLEAR_TO_EOL = b'\x1b[K'
 if HAS_CURSES:
-    MOVE_TO_BOL = curses.tigetstr('cr')
-    CLEAR_TO_EOL = curses.tigetstr('el')
-else:
-    MOVE_TO_BOL = b'\r'
-    CLEAR_TO_EOL = b'\x1b[K'
+    # In case curses.tigetstr() returns None
+    MOVE_TO_BOL = curses.tigetstr('cr') or MOVE_TO_BOL
+    CLEAR_TO_EOL = curses.tigetstr('el') or CLEAR_TO_EOL
 
 
 class AnsibleTimeoutExceeded(Exception):
```",2021-01-19T17:57:20Z
763060672,"Just saw this mentioned in core meeting, could be a possible solution?
https://github.com/ansible/ansible/pull/72419
",2021-01-19T19:06:08Z
763085889,"`Missing selinux Python library` indicates that `libselinux-python` is not installed for the python interpreter that is being invoked on that remote host.

On node2, if you ssh in, and run the following, it is effectively what ansible does:

```
/usr/bin/python -c 'import selinux'
```",2021-01-19T19:46:48Z
763096804,"no, this would #58288, thought it might also need that one for 'hostvars'",2021-01-19T20:06:56Z
763097669,closed via #73162,2021-01-19T20:08:37Z
763099548,"> Now this implementation does make the variable composition dependent upon evaluation order, but as python preserves order of dictionary keys, there shouldn't be any issues as long as the user defines them in the correct order.

That feature is python version dependant",2021-01-19T20:12:08Z
763102122,"You're right, 3.7. I could have sworn that feature was older, like 3.0, but it seems not :-(

I will investigate an alternate solution.",2021-01-19T20:15:15Z
763108217,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-19T20:21:36Z
763113789,Duplicate of https://github.com/ansible/ansible/issues/73228,2021-01-19T20:30:24Z
763152174,"I can not reproduce this with currently supported versions of Ansible.
```
TASK [search for pools] **********************************************************************************************************************************************************************************************************************
ok: [localhost] => (item={'key': 'Testpool', 'value': {'member': [{'address': 'host1', 'port': 23101}, {'address': 'host2', 'port': 23101}]}}) => {""ansible_facts"": {""matched_pool"": ""Testpool""}, ""ansible_loop_var"": ""search_pool_item"", ""changed"": false, ""search_pool_item"": {""key"": ""Testpool"", ""value"": {""member"": [{""address"": ""host1"", ""port"": 23101}, {""address"": ""host2"", ""port"": 23101}]}}}
```

If you are still having problems, feel free to open a new issue with a complete reproducer.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-19T21:27:10Z
763159768,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-19T21:42:16Z
763159777,"@Jarshvor: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-19T21:42:17Z
763162119,"I do not get any output from /usr/bin/python -c 'import selinux'

This problem seemed to clear itself up on CentOS7.9 after rerunning the same playbook (to install the libselinux-python pkg) about half a dozen times. 
I have the same problem on a set of RedHat6.7 nodes. Rerunning the playbook for them does not seem to make any difference. Below is the kernel/distribution/selinux facts for the RHEL6.7 nodes...
 ""crashkernel"": ""128M""
 ""ansible_kernel"": ""2.6.32-573.el6.x86_64""
 ""ansible_kernel_version"": ""#1 SMP Wed Jul 1 18:23:37 EDT 2015""
 ""crashkernel"": ""128M""
 ""ansible_selinux"": {""config_mode"": ""enforcing""
 ""ansible_selinux_python_present"": true
[root@ansi-prod-svr production]# sed -z 's/,/\n/g' /tmp/facts/seismic-an11.ensco.win | egrep 'kernel|distribution|selinux'
 ""crashkernel"": ""128M""
 ""ansible_distribution"": ""RedHat""
 ""ansible_distribution_file_parsed"": true
 ""ansible_distribution_file_path"": ""/etc/redhat-release""
 ""ansible_distribution_file_search_string"": ""Red Hat""
 ""ansible_distribution_file_variety"": ""RedHat""
 ""ansible_distribution_major_version"": ""6""
 ""ansible_distribution_release"": ""Santiago""
 ""ansible_distribution_version"": ""6.7""
 ""ansible_kernel"": ""2.6.32-573.el6.x86_64""
 ""ansible_kernel_version"": ""#1 SMP Wed Jul 1 18:23:37 EDT 2015""
 ""crashkernel"": ""128M""
 ""ansible_selinux"": {""config_mode"": ""enforcing""
 ""ansible_selinux_python_present"": true


NOTE: I realize RHEL|CENTOS6 is fully EOL now. I am just putting this information in the issue for completeness. The RHEL6 systems we have cannot be replaced right away so I still have to manage them until they are replaced.",2021-01-19T21:46:34Z
763163546,"That last output shows that libselinux-python is present, and selinux is enforcing.  What is the problem with the EL6 nodes?",2021-01-19T21:49:19Z
763164102,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with 1 error:
```
docs/docsite/core_rst/cli:0:0: File was not added to sdist
```
<!-- job_id: 4436 -->
<!-- job_id: abf3bc1b0b6ec7204c384b358461581b -->
<!-- job_id: None -->
The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Error
make: *** No rule to make target 'base_singlehtmldocs'.  Stop.
```
<!-- job_id: 4436 -->
<!-- job_id: 009302ceb6dba1de1a038a052a1e2c4f -->
<!-- job_id: None -->
The test `ansible-test sanity --test symlinks` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/symlinks.html)] failed with 1 error:
```
docs/docsite/core_rst/cli:0:0: broken symlinks are not allowed
```
<!-- job_id: 4436 -->
<!-- job_id: 9f54382cd42ecc2b4d445360d598af1d -->
<!-- job_id: None -->
The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 1 error:
```
docs/docsite/core_rst/installation_guide/intro_installation.rst:26:0: Block quote ends without a blank line; unexpected unindent.
```
<!-- job_id: 4436 -->
<!-- job_id: 52dbd4c205ca10a3c655d796cd5ab68c -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-19T21:50:22Z
763164472,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 1 error:
```
docs/docsite/rst/collections/ansible/builtin/expect_module.rst:198:0: warning: Inline literal start-string without end-string.
```
<!-- job_id: 4435 -->
<!-- job_id: b4360131025f7751fb003475e2eb97a7 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-19T21:51:04Z
763167414,"I have a playbook that does the following tasks...
```
# task1: creates a file in /etc/sudoers.d from a template and sets the permissions
 - name: create file in /etc/sudoers.d
    ansible.builtin.template:
      src: /etc/ansible/templates/etc/sudoers.d.ist-sudo-limited
      dest: /etc/sudoers.d/ist-sudo-limited
      owner: root
      group: root
      mode: 0440
    register: file_create_results

# task2: does setype: etc_t   when ansible_selinux.config_mode != ""disabled""
  - name: set selinux context
    sefcontext:
      target: ""{{ sudoersfile }}""
      setype: etc_t
      state: present
    register: setype_results
    when:  ansible_selinux.config_mode != ""disabled""
```
.........................
The above tasks are working on CentOS(RHEL)7, 8 & Ubuntu 18.04
They do not work for CentOS(RHEL)6

Here is the debug output from the file creation task....
```
    ""changed"": false,
    ""msg"": ""The file_create_results output is: {'failed': True, 'msg': \""Failed to get information on remote file (/etc/sudoers.d/ist-sudo-limited): OpenSSH_8.0p1, OpenSSL 1.1.1g FIPS  21 Apr 2020\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\\r\\ndebug2: checking match for 'final all' host node3 originally node3\\r\\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: not matched 'final'\\r\\ndebug2: match not found\\r\\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1 (parse only)\\r\\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\\r\\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\\r\\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\\r\\ndebug1: configuration requests final Match pass\\r\\ndebug1: re-parsing configuration\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\\r\\ndebug2: checking match for 'final all' host node3 originally node3\\r\\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: matched 'final'\\r\\ndebug2: match found\\r\\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1\\r\\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\\r\\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\\r\\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 1033254\\r\\ndebug3: mux_client_request_session: session request sent\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exit status from master 1\\r\\nShared connection to node3 closed.\\r\\n\""}""
```",2021-01-19T21:56:53Z
763170218,"> mode=preserve would be a great help.
> 
> It's far easier to set the correct permissions when creating the archive (zero effort if it is created on a unix filesystem) - and also much more fine-grained control of which files get which permission.
> 
> e.g Quite often, only some of the files in the archive require execute permission - and not possible afaik to apply permissions selectively when unarchiving.
> 
> Consequently, it requires a seperate task _after_ unarchiving.
> Moreover, it isn't very fast setting permissions using file module - as even with loop or with_glob, it tends to modify 1 file at a time. If there are many files to modify, it can take longer than the download and unarchive!
> 
> A preserve mode would eliminate all need for post-unarchive tasks
> 
> Right now, I either have to deal with slow post task - or complexity of using shell module to do what unarchive does

Actually, it appears that ""preserve"" is the default behaviour if mode isn't specified.
I ended up finding this issue because execute permissions were not being maintained - but it turns out I had a faulty tar file (duplicate entries).

Once the tar file was fixed, unarchive seems to preserve the permissions unless directed otherwise.


",2021-01-19T22:02:28Z
763171085,"The error `Failed to get information on remote file` happens when ansible cannot stat a file.

That appears to be happening on the `template` task, before the task does anything else.  The `stat` is one of the very first things that happens.",2021-01-19T22:04:21Z
763172193,"that makes sense...when using template files, does the ansible host first copy the file to a tmp location on the node...then copy from the tmp location to the target destination? I am trying to understand how to troubleshoot this on the specific hosts that are failing. This same playbook works properly on over 30 50 hosts and fails only on about a dozen.",2021-01-19T22:06:30Z
763174064,This will also require tests and a changelog entry.,2021-01-19T22:10:34Z
763181643,"Ansible will copy the file to a temp location on the node, and then move the file to the indicated dest.  But it seems like the file exists, but cannot be stat by the remote user.",2021-01-19T22:26:38Z
763187600,"Thanks....sometimes just need someone else prodding me. The issue is the ansible user running the playbooks does not have sudo on the set of RHEL6 hosts it is failing on. Simple issues like that are the easiest thing to overlook.

Please go ahead and close this issue as keyboard driver is failing. :)",2021-01-19T22:36:10Z
763188969,Closing per above.,2021-01-19T22:39:21Z
763198297,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with 2 errors:
```
docs/docsite/core_rst/installation_guide/index.rst:0:0: File was not added to sdist
docs/docsite/core_rst/installation_guide/intro_configuration.rst:0:0: File was not added to sdist
```
<!-- job_id: 4440 -->
<!-- job_id: 3314adef377c33cf5fe825b75534b100 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-19T23:02:10Z
763261304,"> Thanks! I tested this and seems to work as expected. We will need some tests for this. There are existing unit tests you could use/modify to make sure that `display.prompt()` is being called with the expected arguments.

Thanks, I've added a unit test.",2021-01-20T01:29:14Z
763279642,"> Actually, it appears that ""preserve"" is the default behaviour if mode isn't specified.

Do user/group ownerships also left intact?",2021-01-20T02:14:20Z
763310276,"Perhaps an easier workaround?

```
command:
  cmd: dnf config-manager --add-repo (url)
  warn: false
args:
  creates: /etc/yum.repos.d/(something).repo
```
",2021-01-20T03:48:29Z
763318433,cc @relrod ,2021-01-20T04:15:30Z
763318531,cc @relrod ,2021-01-20T04:15:45Z
763318769,cc @relrod ,2021-01-20T04:16:25Z
763318846,cc @relrod ,2021-01-20T04:16:38Z
763348655,"@Akasurde aware, these will go into the next rc1.",2021-01-20T05:41:05Z
763349109,@relrod Thanks for the information 👍🏼 ,2021-01-20T05:42:12Z
763354419,!component =docs/docsite/rst/user_guide/playbooks_filters.rst,2021-01-20T05:54:49Z
763354540,resolved_by_pr #73302 ,2021-01-20T05:55:06Z
763354929,"Files identified in the description:
* [`docs/docsite/rst/user_guide/playbooks_filters.rst`](https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/user_guide/playbooks_filters.rst)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T05:55:53Z
763355421,@Jarshvor Could you please check if PR #73302 and let me know if it works for you? Thanks.,2021-01-20T05:56:54Z
763409094,I think the no_log option in the playbook header results in the whole task to be not logged. It is a problem for us as we miss many logs. My request is to have only the token in the request header to be obliterated.,2021-01-20T07:51:54Z
763416288,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T08:06:05Z
763416296,"@FrelDX: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- issue type
- component name
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-20T08:06:06Z
763512382,"Files identified in the description:
* `lib/ansible/modules/storage/netapp/na_ontap_service_processor_network.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T10:41:17Z
763512385,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/storage/netapp/na_ontap_service_processor_network.py -> https://galaxy.ansible.com/netapp/ontap

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-20T10:41:18Z
763545238,"Thanks for adding the relevant component @Akasurde. I missed that part.

I guess, for me, the note is better than before. However, if you're going to keep that wording, I would include the sentence about jmespath installation in the beginning. Otherwise we split talking about the syntax in the first and last sentences (chucking that reminder about the dependency in the middle).

A better alternative in my opinion would be:

note:: You must manually install **jmespath** dependency on Ansible controller before using this filter.
This filter is built upon **jmespath**, and you can use the same syntax. For examples, see `jmespath examples <http://jmespath.org/examples.html>`",2021-01-20T11:39:21Z
763547046,"> I got intrigued a bit and looked into this and it does indeed seem that bash [uses temp files](https://git.savannah.gnu.org/cgit/bash.git/tree/redir.c#n479) for heredocs if the size of the heredoc is larger than `F_SETPIPE_SZ`.

Thank you very much for verifying that :)",2021-01-20T11:42:41Z
763573931,"I don't know if the cause is the same but I'm seeing a similar issue with loops wrapped into false conditionals (which should be just ignored), here is an example which fails on Ansible 2.7, 2.8 and 2.10 (python3):
```
$ cat test.j2

{% if false %}
{% for arg in args if false %}
text
{% endfor %}
{% endif %}
```
```
$ cat play.yml

- hosts: localhost
  gather_facts: no
  vars:
    args:
    - ""{{ myvar }}""
  tasks:
  - template:
      src: test.j2
      dest: test
```
```
$ ansible-playbook play.yml

fatal: [localhost]: FAILED! => {""changed"": false, ""msg"": ""AnsibleUndefinedVariable: ['{{ myvar }}']: 'myvar' is undefined""}
```",2021-01-20T12:29:38Z
763590228,recheck,2021-01-20T12:59:54Z
763633448,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T14:15:30Z
763633455,"@craph: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-20T14:15:31Z
763638615,"Files identified in the description:
* [`lib/ansible/modules/apt.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/apt.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T14:23:43Z
763647774,@sivel I was wondering if this feature was going to make it into the 2.11 release?,2021-01-20T14:35:20Z
763688838,"This is a result of a note that is described in the synopsis of the `ini` inventory format as described at https://docs.ansible.com/ansible/latest/collections/ansible/builtin/ini_inventory.html

> When declared inline with the host, INI values are processed by Python’s ast.literal_eval function (https://docs.python.org/2/library/ast.html#ast.literal_eval) and interpreted as Python literal structures (strings, numbers, tuples, lists, dicts, booleans, None). Host lines accept multiple key=value parameters per line. Therefore they need a way to indicate that a space is part of a value rather than a separator

To achieve your goal, you can either move that `Time` variable to `host_vars/myserver.yml` and define it in YAML, or define it in the `ini` format in a way that `ast.literal_eval` will maintain the string formatting:

```
myserver Time=""'05.30'""
```

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-20T15:05:57Z
763700214,Closing in favor of https://github.com/ansible/ansible/pull/73159.,2021-01-20T15:13:58Z
763700912,Closing in favor of https://github.com/ansible/ansible/pull/73159.,2021-01-20T15:14:57Z
763703283,Closing in favor of https://github.com/ansible/ansible/pull/72947.,2021-01-20T15:18:19Z
763707490,"fixed via #45499 and #48883 
included in 2.8 and newer versions.",2021-01-20T15:24:29Z
763708802,"Note: the issue with this PR as is is that it doesn't amend the `changed` in the overall task result after the loop ended, just the per iteration results.",2021-01-20T15:26:35Z
763771507,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T16:38:34Z
763777188,closing via alternate #69244,2021-01-20T16:46:43Z
763777432,"Files identified in the description:
* [`lib/ansible/plugins/become/sudo.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/become/sudo.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-20T16:47:07Z
763833946,Thank you @luto! ,2021-01-20T18:09:56Z
763838483,Thanks for the quick merge!,2021-01-20T18:17:41Z
763839949,I hit this issue running Ansible from Microsoft Azure DevOps' Ansible module. Thanks so much for the patch!,2021-01-20T18:20:09Z
763840574,"I hit this issue running Ansible from Microsoft Azure DevOps' Ansible module. Thanks so much for the patch!

(AzDevOps' Ansible module interprets any output to stderr as a failure by default.)",2021-01-20T18:21:17Z
763853064,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/playbook/play.py:299:5: E303: too many blank lines (2)
```
<!-- job_id: 4493 -->
<!-- job_id: 9c78dcf9c3fd7711bbfbd6a5dfde73ce -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-20T18:42:26Z
763866506,@mattclay can we get the `tower_blocker` label put on this issue?,2021-01-20T19:05:33Z
763867674,rebuild_merge,2021-01-20T19:07:34Z
763871754,TODO: add a change fragment,2021-01-20T19:15:17Z
763873339,You're welcome @luto!,2021-01-20T19:18:15Z
763903091,"This is largely already resolved.

In https://github.com/ansible/ansible/pull/70722 we fixed the `unsafe_writes` fallback, so that the exception you mention no longer happens.

This would however require you to add `unsafe_writes: true` to all tasks where this could happen.

In https://github.com/ansible/ansible/pull/73282 we are adding support for the `ANSIBLE_UNSAFE_WRITES` env var to be set on targets, that will auto use `unsafe_writes` for all modules that implement it.",2021-01-20T20:11:27Z
763938619,"I think that it is considered an unacceptable workaround for tower/awx users to have to do this on all their content that used to work

> This would however require you to add unsafe_writes: true to all tasks where this could happen.

we're concerned that setting this globally is too broad

> In #73282 we are adding support for the ANSIBLE_UNSAFE_WRITES env var to be set on targets, that will auto use unsafe_writes for all modules that implement it.

and that we need a way that does not affect EVERY host, just actions locally in the container",2021-01-20T20:58:12Z
763942104,"You would likely want this to be dictated by the target host.  In the example of localhost, and targeting localhost, you would do something like:

```
$ ANSIBLE_UNSAFE_WRITES=1 ansible-playbook ...
```

This would only impact localhost, and not affect all hosts.  It's not a config entry, it's a fallback that modules will use for the `unsafe_writes` module argument, so it has to be set on the target.  There are several ways to do it, such as the `environment:` keyword also, and setting `0` or `1` based on whether or not the host needs it.
",2021-01-20T21:00:23Z
763948049,"So in an execution environment, an `ENV ANSIBLE_UNSAFE_WRITES=1` could be set in the `Containerfile`/`Dockerfile` which would be used for all file modules supporting `unsafe_writes` that target `localhost` only.",2021-01-20T21:09:38Z
763953398,"| Hypothetically, the module could detect what volume the destination is in, and use a tmp stage file in that volume.

This is already the case, the file is copied to tmp location in same volume if the initial `rename` didn't work, `unsafe_writes` ONLY comes into play if all other attempts to atomically update the file failed.",2021-01-20T21:19:28Z
763984579,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 1 error:
```
lib/ansible/playbook/block.py:217:13: E722: do not use bare 'except'
```
<!-- job_id: 4513 -->
<!-- job_id: 8629df12a5b76ecd2202ee9fe55ff5de -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-20T22:13:46Z
764027104,Hopefully FreeBSD 11.4 will work reliably now that @eqrx switched our instances over from `c4.large` to `c5.large`.,2021-01-20T23:34:09Z
764195881,Sorry for the trouble. Re-posted the issue on the collection repository -> https://github.com/ansible-collections/netapp/issues/80,2021-01-21T02:47:08Z
764235463,If the apt or yum repo could not work. the client will hang too.,2021-01-21T04:08:02Z
764384086,"I just ran across this and decided I'd try to document what I found to hopefully help out the next and provide direction for this and the other issues that have been created around the execution order of this module. 

It appears this is a failure due to some operations performing a `module.json_exit` without checking if there is more work to be completed. I've believe these are the follow states.

  * if the task/module uses `deb`   then the module will exit before checking to run autoclean or autoremove 
  * `install`, `remove`, `upgrade` actions will autoremove if defined in the task and will execute as part of the `apt-get` commands but will will not autoclean before it exits the module.
  * `update_cache` will check if there is a package, upgrade or deb parameter provide and will not exit, otherwise will exit without autoclean or autoremove being ran.
 * `autoclean` will block `autoremove` from running due to it being executed first in the if block, and the `cleanup` function call `json_exit` when complete

I believe the quickest resolution to help with this is to update the documentation defining that. Possibility even adding some error checking in the beginning to help the user.

  * `autoclean` must be called by itself to be completed. 
  * `autoremove` can only be used by itself or with name or upgrade parameters.

If we wanted to fix this so that there could be compound actions within the module, then the best course of action would be to mimic the way update_cache works. Each action not call `json_exit` when completed and instead log the results of its actions (similar to successful install and update_cache work). At the end of the module check for each action to see if it's been completed and provide the data to `json_exit` at that point.",2021-01-21T05:31:09Z
764398028,"Files identified in the description:
* [`lib/ansible/playbook/task.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/task.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T05:52:16Z
764417443,"This is still an issue. Running into this testing against CentOS 8 on docker through molecule. 
Would love to use this, but I have to add non-idempotent tasks that formats an absolute path just for this module to work.

If I use the path provided by stat/file/copy/get_url returns, this module just keeps throwing this error if the tarball isn't at root. It really doesn't like extracting a .tar.gz if it lives anywhere off of / and not using an absolute path, for whatever reason.",2021-01-21T06:38:21Z
764487612,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/community.network.

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-21T09:02:26Z
764491152,Thanks for your fast response!,2021-01-21T09:08:40Z
764498532,cc @srbharadwaj,2021-01-21T09:21:32Z
764508712,rebuild_merge,2021-01-21T09:38:36Z
764513610,/azp run,2021-01-21T09:47:22Z
764513718,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-21T09:47:33Z
764522580,"Files identified in the description:
* [`lib/ansible/modules/replace.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/replace.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T10:02:54Z
764526507,"@relrod @sivel I think this is already mentioned [Defining variables at runtime](https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#defining-variables-at-runtime).

So can we close this issue?",2021-01-21T10:09:28Z
764530905,"This is not a bug. What happens is that 
```yaml
replace: '\1{{ bbb_presentation_max_size }}\2'
```

is templated to
```yaml
replace: '\1100m\2'
```

which means that it is effectively using back reference of `\1100`. You need to somehow separate the back reference and the subsequent number, for example like so:

```yaml
- hosts: localhost
  gather_facts: no
  tasks:
    - name: Set max size of presentation uploads
      replace:
        path: 73316.txt
        regexp: '^(\s+# Allow 30M uploaded presentation document.\n\s+client_max_body_size\s*)\w+(;)$'
        replace: '\g<1>{{ bbb_presentation_max_size }}\2'
      vars:
        bbb_presentation_max_size: 100m
```

User questions are better suited for either the mailing list or the IRC channel:

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-21T10:17:13Z
764578824,"Files identified in the description:
* [`lib/ansible/modules/ping.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/ping.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T11:32:13Z
764625932,"@mkrizek Thank you very much for your quick support. Since, at least as I see it, this behavior is far from obvious I would find it appropriate to mention it in the docs.",2021-01-21T12:58:43Z
764658646,"> 
> 
> is this bug report abandoned? I'm still seeing this problem on Ansible 2.9.9 and none of the suggested work-arounds have any effect.

If using a Bastion-Host, have you tried this
https://github.com/ansible/ansible/issues/49254#issuecomment-613121141",2021-01-21T13:55:20Z
764673546,"@bcoca I updated the test, could you please take a look?",2021-01-21T14:19:22Z
764708054,This is on my list. I haven't forgotten about it but am just working on other things at the moment.,2021-01-21T15:08:05Z
764710938,"[Update]
After I remove the password from my private key, everything starts to work fine
I recheck and with password on my private key Ansible prompt few times to enter the password and then fails

So, it looks like nothing to do with 'ping' module, but more if the password is set on ssh private key",2021-01-21T15:12:15Z
764719903,"@jikamens Yup, that looks good.",2021-01-21T15:25:05Z
764731674,"looks like it, thanks!",2021-01-21T15:41:53Z
764766739,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T16:24:44Z
764766748,"@alper: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- issue type
- component name
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-21T16:24:45Z
764785307,dupe of #72776,2021-01-21T16:49:43Z
764809913,"This looks like a failure to update the apt cache. Cache update retrying was added in #57266. Please try with Ansible 2.10 and see if that resolves the issue.

needs_info",2021-01-21T17:24:55Z
764814285,"The distribution information looks correct in my testing.

```
> ansible --version
ansible 2.9.9
  config file = /Users/sdoran/Projects/Vagrant/Ansible Lab/ansible.cfg
  configured module search path = ['/Users/sdoran/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /Users/sdoran/Source/ansible/lib/ansible
  executable location = /Users/sdoran/Source/ansible/bin/ansible
  python version = 3.9.0 (default, Oct 14 2020, 11:40:34) [Clang 12.0.0 (clang-1200.0.32.2)]

> ansible -c community.docker.docker -i 51654cc2ff58, -m setup -a 'filter=ansible_distribution*' all
51654cc2ff58 | SUCCESS => {
    ""ansible_facts"": {
        ""ansible_distribution"": ""Debian"",
        ""ansible_distribution_file_parsed"": true,
        ""ansible_distribution_file_path"": ""/etc/os-release"",
        ""ansible_distribution_file_variety"": ""Debian"",
        ""ansible_distribution_major_version"": ""9"",
        ""ansible_distribution_release"": ""stretch"",
        ""ansible_distribution_version"": ""9.12"",
        ""discovered_interpreter_python"": ""/usr/bin/python""
    },
    ""changed"": false
}

```

Test playbook:

```yaml
- hosts: all
  connection: community.docker.docker
  gather_facts: yes
  become: yes

  tasks:
    - name: Add an Apt signing key, uses whichever key is at the URL
      apt_key:
        url: https://download.docker.com/linux/debian/gpg
        state: present

    - name: Add Docker repository
      apt_repository:
        repo: ""deb [arch=amd64] https://download.docker.com/linux/{{ ansible_facts.distribution|lower }} {{ ansible_facts.distribution_release|lower }} stable""
        state: present
        update_cache: true
```

Partial output:

```
TASK [Add Docker repository] **************************************************************************************
task path: /Users/sdoran/Projects/Vagrant/Ansible Lab/test-container.yml:15
<51654cc2ff58> ESTABLISH DOCKER CONNECTION FOR USER: root
<51654cc2ff58> EXEC ['/usr/local/bin/docker', b'exec', b'-i', '51654cc2ff58', '/bin/sh', '-c', ""/bin/sh -c 'echo ~ && sleep 0'""]
<51654cc2ff58> EXEC ['/usr/local/bin/docker', b'exec', b'-i', '51654cc2ff58', '/bin/sh', '-c', '/bin/sh -c \'( umask 77 && mkdir -p ""` echo /root/.ansible/tmp `""&& mkdir /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549 && echo ansible-tmp-1611249180.098366-78235-248785763249549=""` echo /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549 `"" ) && sleep 0\'']
Using module file /Users/sdoran/Source/ansible/lib/ansible/modules/packaging/os/apt_repository.py
<51654cc2ff58> PUT /Users/sdoran/.ansible/tmp/ansible-local-78048ikzbt55k/tmphbq52cjk TO /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549/AnsiballZ_apt_repository.py
<51654cc2ff58> EXEC ['/usr/local/bin/docker', b'exec', b'-i', '51654cc2ff58', '/bin/sh', '-c', ""/bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549/ /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549/AnsiballZ_apt_repository.py && sleep 0'""]
<51654cc2ff58> EXEC ['/usr/local/bin/docker', b'exec', b'-i', '51654cc2ff58', '/bin/sh', '-c', '/bin/sh -c \'sudo -H -S -n  -u root /bin/sh -c \'""\'""\'echo BECOME-SUCCESS-zxrezdqlwuvtxthhwfyxetydxwkjcflc ; /usr/bin/python /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549/AnsiballZ_apt_repository.py\'""\'""\' && sleep 0\'']
<51654cc2ff58> EXEC ['/usr/local/bin/docker', b'exec', b'-i', '51654cc2ff58', '/bin/sh', '-c', ""/bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1611249180.098366-78235-248785763249549/ > /dev/null 2>&1 && sleep 0'""]
changed: [51654cc2ff58] => {
    ""changed"": true,
    ""diff"": {},
    ""invocation"": {
        ""module_args"": {
            ""codename"": null,
            ""filename"": null,
            ""install_python_apt"": true,
            ""mode"": null,
            ""repo"": ""deb [arch=amd64] https://download.docker.com/linux/debian stretch stable"",
            ""state"": ""present"",
            ""update_cache"": true,
            ""validate_certs"": true
        }
    },
    ""repo"": ""deb [arch=amd64] https://download.docker.com/linux/debian stretch stable"",
    ""state"": ""present""
}
```

On the container:

```
root@51654cc2ff58:/# cat /etc/apt/sources.list.d/download_docker_com_linux_debian.list
deb [arch=amd64] https://download.docker.com/linux/debian stretch stable
```",2021-01-21T17:31:45Z
764823116,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
make: *** [changelog] Error 5
```
<!-- job_id: 4585 -->
<!-- job_id: f3dac575687dfb30cbad9184636b0547 -->
<!-- job_id: None -->
The test `ansible-test sanity --test changelog` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/changelog.html)] failed with 1 error:
```
changelogs/fragments/72591-ansible-galaxy-collection-resolvelib.yaml:0:0: yaml parsing error
```
<!-- job_id: 4585 -->
<!-- job_id: f9b51ac182370a742a58e3e7caf9f40d -->
<!-- job_id: None -->
The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 2 errors:
```
changelogs/fragments/72591-ansible-galaxy-collection-resolvelib.yaml:18:1: error: syntax error: expected '<document start>', but found '<block mapping start>' (syntax)
changelogs/fragments/72591-ansible-galaxy-collection-resolvelib.yaml:18:1: unparsable-with-libyaml: None - did not find expected <document start>
```
<!-- job_id: 4585 -->
<!-- job_id: c5316d294fb1cc98caacd9c4db371aeb -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-21T17:45:49Z
764860805,"@mattclay 

> I'd like to see the addition of mypy as a sanity test done in a separate PR, so we can focus on the galaxy changes first.

No problem. I just needed it here during development. Here you go: https://github.com/ansible/ansible/pull/73319.

I think I've addressed all your requests now.",2021-01-21T18:50:07Z
764862743,"Files identified in the description:
* `lib/ansible/modules/files/synchronize.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T18:53:37Z
764862748,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/files/synchronize.py -> https://galaxy.ansible.com/ansible/posix

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-21T18:53:38Z
764867971,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-21T19:02:32Z
764872628,"We should probably document this in one place and share it since it applies to ansible-playbook, ansible-console, etc.",2021-01-21T19:11:11Z
764873667,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

The `yum` module has an `update_cache` option that might resolve this for you. If you have further questions, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-21T19:13:03Z
764877169,"The test `ansible-test sanity --test mypy` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/mypy.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/mypy.py"" returned exit status 3.
>>> Standard Error
Results of type checking with mypy against 3.9 Python (return code 1):
Found 2 errors in 1 file (checked 3 source files)
Results of type checking with mypy against 3.6 Python (return code 1):
Found 2 errors in 1 file (checked 3 source files)
Results of type checking with mypy against 2.7 Python (return code 1):
Found 2 errors in 1 file (checked 3 source files)
>>> Standard Output
lib/ansible/galaxy/collection/__init__.py:33: error: Cannot find implementation or library stub for module named 'Queue'  [import]
lib/ansible/galaxy/collection/__init__.py:33: note: See https://mypy.readthedocs.io/en/latest/running_mypy.html#missing-imports
lib/ansible/galaxy/collection/__init__.py:33: error: Name 'queue' already defined (by an import)  [no-redef]
lib/ansible/galaxy/collection/__init__.py:33: error: Cannot find implementation or library stub for module named 'Queue'  [import]
lib/ansible/galaxy/collection/__init__.py:33: note: See https://mypy.readthedocs.io/en/latest/running_mypy.html#missing-imports
lib/ansible/galaxy/collection/__init__.py:33: error: Name 'queue' already defined (by an import)  [no-redef]
lib/ansible/galaxy/collection/__init__.py:31: error: Cannot find implementation or library stub for module named 'queue'  [import]
lib/ansible/galaxy/collection/__init__.py:31: note: See https://mypy.readthedocs.io/en/latest/running_mypy.html#missing-imports
lib/ansible/galaxy/collection/__init__.py:33: error: Name 'queue' already defined (possibly by an import)  [no-redef]
```
<!-- job_id: 4596 -->
<!-- job_id: 356752f6976c0108b3e991fcf28cfb6d -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-21T19:19:10Z
764877184,"This is working as expected. Not all operations are idempotent. You could use the cache_valid_time option to control when it's updated.

If you want to contribute this as a feature though, it isn't something we'd oppose.",2021-01-21T19:19:12Z
764878748,"This is working as expected. Ansible does not support MFA.

List Information
================

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-21T19:22:11Z
764882572,"> 
> 
> This is working as expected. Not all operations are idempotent. You could use the cache_valid_time option to control when it's updated.
> 
> If you want to contribute this as a feature though, it isn't something we'd oppose.

In my opinion it is not working as expected because documentation doesn't mention it is not idempotent as in other modules. So it is actually a bug or not well documented",2021-01-21T19:27:58Z
764884067,"You should add they password-protected key to the ssh-agent (or use tower).

List Information
================

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-21T19:30:25Z
764886935,"We don't have plans to add this, but there are a few ways you could do this already (such as via a custom connection plugin or loading the file and using it to populate the `environment` keyword).",2021-01-21T19:35:08Z
764891735,We think a simpler approach is to partition the playbook instead of handling this logically. We've had similar discussions for roles and rejected the feature. You could also handle this via your execution environment (such as via tower jobs or a shell script). ,2021-01-21T19:43:36Z
764893291,Can you provide a complete example of how to trigger this? Thanks.,2021-01-21T19:46:16Z
764896182,"@s-hertel Partitioning the playbook does not really work due to the  amount of sub-playbooks and roles within.

And yeah, we currently have a couple shell scripts calling ansible with different playbooks with tags sometimes.
I wished I could integrate this properly in a single playbook for a nice integrated ansible experience. And this is the only roadblock I'm hitting.
For roles I can agree with the  arguments that you should split them, that's a scope where this is viably doable (you can have include_role with a single file then).

I'd like to see this re-discussed for the scope of whole playbooks (which themselves may  import other playbooks).",2021-01-21T19:51:15Z
764910134,"A fix has been mentioned for 2.9.11, but it appears this is still open.  Is there a fix still expected for this?",2021-01-21T20:16:14Z
764917756,Nobody would mind against a [`draft PR`](https://github.com/ansible/ansible/pulls?q=is%3Apr+is%3Aopen+is%3Adraft). Everybody could be hit be a bus with COVID patients.,2021-01-21T20:29:58Z
764919672,OK. I can sympathize with this and I've googled around to see how people have gone about this and I can't say I was particularly pleased with how that looks but I'll try.,2021-01-21T20:33:43Z
764920398,"> Is there a fix still expected for this?

Yes, however a lot of testing needs to be done on any solution we come up with, to ensure whatever change we make, does not cause other issues.  The fix mentioned in this issue has been rules out as it doesn't fully address the issues.

Although this issue does affect some collections, there are workarounds collection authors can make to not run into this issue (See all of the commits for other repos above)

Once we understand the best way to resolve the issue from our side, we'll submit a fix.",2021-01-21T20:35:17Z
764937626,"@bcoca and @sivel (and anyone running into this) - following #ansible-meeting this morning, you suggested using set_fact to create the variable I need in ansible_connection.  I tried that, but I cannot set a fact **for localhost** using set_fact:

I tried:
```
  - set_fact:
      use_ansible_connection: ""{{ (whoami_control_machine_output.stdout == 'awx') | ternary('ssh','local') }}""
  - set_fact:
      use_ansible_connection: ""{{ (whoami_control_machine_output.stdout == 'awx') | ternary('ssh','local') }}""
    delegate_to: localhost
```

To examine hostvars['localhost'], I used:
```
debug: var=hostvars['localhost']['use_ansible_connection']
```
but that yields ""VARIABLE IS NOT DEFINED!"" in both cases.

However, setting the variable with add_host works:
```
  - add_host:
      name: 'localhost'
      use_ansible_connection: ""{{ (whoami_control_machine_output.stdout == 'awx') | ternary('ssh','local') }}""
```

and then I can use:
```
      ansible_connection: ""{{ hostvars['localhost']['use_ansible_connection'] }}""
```

This works in 2.10.  It's a clunky workaround, though, so I'm still holding out hope for bcoca's PR :-)

Just adding some more info here in case anyone else is following.
",2021-01-21T20:58:05Z
764942641,"If I install this branch in an empty docker container and run
```
ansible-galaxy collection install community.network
ansible-galaxy collection verify community.network
```
the second fails with
```
ERROR! Error when getting collection version metadata for community.network:* from default (https://galaxy.ansible.com/api/) (HTTP Code: 404, Message: Not found. Code: not_found)
```",2021-01-21T21:08:11Z
764943291,"When running `ansible-galaxy collection list` from this branch on my system (where some collections are checked out repos, not all having a version in galaxy.yml), it crashes:
```python-traceback
# /path/to/ansible_collections
Collection                              Version  
--------------------------------------- ---------
amazon.aws                              1.3.0    
ERROR! Unexpected Exception, this is probably a bug: unsupported format string passed to NoneType.__format__
the full traceback was:

Traceback (most recent call last):
  File ""/path/to/ansible/bin/ansible-galaxy"", line 135, in <module>
    exit_code = cli.run()
  File ""/path/to/ansible/lib/ansible/cli/galaxy.py"", line 542, in run
    context.CLIARGS['func']()
  File ""/path/to/ansible/lib/ansible/cli/galaxy.py"", line 1308, in execute_list
    self.execute_list_collection()
  File ""/path/to/ansible/lib/ansible/cli/galaxy.py"", line 74, in method_wrapper
    return wrapped_method(*args, **kwargs)
  File ""/path/to/ansible/lib/ansible/cli/galaxy.py"", line 1452, in execute_list_collection
    _display_collection(collection, fqcn_width, version_width)
  File ""/path/to/ansible/lib/ansible/cli/galaxy.py"", line 101, in _display_collection
    display.display('{fqcn:{cwidth}} {version:{vwidth}}'.format(
TypeError: unsupported format string passed to NoneType.__format__
```",2021-01-21T21:09:29Z
764969034,see `delegate_facts`: https://docs.ansible.com/ansible/latest/user_guide/playbooks_delegation.html#delegating-facts,2021-01-21T22:00:55Z
764970404,"@samccann This PR was evaluated as a potentially problematic PR for the following reasons:
* More than 50 changed files.

Such PR can only be merged by human. Contact a Core team member to review this PR on IRC: `#ansible-devel` on irc.freenode.net

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: bad_pr --->",2021-01-21T22:03:43Z
765028337,@felixfontein Woah! That's unexpected. I guess we need more integration tests. Thanks for reporting! Is that under Python 2?,2021-01-22T00:26:13Z
765030022,"Fix for the first one would be
```diff
diff --git a/lib/ansible/galaxy/collection/__init__.py b/lib/ansible/galaxy/collection/__init__.py
index 641e88e1d5a..21e09503fdf 100644
--- a/lib/ansible/galaxy/collection/__init__.py
+++ b/lib/ansible/galaxy/collection/__init__.py
@@ -623,7 +623,7 @@ def verify_collections(
                     raise AnsibleError(message='Collection %s is not installed in any of the collection paths.' % collection.fqcn)
 
                 remote_collection = Candidate(
-                    collection.fqcn, collection.ver,
+                    local_collection.fqcn, local_collection.ver,
                     None, 'galaxy',
                 )
```",2021-01-22T00:30:38Z
765032535,"I tried to reproduce the second bug with `list` but the fallback works (under Python 3.8.5):
```console
$ mv -v ansible-collections-here/ansible_collections/amazon/aws/MANIFEST.json{,.bak}
renamed 'ansible-collections-here/ansible_collections/amazon/aws/MANIFEST.json' -> 'ansible-collections-here/ansible_collections/amazon/aws/MANIFEST.json.bak'
$ mv -v ansible-collections-here/ansible_collections/amazon/aws/FILES.json{,.bak}   
renamed 'ansible-collections-here/ansible_collections/amazon/aws/FILES.json' -> 'ansible-collections-here/ansible_collections/amazon/aws/FILES.json.bak'
$ ansible-galaxy collection list --collections-path ansible-collections-here     

[WARNING]: You are running the development version of Ansible. You should only run Ansible from ""devel"" if you are modifying the Ansible engine, or trying
out features under development. This is a rapidly changing source of code and can become unstable at any point.
[WARNING]: Collection at '~/src/experiments/ansible-galaxy-collection-resolver/collections/ansible-collections-here/ansible_collections/amazon/aws'
does not have a MANIFEST.json file, nor has it galaxy.yml: cannot detect version.

# ~/src/experiments/ansible-galaxy-collection-resolver/collections/ansible-collections-here/ansible_collections
Collection           Version   
-------------------- ----------
amazon.aws           *         
ansible.netcommon    1.4.2-dev1
community.general    1.3.0     
community.kubernetes 1.1.1     
community.mysql      1.1.1     
google.cloud         1.0.1     

# ~/.ansible/collections/ansible_collections
Collection           Version
-------------------- -------
amazon.aws           1.3.0  
ansible.netcommon    1.4.1  
ansible.posix        1.1.1  
community.general    1.3.2  
community.kubernetes 1.1.1
google.cloud         1.0.1
```

I thought it'd explode with no metadata but it was fine...",2021-01-22T00:37:07Z
765073348,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-22T02:36:56Z
765138082,@webknjaz it's all under Python 3.8 (docker container) and 3.9 (my system). I'll try to debug the `list` issue.,2021-01-22T05:38:25Z
765165754,"Files identified in the description:
* [`docs/docsite/rst/plugins/plugins.rst`](https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/plugins/plugins.rst)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-22T06:25:06Z
765233086,Thanks to the one with the glasses!,2021-01-22T08:31:33Z
765258368,I don't have the problem anymore. I have upgraded ansible to 2.10 using pip3 to use python3 instead of python2,2021-01-22T09:15:11Z
765329757,"Looks like the `verify` bugfix is slightly more complicated:
```diff
diff --git a/lib/ansible/galaxy/collection/__init__.py b/lib/ansible/galaxy/collection/__init__.py
index 641e88e1d5a..e28655b7b46 100644
--- a/lib/ansible/galaxy/collection/__init__.py
+++ b/lib/ansible/galaxy/collection/__init__.py
@@ -623,7 +623,9 @@ def verify_collections(
                     raise AnsibleError(message='Collection %s is not installed in any of the collection paths.' % collection.fqcn)
 
                 remote_collection = Candidate(
-                    collection.fqcn, collection.ver,
+                    collection.fqcn,
+                    collection.ver if collection.ver != '*'
+                    else local_collection.ver,
                     None, 'galaxy',
                 )
 
diff --git a/test/integration/targets/ansible-galaxy-collection/tasks/verify.yml b/test/integration/targets/ansible-galaxy-collection/tasks/verify.yml
index 857426d8422..eaef2f8227b 100644
--- a/test/integration/targets/ansible-galaxy-collection/tasks/verify.yml
+++ b/test/integration/targets/ansible-galaxy-collection/tasks/verify.yml
@@ -40,6 +40,11 @@
       - verify is success
       - ""'Collection ansible_test.verify contains modified content' not in verify.stdout""
 
+- name: verify the installed collection against the server, with unspecified version in CLI
+  command: ansible-galaxy collection verify ansible_test.verify
+  environment:
+    ANSIBLE_COLLECTIONS_PATH: '{{ galaxy_dir }}'
+
 - name: verify a collection that doesn't appear to be installed
   command: ansible-galaxy collection verify ansible_test.verify:1.0.0
   register: verify
```",2021-01-22T11:12:37Z
765336229,"Just to be sure about the future; linked to:
- this commit
- the issue #63067
- this exchange (Ubuntu 20.04 vs 20.10)
- the fact that only new ansible release published on PPA include new OS distribution if not existing previously
 
What is the synthesis matrix of what will be published on http://ppa.launchpad.net/ansible/ansible/ubuntu/dists/ ?
- Ansible version (2.10 / 2.11)
- Ubuntu version (20.04 focal / 20.10 groovy)
- Estimated roadmap (no engagement for sure, probably linked to [ansible 2.11 roadmap](https://docs.ansible.com/ansible/devel/roadmap/ROADMAP_2_11.html), it is just to have an idea)

Many thanks in advance",2021-01-22T11:26:01Z
765415205,"> Can you provide a complete example of how to trigger this? Thanks.

Hi @s-hertel,

This line triggers the exception.
https://github.com/goneri/vmware.vmware_rest/blob/bump-auto-generated-modules_22976/plugins/modules/vcenter_cluster_info.py#L150

The exception: https://b1669b95d5bdb98b0a44-b006ba95bc9d0e915279d233181fe707.ssl.cf2.rackcdn.com/170/6d4afe3b05240cd295a079e01138a732c5766359/check/ansible-test-sanity-base-210/3ea3eb0/job-output.html#l18971",2021-01-22T13:56:42Z
765427437,"I'll be damned.  Thanks @bcoca.  Just needed:

```
  - set_fact:
      use_ansible_connection: ""{{ (whoami_control_machine_output.stdout == 'awx') | ternary('ssh','local') }}""
    delegate_to: localhost
    delegate_facts: yes
```

And then use it as above:

```
ansible_connection: ""{{ hostvars['localhost']['use_ansible_connection'] }}""
```

I tested this workaround successfully in 2.9.17 and 2.10.5.",2021-01-22T14:13:45Z
765459075,Thanks for taking a look @felixfontein. Too many cooks in the kitchen - this will be consolidated with https://github.com/ansible/ansible/pull/73328.,2021-01-22T14:54:55Z
765468575,"Sorry for the delayed response. As noted above, this is a configuration issue. We don't plan to make the module silently succeed or try to detect if we're running in a container, but you can handle this in the playbook with `failed_when`. You could also use a conditional on your `hostname` tasks like `when: ansible_facts.virtualization_type not in ('docker', 'container', 'containerd')`.",2021-01-22T15:06:58Z
765469857,This has been resolved by https://github.com/ansible/ansible/commit/13aff08748167b761c1a61fbd517032e7ac1511c and there should be a more informative error message.,2021-01-22T15:08:49Z
765475486,"Since there are only a couple issues open, we'll handle the rest as individual tickets.",2021-01-22T15:16:10Z
765478770,We discussed this in backlog today and don't plan on adding this because existing build systems already handle more than we want to include in `ansible-galaxy`.,2021-01-22T15:20:21Z
765480843,Closing as a duplicate of #19681.,2021-01-22T15:23:01Z
765481684,cc @mattclay,2021-01-22T15:24:21Z
765482791,cc @mattclay,2021-01-22T15:26:08Z
765484064,"The error message indicates the solution:

> Hint: If you passed a list/dict of just one element, try adding wantlist=True to your lookup invocation or use q/query instead of lookup.

So either use:

```
loop: ""{{ lookup('dict', users, wantlist=True) }}""
```

or 

```
loop: ""{{ q('dict', users) }}""
```

Or more preferably, don't use lookup at all, and use the `dict2items` filter:

```
loop: ""{{ users | dict2items }}""
```

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-22T15:27:50Z
765490094,This looks like it may be a duplicate of #29778,2021-01-22T15:36:02Z
765490590,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
Traceback (most recent call last):
  File ""hacking/build-ansible.py"", line 103, in <module>
    main()
  File ""hacking/build-ansible.py"", line 92, in main
    retval = command.main(args)
  File ""/tmp/tmpf96ol10d/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 279, in main
    allvars[cli_name] = opts_docs(cli_class_name, cli_name)
  File ""/tmp/tmpf96ol10d/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 120, in opts_docs
    fromlist=[cli_class_name]), cli_class_name)
  File ""/tmp/tmpf96ol10d/lib/ansible/cli/__init__.py"", line 17, in <module>
    from ansible.cli.arguments import option_helpers as opt_help
  File ""/tmp/tmpf96ol10d/lib/ansible/cli/arguments/option_helpers.py"", line 25, in <module>
    from ansible import constants as C
  File ""/tmp/tmpf96ol10d/lib/ansible/constants.py"", line 156, in <module>
    config = ConfigManager()
  File ""/tmp/tmpf96ol10d/lib/ansible/config/manager.py"", line 297, in __init__
    self._base_defs = self._read_config_yaml_file(defs_file or ('%s/base.yml' % os.path.dirname(__file__)))
  File ""/tmp/tmpf96ol10d/lib/ansible/config/manager.py"", line 318, in _read_config_yaml_file
    return yaml_load(config_def, Loader=SafeLoader) or {}
  File ""/usr/local/lib/python3.6/dist-packages/yaml/__init__.py"", line 114, in load
    return loader.get_single_data()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/constructor.py"", line 49, in get_single_data
    node = self.get_single_node()
  File ""ext/_yaml.pyx"", line 707, in _yaml.CParser.get_single_node
  File ""ext/_yaml.pyx"", line 725, in _yaml.CParser._compose_document
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 774, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 853, in _yaml.CParser._compose_sequence_node
  File ""ext/_yaml.pyx"", line 905, in _yaml.CParser._parse_next_event
yaml.scanner.ScannerError: while scanning an alias
  in ""b'/tmp/tmpf96ol10d/lib/ansible/config/base.yml'"", line 795, column 7
did not find expected alphabetic or numeric character
  in ""b'/tmp/tmpf96ol10d/lib/ansible/config/base.yml'"", line 795, column 8
make: *** [generate_rst] Error 1
```
<!-- job_id: 4691 -->
<!-- job_id: 809d7cd2d9f967b3a99dbc114946aa8c -->
<!-- job_id: None -->
The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
Makefile:120: recipe for target 'config' failed
--> Standard Error
Traceback (most recent call last):
  File ""../../hacking/build-ansible.py"", line 103, in <module>
    main()
  File ""../../hacking/build-ansible.py"", line 92, in main
    retval = command.main(args)
  File ""/root/ansible/hacking/build_library/build_ansible/command_plugins/dump_config.py"", line 70, in main
    config_options = yaml.safe_load(f)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/__init__.py"", line 162, in safe_load
    return load(stream, SafeLoader)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/__init__.py"", line 114, in load
    return loader.get_single_data()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/constructor.py"", line 49, in get_single_data
    node = self.get_single_node()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 36, in get_single_node
    document = self.compose_document()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 55, in compose_document
    node = self.compose_node(None, None)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 84, in compose_node
    node = self.compose_mapping_node(anchor)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 133, in compose_mapping_node
    item_value = self.compose_node(node, item_key)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 84, in compose_node
    node = self.compose_mapping_node(anchor)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 133, in compose_mapping_node
    item_value = self.compose_node(node, item_key)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 82, in compose_node
    node = self.compose_sequence_node(anchor)
  File ""/usr/local/lib/python3.6/dist-packages/yaml/composer.py"", line 110, in compose_sequence_node
    while not self.check_event(SequenceEndEvent):
  File ""/usr/local/lib/python3.6/dist-packages/yaml/parser.py"", line 98, in check_event
    self.current_event = self.state()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/parser.py"", line 384, in parse_block_sequence_entry
    if not self.check_token(BlockEntryToken, BlockEndToken):
  File ""/usr/local/lib/python3.6/dist-packages/yaml/scanner.py"", line 116, in check_token
    self.fetch_more_tokens()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/scanner.py"", line 227, in fetch_more_tokens
    return self.fetch_alias()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/scanner.py"", line 610, in fetch_alias
    self.tokens.append(self.scan_anchor(AliasToken))
  File ""/usr/local/lib/python3.6/dist-packages/yaml/scanner.py"", line 924, in scan_anchor
    % ch, self.get_mark())
yaml.scanner.ScannerError: while scanning an alias
  in ""../../lib/ansible/config/base.yml"", line 795, column 7
expected alphabetic or numeric character, but found '*'
  in ""../../lib/ansible/config/base.yml"", line 795, column 8
make: *** [config] Error 1
```
<!-- job_id: 4691 -->
<!-- job_id: e6613d4d93f19fe043be6fd0d6ec5c18 -->
<!-- job_id: None -->
The test `ansible-test sanity --test changelog` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/changelog.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/lib/ansible_test/_data/sanity/code-smell/changelog.py"" returned exit status 0.
>>> Standard Error
Traceback (most recent call last):
  File ""/usr/lib/python3.6/runpy.py"", line 193, in _run_module_as_main
    ""__main__"", mod_spec)
  File ""/usr/lib/python3.6/runpy.py"", line 85, in _run_code
    exec(code, run_globals)
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/__main__.py"", line 14, in <module>
    from .cli import run
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/cli.py"", line 24, in <module>
    from .ansible import get_ansible_release
  File ""/usr/local/lib/python3.6/dist-packages/antsibull_changelog/ansible.py"", line 13, in <module>
    from ansible import constants as C
  File ""/root/ansible/lib/ansible/constants.py"", line 156, in <module>
    config = ConfigManager()
  File ""/root/ansible/lib/ansible/config/manager.py"", line 297, in __init__
    self._base_defs = self._read_config_yaml_file(defs_file or ('%s/base.yml' % os.path.dirname(__file__)))
  File ""/root/ansible/lib/ansible/config/manager.py"", line 318, in _read_config_yaml_file
    return yaml_load(config_def, Loader=SafeLoader) or {}
  File ""/usr/local/lib/python3.6/dist-packages/yaml/__init__.py"", line 114, in load
    return loader.get_single_data()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/constructor.py"", line 49, in get_single_data
    node = self.get_single_node()
  File ""ext/_yaml.pyx"", line 707, in _yaml.CParser.get_single_node
  File ""ext/_yaml.pyx"", line 725, in _yaml.CParser._compose_document
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 774, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 853, in _yaml.CParser._compose_sequence_node
  File ""ext/_yaml.pyx"", line 905, in _yaml.CParser._parse_next_event
yaml.scanner.ScannerError: while scanning an alias
  in ""b'/root/ansible/lib/ansible/config/base.yml'"", line 795, column 7
did not find expected alphabetic or numeric character
  in ""b'/root/ansible/lib/ansible/config/base.yml'"", line 795, column 8
```
<!-- job_id: 4691 -->
<!-- job_id: af836108dbe8ae844f848a0dd61e01b8 -->
<!-- job_id: None -->
The test `ansible-test sanity --test ansible-doc` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/ansible-doc.html)] failed with the error:
```
Command ""ansible-doc -t become runas su sudo"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/bin/ansible-doc"", line 63, in <module>
    import ansible.constants as C
  File ""/root/ansible/lib/ansible/constants.py"", line 156, in <module>
    config = ConfigManager()
  File ""/root/ansible/lib/ansible/config/manager.py"", line 297, in __init__
    self._base_defs = self._read_config_yaml_file(defs_file or ('%s/base.yml' % os.path.dirname(__file__)))
  File ""/root/ansible/lib/ansible/config/manager.py"", line 318, in _read_config_yaml_file
    return yaml_load(config_def, Loader=SafeLoader) or {}
  File ""/usr/local/lib/python3.6/dist-packages/yaml/__init__.py"", line 114, in load
    return loader.get_single_data()
  File ""/usr/local/lib/python3.6/dist-packages/yaml/constructor.py"", line 49, in get_single_data
    node = self.get_single_node()
  File ""ext/_yaml.pyx"", line 707, in _yaml.CParser.get_single_node
  File ""ext/_yaml.pyx"", line 725, in _yaml.CParser._compose_document
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 776, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 890, in _yaml.CParser._compose_mapping_node
  File ""ext/_yaml.pyx"", line 774, in _yaml.CParser._compose_node
  File ""ext/_yaml.pyx"", line 853, in _yaml.CParser._compose_sequence_node
  File ""ext/_yaml.pyx"", line 905, in _yaml.CParser._parse_next_event
yaml.scanner.ScannerError: while scanning an alias
  in ""b'/root/ansible/lib/ansible/config/base.yml'"", line 795, column 7
did not find expected alphabetic or numeric character
  in ""b'/root/ansible/lib/ansible/config/base.yml'"", line 795, column 8
```
<!-- job_id: 4691 -->
<!-- job_id: f2760887eb0f2249e51536d82aace438 -->
<!-- job_id: None -->
The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 2 errors:
```
lib/ansible/config/base.yml:795:8: error: syntax error: expected alphabetic or numeric character, but found '*' (syntax)
lib/ansible/config/base.yml:795:8: unparsable-with-libyaml: while scanning an alias - did not find expected alphabetic or numeric character
```
<!-- job_id: 4691 -->
<!-- job_id: 23a78d04be7fe3f2ab60830c1ce6d35e -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-22T15:36:46Z
765494918,"@pankajcheema Sorry for the delayed response. There isn't enough information to reproduce this with the task provided. Can you provide a complete reproducer as well as the complete output of your task (with -vvvv) when it fails?

needs_info",2021-01-22T15:42:30Z
765497715,"It looks like metadata is necessary to remove an existing role with --force, but since a role isn't required to have metadata we should probably fix this.

@Seb0042 there's a `--force-with-deps` flag for installing dependencies",2021-01-22T15:46:41Z
765505392,This should probably done in common code rather than special-casing/reinventing the wheel for known_hosts. See the copy module as an example of using preserve permissions with standard functions.,2021-01-22T15:56:40Z
765509274,"@samccann Please create a new PR using a branch in your fork.
<!--- boilerplate: fork --->",2021-01-22T16:01:28Z
765509358,@ikhan2010 @acozine - Do we want to add some documentation or content to address this?,2021-01-22T16:01:35Z
765521260,"The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with 2 errors:
```
docs/docsite/rst/reference_appendices/config.rst:1423:0: warning: Inline strong start-string without end-string.
docs/docsite/rst/reference_appendices/config.rst:3857:0: warning: Inline strong start-string without end-string.
```
<!-- job_id: 4694 -->
<!-- job_id: 9b57cbb5e46d0e622f8f8dc80aaabf27 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-22T16:17:33Z
765555405,@jillr ^^,2021-01-22T17:02:10Z
765556475,"@felixfontein FTR the last commit https://github.com/ansible/ansible/commit/d4886ee2bd1d3015efe1335aef668998f365d218 fixes that second bug and will be absorbed into an earlier commit later. Meanwhile, @s-hertel is working on regression tests for this case and we're trying to decide how to validate `version` better. The patch allows falsy `version` values in `galaxy.yml` but not in `MANIFEST.json`. It could be improved by actually parsing it with SemVer but I'm not sure if it's worth it.",2021-01-22T17:03:53Z
765575438,"Files identified in the description:
* [`lib/ansible/plugins/inventory/constructed.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/inventory/constructed.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-22T17:38:02Z
765575460,"Files identified in the description:
* [`lib/ansible/plugins/inventory/constructed.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/inventory/constructed.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-22T17:38:05Z
765607586,"Files identified in the description:
* [`lib/ansible/modules/import_role.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/import_role.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-22T18:34:31Z
765614465,"`import_tasks` cannot rely on host vars to control its behavior as it is a pre-processor macro that applies to playbook generically without any host context.

To utilize host context, you must instead use `include_tasks` which is a runtime trigger that can be influenced on a per host basis.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-22T18:47:20Z
765615455,"Ok, that's what I thought but I wanted to be sure it was an expected behavior.
Thanks",2021-01-22T18:49:21Z
765630765,"I would also second this, I feel like `import_roles/playbooks/tasks` allowing `vars_files` would make a huge quality of life improvement, as they will allow users to treat `import_*` as sort of function like blocks.

For example, you could then easily do: (somewhat contrived example)
```yaml
- name: Setup telegraf service
   import_role: name=""example/telegraf""
   vars_files:
     - vars/telegraf.yml
- name: Setup telegraf auxillary service
  import_role: name=""example/telegraf""
  vars_files:
    - vars/telegraf-aux.yml
```

At the moment the closest you can come to that simplicity is (if you want the tags to work correctly)
```yaml
- name: TELEGRAF | Install and Configure Telegraf
  tags: [ telegraf, sometag ]
  block:
    - include_vars: telegraf.yml
    - include_role: 
        name: ""example/telegraf""
        apply:
          tags: [ telegraf, sometag ]
```",2021-01-22T19:19:13Z
765635753,"apt_key only checks that the key signature already exists, it does try ignore signatures for expired keys but there is no code that looks to see if the key itself has extra information now.",2021-01-22T19:28:29Z
765636540,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 3 errors:
```
lib/ansible/modules/apt_key.py:346:5: E303: too many blank lines (2)
lib/ansible/modules/apt_key.py:388:161: E501: line too long (163 > 160 characters)
lib/ansible/modules/apt_key.py:401:161: E501: line too long (161 > 160 characters)
```
<!-- job_id: 4720 -->
<!-- job_id: 5e479646e84ec6b437c4469c8f061fea -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-22T19:30:11Z
765637308,"~Should we just~ I added a note that the apt-key module should not be used with newer releases ~and instead use get_url to put the keys in the proper place,~  but keep for backwards compat.

Unless i hear otherwise I'm going to consider that as good enough and close this issue when merged.",2021-01-22T19:31:54Z
765638139,"Considering  that apt-key should not be used anymore (see #55590) and get_url already handles this in better ways, should we just close this issue?

needs_info",2021-01-22T19:33:37Z
765639327,"tried fixing in #73334, but it seems that 'apt-key' command can return 'all fine' .. but then when we try to verify the key was added, it did not happen. I've updated info in the error message, but I'm still not sure how this happens.",2021-01-22T19:35:57Z
765640959,"considering #55590 hints we should not be using apt-key anymore, is this still a concern? 

was thinking real fix was adding --force as dumping the full keys and comparing them seems overkill.

needs_info",2021-01-22T19:39:18Z
765642479,@Altiire Thank you for following up.,2021-01-22T19:42:03Z
765646696,"get_url has proxy handling built in, for apt_key (in #73334) we add proxy support for the builtin ansible download methods.

proxying for apt-key/repository will still not work when using the apt toolkit as it does not seem to acknowledge the standard environment variables.  Since these tools are also deprecated upstream I'm going to close this ticket since ti won't be relevant much longer and a simple workaround of using get_url exists.

",2021-01-22T19:50:16Z
765657340,"It's not strictly required, but the work I am doing in https://github.com/ansible/ansible/pull/73309 would make this much easier to deal with.  I wouldn't work on adding `vars_files` until that PR merges, or we determine that #73309 is not feasible.",2021-01-22T20:11:52Z
765662247,"The test `ansible-test sanity --test ansible-doc` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/ansible-doc.html)] failed with the error:
```
Output on stderr from ansible-doc is considered an error.

Command ""ansible-doc -t module apt_key"" returned exit status 0.
>>> Standard Error
[WARNING]: While constructing a mapping from
/root/ansible/lib/ansible/modules/apt_key.py, line 3, column 1, found a
duplicate dict key (notes). Using last defined value only.
```
<!-- job_id: 4725 -->
<!-- job_id: f97f36e2776417147ce9d0edecea4d2c -->
<!-- job_id: None -->
The test `ansible-test sanity --test yamllint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/yamllint.html)] failed with 1 error:
```
lib/ansible/modules/apt_key.py:32:1: key-duplicates: DOCUMENTATION: duplication of key ""notes"" in mapping
```
<!-- job_id: 4725 -->
<!-- job_id: 95131e49cdda23ca4d893250c5f8ad3c -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-22T20:22:27Z
765662650,"@buffetbruddahs You have not responded to information requests in this issue so we will assume it no longer affects you. If you are still interested in this, please create a new issue with the requested information.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-22T20:23:15Z
765681406,Thanks! :) :clap: ,2021-01-22T21:00:31Z
765692207,"@webknjaz with the current version of this branch, both bugs are fixed for me.",2021-01-22T21:25:02Z
765701018,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/module_utils/common/validator.py -> https://galaxy.ansible.com/community/docker

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-22T21:41:53Z
765701212,bot_skip,2021-01-22T21:42:19Z
765702126,"Some tests are here https://github.com/webknjaz/ansible/pull/359, https://github.com/webknjaz/ansible/pull/360 which will probably be merged on Monday.",2021-01-22T21:44:29Z
765709326,"@s-hertel Apologies I'm not sure what the request is here.  Would the proposed `import_inventory` be something cloud specific, or in lieu of that module are we talking about instead creating a guide for how to work with complex inventories scenarios like folks might be likely to encounter with cloud?",2021-01-22T22:02:04Z
765718089,"Ensure what to do now, with this feedback sorry. ",2021-01-22T22:24:29Z
765738785,"@maestrx You have not responded to information requests in this issue so we will assume it no longer affects you. If you are still interested in this, please create a new issue with the requested information.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-22T23:17:49Z
765895343,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-23T09:29:57Z
765960265,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-23T12:34:58Z
766176745,"Files identified in the description:
* [`lib/ansible/module_utils/facts/hardware/linux.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/module_utils/facts/hardware/linux.py)
* [`lib/ansible/module_utils/facts/hardware/sunos.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/module_utils/facts/hardware/sunos.py)
* [`lib/ansible/module_utils/facts/system/python.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/module_utils/facts/system/python.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-23T20:47:32Z
766200019,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-23T23:31:37Z
766245541,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T00:22:01Z
766248422,"Files identified in the description:
* [`lib/ansible/modules/file.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/file.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T00:30:57Z
766248627,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/utilities/logic/validate.py -> https://galaxy.ansible.com/ansible/utils
* lib/ansible/plugins/action/validate.py -> https://galaxy.ansible.com/ansible/utils

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-24T00:32:29Z
766248755,"Files identified in the description:
* [`lib/ansible/modules/assemble.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/assemble.py)
* `lib/ansible/modules/cloud/amazon/ec2_lc_find.py`
* [`lib/ansible/modules/find.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/find.py)
* [`lib/ansible/modules/lineinfile.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/lineinfile.py)
* `lib/ansible/modules/net_tools/nios/nios_naptr_record.py`
* [`lib/ansible/modules/replace.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/replace.py)
* `lib/ansible/modules/windows/win_find.ps1`
* `lib/ansible/modules/windows/win_lineinfile.ps1`
* `lib/ansible/modules/windows/win_wait_for.ps1`
* [`lib/ansible/plugins/filter/core.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/filter/core.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T00:33:50Z
766253207,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T01:04:21Z
766271705,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T01:24:13Z
766272007,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T01:27:20Z
766272424,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T01:32:13Z
766273616,"Files identified in the description:
* `lib/ansible/inventory`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T01:45:05Z
766350361,"Files identified in the description:
* [`lib/ansible/plugins/filter/urlsplit.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/filter/urlsplit.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-24T13:43:17Z
766360251,"@bcoca If something along the lines of ""Use M(ansible.builtin.get_url) if your distro supports dropping the key to /etc/apt/trusted.gpg.d/"" is added to the apt_key module, I am perfectly fine with closing this as irrelevant.",2021-01-24T14:51:02Z
766459044,"Good day all.  I hate to just pile onto this issue, since it seems that a great variety of things can cause it.  I would just like to report I'm experiencing tasks hanging as well.  It's really started happening much more often since I upgraded to Fedora Core 33 (kernel version 5.9.16-200.fc33.x86_64).  It appears to be a purely client-side issue.  The symptoms are the python3 module has finished running on the target host, but Ansible just doesn't seem to notice and the client side SSH never exits or closes.  It's really odd.  I've tested networking extensively and things look stable and I don't appear to have connection issues.  I have 8 hosts and the problem is completely random and intermittent.  

I've tried changing:  forks to be greater than host count, disabling ControlMaster & ControlPersist, and disabling my Jumphost and connecting directly.  SSH retries with SSH client-side keepalives seems to help somewhat, but not always.  I'm running Ansible 2.9.16, but the exact version doesn't seem to matter.  I downgraded to a Linux 5.8 kernel and the problem seemed to go away.  So for those out there with newer kernels, you might try this too.  If anyone has ideas, I'd love to hear it.  Neither `-vvvvv` or `ANSIBLE_DEBUG=1` has very helpful output.

Thank you for making Ansible.",2021-01-24T23:25:54Z
766459309,"> 
> 
> Good day all. I hate to just pile onto this issue, since it seems that a great variety of things can cause it. I would just like to report I'm experiencing tasks hanging as well. It's really started happening much more often since I upgraded to Fedora Core 33 (kernel version 5.9.16-200.fc33.x86_64). It appears to be a purely client-side issue. The symptoms are the python3 module has finished running on the target host, but Ansible just doesn't seem to notice and the client side SSH never exits or closes. It's really odd. I've tested networking extensively and things look stable and I don't appear to have connection issues. I have 8 hosts and the problem is completely random and intermittent.
> 
> I've tried changing: forks to be greater than host count, disabling ControlMaster & ControlPersist, and disabling my Jumphost and connecting directly. SSH retries with SSH client-side keepalives seems to help somewhat, but not always. I'm running Ansible 2.9.16, but the exact version doesn't seem to matter. I downgraded to a Linux 5.8 kernel and the problem seemed to go away. So for those out there with newer kernels, you might try this too. If anyone has ideas, I'd love to hear it. Neither `-vvvvv` or `ANSIBLE_DEBUG=1` has very helpful output.
> 
> Thank you for making Ansible.

try killing the process on the server and receive the output back to ansible",2021-01-24T23:27:54Z
766488342,"Hi @dezza 

> try killing the process on the server and receive the output back to ansible

There doesn't appear to be one on the server sometimes, so there's nothing to kill.  If I kill SSH on the client, it just retries and mostly succeeds...mostly.  This is what it looks like after the SSH connection has timed out completely on the server side, but the client stays hanging.

Here's the client-side running Ansible:

```
$ ps uxfwwwwww
...
cmm       181520  0.0  0.0 222348  3624 pts/13   S+   18:07   0:00  |   |           \_ /bin/bash -e playbooks/site_k8s.yml -vvvv
cmm       181525  4.8  0.6 483316 104460 pts/13  Sl+  18:07   4:14  |   |               \_ /home/cmm/.local/share/virtualenvs/bah-ansible-FrO0BVwT/bin/python /home/cmm/.local/share/virtualenvs/bah-ansible-FrO0BVwT/bin/ansible-playbook -b -vv -vvvv /home/cmm/projects/bah-ansible/tmp.DjDnhjhQ48.yml
cmm       188872  0.0  0.5 482036 94424 pts/13   S+   18:11   0:00  |   |                   \_ /home/cmm/.local/share/virtualenvs/bah-ansible-FrO0BVwT/bin/python /home/cmm/.local/share/virtualenvs/bah-ansible-FrO0BVwT/bin/ansible-playbook -b -vv -vvvv /home/cmm/projects/bah-ansible/tmp.DjDnhjhQ48.yml
cmm       188875  0.0  0.0 236500  6524 pts/13   S+   18:11   0:00  |   |                       \_ ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=""cmm-local"" -o ConnectTimeout=30 -o ControlPath=/home/cmm/.ansible/cp/%h-%p-%r oob.horcrux6.[omitted] /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '""'""'echo BECOME-SUCCESS-lxppkexdhuoglfbnetzwxjbsdkxrlnrr ; /usr/bin/python3'""'""' && sleep 0'
...
cmm       181549  0.0  0.0 237488  4244 ?        Ss   18:07   0:02  \_ ssh: /home/cmm/.ansible/cp/oob.horcrux6.[omitted]-22-cmm-local [mux]
```
```
$ lsof -p 181549  -n
ssh     181549  cmm    4u  IPv4            1401613       0t0     TCP 192.168.1.168:59298->192.168.0.26:ssh (ESTABLISHED)
ssh     181549  cmm    5u  unix 0x00000000c0edce71       0t0 1406482 /home/cmm/.ansible/cp/oob.horcrux6.[omitted]-22-cmm-local.zINcdINsA8MXR8VB type=STREAM
ssh     181549  cmm    6u  unix 0x00000000913991d0       0t0 1401596 type=STREAM
ssh     181549  cmm    7u  unix 0x00000000ced87ee9       0t0 1476868 /home/cmm/.ansible/cp/oob.horcrux6.[omitted]-22-cmm-local.zINcdINsA8MXR8VB type=STREAM
```

Server side searching by TCP socket:

```
root@horcrux6:~# ss -tpn | grep 59298
root@horcrux6:~#    (nothing and no modules running)
```

The fix to help with this was add SSH keepalives with retries, e.g.

```
[ssh_connection]
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s -o ServerAliveInterval=30
retries = 3
```

I've still had freezes happen with these turned on, but now it's not happening.  It's intermittent, which tough to troubleshoot.  Now that I look at this closer, maybe I have a middlebox issue.  My OOB network is on a different broadcast domain behind a firewall.  Those TCP sessions shouldn't be hanging like this.",2021-01-25T01:48:31Z
766537299,"I'm not sure what is happening here but my first thoughts would be some antimalware program is stopping Ansible in it's tracks causing the memory violation error. Based on the stacktrace the error is happening in PowerShell trying to run and it's not very clear whether the issue is due to some statement we are trying to run or just PowerShell itself failing to run the code itself. I would check any antimalware logs you have on your host and see if they mention why things are getting killed. I would also just try to run the following tasks to see if that works

```yaml
- raw: echo ""testing""

- raw: powershell.exe ""echo testing""

- raw: powershell.exe -NoLogo -NoProfile ""echo testing""

- raw: powershell.exe -NoLogo -NoProfile -EncodedCommand {{ ""echo testing"" | b64encode(encoding='utf-16-le') }}
```

These test just a very basic information of running PowerShell, if any of them fail then it might give some more information to try and track down why it is failing.",2021-01-25T04:48:08Z
766570175,"Hey everybody. What is the status of PR, can I help somehow? :)",2021-01-25T06:11:04Z
766704030,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T10:08:10Z
766704039,"@wouterhummelink: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-25T10:08:11Z
766704098,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T10:08:16Z
766723263,"Files identified in the description:
* [`lib/ansible/modules/dnf.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/dnf.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T10:40:00Z
766737718,"Files identified in the description:
* [`lib/ansible/modules/include_tasks.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/include_tasks.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T11:05:29Z
766753355,"I suspect you want something like the following:

```yaml
- hosts: localhost
  gather_facts: no
  vars:
    cluster_control_plane_endpoint: http://192.168.122.192:8443
  tasks:
    - debug:
        var: cluster_control_plane_endpoint
    - debug:
        msg: ""{{ 'http://foo.bar.com:9000/dir/index.html?query=term#fragment' | urlsplit('hostname') }}""
    - debug:
        msg: ""{{ lookup('vars', 'cluster_control_plane_endpoint') | urlsplit('port') }}""
```

Please see documentation for the debug module at https://docs.ansible.com/ansible/latest/collections/ansible/builtin/debug_module.html. 

User questions like this are better suited for the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-25T11:33:24Z
766774274,Confirmed what @ursetto pointed out. Disabling subscription-manager will prevent this issue to happen.,2021-01-25T12:13:10Z
766799701,"It seems this issue is propagating to newer minor release since I've upgraded from 2.9.15 to ansible-base 2.10.x  but is still present. 

These are my tests:

- ansible-base from 2.10.0 to 2.10.5 and jinja2 2.10 bug is present
- ansible-base 2.10.5 and jinja2 2.11.2 not working bug is present

The behaviour is the same as shown in _actaul results_.

Is it possible to change the priority of this issue? Since who is using template module in complex scenarios could face up to an unexpected or ambiguous _changed_ status, instead of an error evidence or alert, once upgraded Ansible to a most recent version.

Thank you in advance.",2021-01-25T13:01:55Z
766802047,@reporter4u Would you mind testing https://github.com/ansible/ansible/pull/72830 and let us know if it fixes the issue with your playbooks? Thanks!,2021-01-25T13:05:16Z
766838032,@sivel  I made the requested change.  Could you re-review?  Thanks!,2021-01-25T14:03:54Z
766850669,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T14:24:18Z
766850676,"@jmacorotan: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name
- ansible version

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-25T14:24:19Z
766852468,"Ansible `2.7` reached EOL and is not maintained anymore, see https://docs.ansible.com/ansible/devel/reference_appendices/release_and_maintenance.html for supported releases.

If you have further questions please stop by IRC or the mailing list:
* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-25T14:27:03Z
766855406,@eqrx It looks like the holdup is resolving test issues.,2021-01-25T14:31:18Z
766855740,/azp run,2021-01-25T14:31:44Z
766855895,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-25T14:31:56Z
766858510,"the reason is that until ansible 2.8 you were not guaranteed to always have an `ansible_facts` variable, so for older versions you need an extra `|default({})` for the cases in which you did not gather facts yet.",2021-01-25T14:35:39Z
766867887,!waffling core_review,2021-01-25T14:49:08Z
766878763,"@mkrizek I tested your patch and seems working fine.

Since I'm not a developer I want to show you the steps which I used to perform my test:

- i pulled the Ansible project from here
- I checked out devel branch
- I copied your file from https://raw.githubusercontent.com/mkrizek/ansible/72615-jinja-context/lib/ansible/template/vars.py to my devel branch into `lib/ansible/template/vars.py`
- From devel branch I run  `source hacking/env-setup && ansible-test sanity --test compile`
- And then I run `ansible-playbook ~/test/issues/issue_72615/pb.yml` and the result was as espected

```
var1: Delta
var2: Charlie
var3: Tango
```

Maybe this procedure is not so conventional so, can you give me a link in order to learn how to prepare and use a testing environment and being more efficient? I tried also cloning your fork and run commands from there but i wasn't able to run Ansible.
Moreover, I haven't understand if you were waiting a test from me since last november when I opened this issue... Sorry!

Thank you!",2021-01-25T15:04:06Z
766891585,"@reporter4u Instead of copying file(s) from the pull request branch, you can actually pull that branch, see: https://docs.ansible.com/ansible/latest/dev_guide/testing.html#how-to-test-a-pr.

> Moreover, I haven't understand if you were waiting a test from me since last november when I opened this issue... Sorry!

No, the PR is waiting to be reviewed. But good to know it works for you, thanks!",2021-01-25T15:22:14Z
766893761,"`meta/requirements.yml` only supports the v1 requirements format.  We do not support dependencies between stand alone roles and collections (nor between collections and stand alone roles).

The v1 format is not deprecated.

The v2 requirements.yml format was introduced in 2.9, the ability to install both collections and roles from a single command was introduced in 2.10.
",2021-01-25T15:25:20Z
766896029,"thank you @bcoca 

can you perhaps point me how the current syntax should be as I am getting this errors
![image](https://user-images.githubusercontent.com/77975987/105726407-01b66b80-5f65-11eb-935b-86bbd940d10c.png)
",2021-01-25T15:28:23Z
766896606,Thanks @KB-perByte for the Ansible documentation fix!,2021-01-25T15:29:10Z
766911655,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T15:50:43Z
766911665,"@tms0: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-25T15:50:44Z
766913405,"@chris-mccoy It may not be a networking issue, the kernel change suggests it could be how the process is ending and not killing the ssh session with it, as long as the client side does not detect an EOF it won't close the connection, if keepalive still works ... then it will wait indefinitely.",2021-01-25T15:53:08Z
766915577,"moving the syntax check to a strategy (like i'm trying to do here for --list*) would fix the issue as it would go through normal 'playbook_iterator'.
#38403
",2021-01-25T15:56:02Z
766917374,"this requires 'controller side module argument loading' .. which has been on many people's list for some time, it would move initial verification to the action plugin. Then switch from  normal.py/matching to syntax_check.py for all actions.",2021-01-25T15:58:29Z
766928767,"To double check, please correct me if needed:
- root reqs supports both formats
- role-reqs supports only v1
- side-effect: a standalone-role cannot depend on collections
- side-effect: a collection can depend on a standalone-role, if you add it to your v2 file inside roles:.... still, it is up to the user to install them using current command as they are not automatically installed.
- adding meta/requirements.yml to roles from within a collection does not make sense as they are not processed or part of the installation.
- work done at https://github.com/ansible/ansible/pull/72591/ is supposed to improve how ansible dependencies are installed

AFAIK galaxy-ng has zero support for bare roles and there are no plans to add it. To me it does not make sense, why to add so much complexity for a packaging format that presents no benefits over the newer collections one. I do understand that the v1 is not deprecated, but based on what I hear, is a matter of time until it will happen. I really doubt there is even one Ansible user that enjoys the idea that he needs to run install twice in order to install the deps.

",2021-01-25T16:14:30Z
766938974,"That list looks brilliant as it could be used to produce some kind of ""AST"" of what it would run. If that is returned as JSON it could enable lots of other use cases in addition to linting, for example enable us to produce code **coverage reports**.

Over the last years I was asked by many users around how code coverage reports for ansible. I can see why they wanted it, especially as it would allow us to detect things like: an entire tasks file that is not tested anywhere, a lost playbook that is never used,...

We already have the ability to record what it run, but we need to be able to build a map of all playbooks/roles/tasks from within a repository in order to compute a coverage report. Obviously that such a report would stop at task level, but that should be ok.",2021-01-25T16:29:32Z
766941706,!waffling core_review,2021-01-25T16:33:21Z
766944109,"if you pair the strategy with the json callback ....

The tricky part is how much you want to cover and what runtime errors you want to skip or fail at:

include/imports, set_fact, add_host, debug. .. many actions are theoretically fine to run to get a good check, but they can also break when they depend on 'actual actions', for example fact gathering. 
```
- include_role: name='{{ansible_facts[""distribution""]}}_installer.yml'
```",2021-01-25T16:36:56Z
766981244,"@tms0 I'm not able to reproduce this, I just tried in a `debian:buster` container.

```
root@18edfd19d455:/# ansible -m setup localhost | grep distribution
[WARNING]: No inventory was parsed, only implicit localhost is available
        ""ansible_distribution"": ""Debian"",
        ""ansible_distribution_file_parsed"": true,
        ""ansible_distribution_file_path"": ""/etc/os-release"",
        ""ansible_distribution_file_variety"": ""Debian"",
        ""ansible_distribution_major_version"": ""10"",
        ""ansible_distribution_release"": ""buster"",
        ""ansible_distribution_version"": ""10"",
```

It's the same both with and without `lsb-release` installed.

Can you run [this script](https://github.com/ansible/ansible/blob/devel/hacking/tests/gen_distribution_version_testcase.py) and provide the full output? It might help us narrow in on the issue.",2021-01-25T17:30:05Z
766996937,"> * side-effect: a collection can depend on a standalone-role, if you add it to your v2 file inside roles:.... still, it is up to the user to install them using current command as they are not automatically installed.

Sounds like you confuse environment and package (role or collection) dependencies. Collection dependencies are **only** specified in `galaxy.yml` in source and are then moved to `MANIFEST.json` inside the built artifact, they only have a mapping of FQCN to version, that's it.

Another thing is `requirements.yml` (could be called anything, actually) that one must use via `ansible-galaxy collection install -r requirements.yml`. It's a user-side environment dependencies list that their playbooks need, nothing to do with a specific collection dependencies whatsoever.

The difference is the same as between `setup.cfg` (`setup.py`) and `requirements.txt` in pip ecosystem.",2021-01-25T17:50:31Z
766997001,"Hi @relrod,

```
{
    ""name"": ""Debian 3.2"",
    ""distro"": {
        ""codename"": ""buster"",
        ""id"": ""debian"",
        ""name"": ""Debian GNU/Linux"",
        ""version"": ""10"",
        ""version_best"": ""3.2"",
        ""lsb_release_info"": {
            ""distributor_id"": ""Debian"",
            ""description"": ""Debian GNU/Linux 10 (buster)"",
            ""release"": ""10"",
            ""codename"": ""buster""
        },
        ""os_release_info"": {
            ""pretty_name"": ""Debian GNU/Linux 10 (buster)"",
            ""name"": ""Debian GNU/Linux"",
            ""version_id"": ""10"",
            ""version"": ""10 (buster)"",
            ""version_codename"": ""buster"",
            ""id"": ""debian"",
            ""home_url"": ""https://www.debian.org/"",
            ""support_url"": ""https://www.debian.org/support"",
            ""bug_report_url"": ""https://bugs.debian.org/"",
            ""codename"": ""buster""
        }
    },
    ""input"": {
        ""/etc/os-release"": ""PRETTY_NAME=\""Debian GNU/Linux 10 (buster)\""\nNAME=\""Debian GNU/Linux\""\nVERSION_ID=\""10\""\nVERSION=\""10 (buster)\""\nVERSION_CODENAME=buster\nID=debian\nHOME_URL=\""https://www.debian.org/\""\nSUPPORT_URL=\""https://www.debian.org/support\""\nBUG_REPORT_URL=\""https://bugs.debian.org/\""\n"",
        ""/usr/lib/os-release"": ""PRETTY_NAME=\""Debian GNU/Linux 10 (buster)\""\nNAME=\""Debian GNU/Linux\""\nVERSION_ID=\""10\""\nVERSION=\""10 (buster)\""\nVERSION_CODENAME=buster\nID=debian\nHOME_URL=\""https://www.debian.org/\""\nSUPPORT_URL=\""https://www.debian.org/support\""\nBUG_REPORT_URL=\""https://bugs.debian.org/\""\n""
    },
    ""platform.dist"": [
        ""debian"",
        ""10"",
        ""buster""
    ],
    ""result"": {
        ""distribution"": ""Debian"",
        ""distribution_version"": ""3.2"",
        ""distribution_release"": ""buster"",
        ""distribution_major_version"": ""3"",
        ""os_family"": ""Debian""
    },
    ""platform.release"": ""4.19.0-13-cloud-amd64""
}
```

I hope this helps !",2021-01-25T17:50:38Z
766997908,"> side-effect: a collection can depend on a standalone-role, if you add it to your v2 file inside roles:.... still, it is up to the user to install them using current command as they are not automatically installed.

Well, couldn't you also use a FQCN in a standalone role's deps and have the side-effect of a standalone role depending upon a collection and needing to manually install that too?

A collection's roles should only depend on other roles in the collection or roles of its dependencies. A collection's dependencies are in the format {collection_identifier: version} in the MANIFEST.json/galaxy.yml and standalone roles are not supported. Collection dependencies are installed with the collection itself unless --no-deps is used.

Standalone roles should depend on standalone roles, collections should depend on other collections. We should clarify this in the documentation.

> work done at #72591 is supposed to improve how ansible dependencies are installed

for collections, but it isn't really a behavioral change",2021-01-25T17:52:06Z
766999588,"https://github.com/rpm-software-management/dnf/blob/30b53985739106e010e5ca488a993b3402dcbede/dnf/plugin.py#L127-L132

```python
    def _load(self, conf, skips, enable_plugins):
        """"""Dynamically load relevant plugin modules.""""""

        if DYNAMIC_PACKAGE in sys.modules:
            raise RuntimeError(""load_plugins() called twice"")
        sys.modules[DYNAMIC_PACKAGE] = package = dnf.pycomp.ModuleType(DYNAMIC_PACKAGE)
```",2021-01-25T17:54:47Z
767000052,recheck,2021-01-25T17:55:30Z
767008185,"This appears to be touching things that https://github.com/ansible/ansible/pull/72830 is also touching, which is ready for merge.

cc @mkrizek ",2021-01-25T18:07:59Z
767012482,"just testing the hostvarsvars addition .. went a bit overboard and refactored, feel free to ignore

also, added the base changes from that pr so it should stay compatible when i do ci_complete",2021-01-25T18:14:50Z
767015597,Just hit by this issue. Why the proposed fix is not merged yet?,2021-01-25T18:19:59Z
767026501,"@eqrx, as @samdoran writes, it remains to fix some test issues. I made an attempt with https://github.com/ansible/http-test-container/pull/7 and https://github.com/ansible/http-test-container/pull/9 and my last commits here, but some tests still fail. Any help to resolve the remaining issues would be very welcome.",2021-01-25T18:37:12Z
767031786,Duplicate of https://github.com/ansible/ansible/issues/72722,2021-01-25T18:46:35Z
767038116,"Ah. I can confirm that setting `jinja2_native = True` in my ansible.cfg fixes the issue I was seeing.

This should maybe be considered a documentation issue then? There's no mention of this problem and why you might want to enabled the jinja2 native mode in [the User Guide ""Using Variables""](https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html) section, for example.",2021-01-25T18:57:04Z
767049735,recheck,2021-01-25T19:16:57Z
767050994,"Is this a new behavior, or have you seen this on older versions as well? Is there a version where this doesn't occur?

Can you post an example playbook?

needs_info",2021-01-25T19:19:10Z
767058696,"@tms0 thanks. This seems odd.

Can you run the following script (based on how `distro` determines the version with `best=True`):

```python
#!/usr/bin/env python3

from ansible.module_utils import distro

print(distro.os_release_attr('version_id'))
print(distro.lsb_release_attr('release'))
print(distro.distro_release_attr('version_id'))
print(distro.os_release_attr('pretty_name'))
print(distro.lsb_release_attr('description'))
print(distro.uname_attr('release'))
```

One of those is tripping it up. It's taking it as ""best"" because it has a `.` in it when none of the others do.",2021-01-25T19:31:27Z
767066962,The test failure seems like something is not right with the PowerShell HTTP watcher. ,2021-01-25T19:42:35Z
767074935,"Thank you ! You put me on the right track :
```
>>> print(distro._distro)
LinuxDistribution(os_release_file='/etc/os-release', distro_release_file='/etc/iredmail-release', include_lsb=True, include_uname=True, _os_release_info={'pretty_name': 'Debian GNU/Linux 10 (buster)', 'name': 'Debian GNU/Linux', 'version_id': '10', 'version': '10 (buster)', 'version_codename': 'buster', 'id': 'debian', 'home_url': 'https://www.debian.org/', 'support_url': 'https://www.debian.org/support', 'bug_report_url': 'https://bugs.debian.org/', 'codename': 'buster'}, _lsb_release_info={'distributor_id': 'Debian', 'description': 'Debian GNU/Linux 10 (buster)', 'release': '10', 'codename': 'buster'}, _distro_release_info={'name': '1.', 'version_id': '3.2', 'id': 'iredmail'}, _uname_info={})
```

I installed iRedMail a long time ago and it created a  `/etc/iredmail-release` file with the iRedmail version in it !
I upgraded it recently from 1.2 to 1.3.2 and it seems the 3 digit format break everything ! I renamed the file and now everything is working as expected :-)

Thank you very much for your help !",2021-01-25T19:57:02Z
767089246,"The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 2 errors:
```
lib/ansible/modules/apt_key.py:208:32: undefined-variable: Undefined variable 'token'
lib/ansible/modules/apt_key.py:369:45: undefined-variable: Undefined variable 'validate_certs'
```
<!-- job_id: 4901 -->
<!-- job_id: cf7ca8a02a91b9f2f8ce95e60142534c -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-25T20:22:25Z
767134395,Not sure whether this helps anyone: I could get rid of this issue by adding more RAM to the machine executing Ansible.,2021-01-25T21:48:32Z
767140657,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T22:00:29Z
767148872,"Files identified in the description:
* `lib/ansible/plugins/strategy`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-25T22:15:22Z
767161884,I needed to add ansible_connection=ansible.netcommon.network_cli,2021-01-25T22:44:47Z
767278912,"Files identified in the description:
* [`lib/ansible/cli/inventory.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/cli/inventory.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T03:53:16Z
767362414,"same with apt_repository, randomly appearing and being resolved with N iterations.

Very buggy and not reliable.",2021-01-26T07:39:24Z
767432679,/azp run,2021-01-26T09:56:59Z
767432770,"<samp>
Azure Pipelines successfully started running 1 pipeline(s).<br>

</samp>",2021-01-26T09:57:10Z
767441017,"@nitzmahone

> * why expose this as public API (and esp in module_utils, since modules should never need it)?

Honestly, I wasn't sure where to put it, just wanted a separate compat module. The dependency resolver rewrite (https://github.com/ansible/ansible/pull/72591) will need it, ideally through calling `is_valid_collection_name`, though. Any suggestions?

> * should we just wait for 2.12 so we don't need the 2.x fallback?

I wanted to move it out of https://github.com/ansible/ansible/pull/72591 so I thought it'd be better to do it sooner than later.

> * if we are doing for 2.11, the regex needs to be compiled- this gets called A LOT

This is probably unnecessary — it's already cached internally: https://github.com/python/cpython/blob/c92cd0f/Lib/re.py#L285 / https://github.com/python/cpython/blob/2.7/Lib/re.py#L234-L241.",2021-01-26T10:10:39Z
767464677,/rebuild,2021-01-26T10:54:28Z
767502569,/rebuild,2021-01-26T12:11:28Z
767540394,/rebuild,2021-01-26T13:27:58Z
767565400,"I am aware about this issue but I do have an idea about how these could be covered without having to evaluate anything: i would assume all files from vars/ task/ handlers/ should be loaded by someone and add them to the coverage report discovery, even if nobody is loading them. Obviously this means that if someone does runtime includes from other locations, they are on their own.

Shortly, developers following guidelines should be covered. Those diverging, should expect undesirable surprises.",2021-01-26T14:09:43Z
767604987,changelog plz,2021-01-26T15:05:41Z
767607835,"Hi!

Thanks very much for your submission to Ansible.  It sincerely means a lot to us that you've taken time to contribute.

Unfortunately, we're not sure if we want this feature in the program, and I don't want this to seem confrontational.  Our reasons for this are:

   * We think this would convolute the collection resolution process.

However, we're absolutely always up for discussion.  Since this is a really busy project, we don't always see comments on closed tickets, but want to encourage
open dialog.  You can stop by the development list, and we'd be glad to talk about it - and we might even be persuaded otherwise!

   * https://groups.google.com/forum/#!forum/ansible-devel

In the future, sometimes starting a discussion on the development list prior to implementing a feature can make getting things included a little easier, but it's not always necessary.

Thank you once again for this and your interest in Ansible!",2021-01-26T15:09:57Z
767611197,"It looks like only the Windows integration tests are failing:

```
ERROR: Command ""ssh -q -i /root/ansible/test/results/.tmp/id_rsa -o BatchMode=yes -o ServerAliveCountMax=4 -o ServerAliveInterval=15 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -fT -R 8080:ansible.http.tests:80 -R 8443:ansible.http.tests:443 8444:ansible.http.tests:444 -p 22 administrator@ec2-3-87-125-76.compute-1.amazonaws.com 'powershell.exe -NoProfile -ExecutionPolicy Bypass -File .\ansible-test-http-watcher-1611585755.26.ps1 -Hosts ""ansible.http.tests|sni1.ansible.http.tests|fail.ansible.http.tests|self-signed.ansible.http.tests"" -Verbose'"" returned exit status 255.
```

@jborean93 Do you have any insight into the failure? Is this an issue with `windows-httptester.ps1` or maybe a conflict with port forwards?",2021-01-26T15:15:04Z
767613820,"Files identified in the description:
* [`lib/ansible/galaxy/collection/__init__.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/galaxy/collection/__init__.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T15:18:54Z
767616255,"FQCNs must adhere to python identifier rules, and files used as plugins/modules cannot contain hyphens.  You would likely need to convert to an underscore.

When testing a binary module that meets python identifier rules, I can confirm that they are usable from within collections.",2021-01-26T15:22:28Z
767619290,"> 
> 
> FQCNs must adhere to python identifier rules, and files used as plugins/modules cannot contain hyphens. You would likely need to convert to an underscore.
> 
> When testing a binary module that meets python identifier rules, I can confirm that they are usable from within collections.

Thank! It works when i change ""-"" to ""_""",2021-01-26T15:27:03Z
767619831,"Given the above, this seems to be an interaction between mitogen and dnf API and not directly related to Ansible itself.",2021-01-26T15:27:50Z
767620019,"Closing per above.

If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-26T15:28:04Z
767622378,Set to draft until 2.10.6 is actually released,2021-01-26T15:31:14Z
767631879,"Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-26T15:44:43Z
767633383,"The problem here is related to the fact that we need to know whether a strategy operates in ""lockstep"" or not.  And we do this right now by comparing strategy names which isn't flexible.

To properly fix this, we need a way for a strategy to advertise information about itself, and a way to smuggle that information back into the callback plugins.

Notes to self:
1. Look into smuggling this in `TaskResult`
2. Consider just using a simple dict instead of a class
3. DO NOT smuggle the instance of the strategy, as this would open the door to callbacks having easy access to poke at things they should never have access to",2021-01-26T15:46:54Z
767637666,"This is expected, as the group represents the 'list of values' present.

Closing in favor of #73332 which is a feature request to make this behave differently than designed.",2021-01-26T15:53:07Z
767637863,This would require a toggle as the current behaviour is expected.,2021-01-26T15:53:22Z
767658426,!waffling needs_revision,2021-01-26T16:22:44Z
767673038,resolved_by_pr #66389,2021-01-26T16:44:32Z
767690408,"The test `ansible-test sanity --test pep8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pep8.html)] failed with 5 errors:
```
lib/ansible/galaxy/role.py:250:37: E127: continuation line over-indented for visual indent
lib/ansible/galaxy/role.py:256:69: E226: missing whitespace around arithmetic operator
lib/ansible/galaxy/role.py:265:161: E501: line too long (181 > 160 characters)
lib/ansible/galaxy/role.py:277:5: E303: too many blank lines (2)
lib/ansible/galaxy/role.py:371:53: E241: multiple spaces after ','
```
<!-- job_id: 4984 -->
<!-- job_id: fb8890ca7c0b89b8eab2f4d036eda2e6 -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 2.7` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:215:27: SyntaxError: def _is_path_sane(path: str) -> bool:
```
<!-- job_id: 4984 -->
<!-- job_id: bf2685f2f5917894cc4a968540d916be -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 2.6` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:215:27: SyntaxError: def _is_path_sane(path: str) -> bool:
```
<!-- job_id: 4984 -->
<!-- job_id: eb65e85cd2a72fd6500c2ec2f1ba6885 -->
<!-- job_id: None -->
The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:371:51: bad-whitespace: Exactly one space required after comma                         self._extract(role_tar_file,  archive_parent_dir, path)                                                    ^
```
<!-- job_id: 4984 -->
<!-- job_id: fd5f4b87e7e06c31cb07b0e508e5dd3c -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-26T17:11:07Z
767744185,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T18:36:28Z
767744191,"@jeremytourville: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-26T18:36:29Z
767745291,"The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 1 error:
```
lib/ansible/modules/apt_key.py:291:75: undefined-variable: Undefined variable 'to_text'
```
<!-- job_id: 5003 -->
<!-- job_id: 58ec6176339826b416c56d913c6ffc0e -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-26T18:38:10Z
767746916,!component =lib/ansible/modules/clustering/k8s/k8s.py,2021-01-26T18:41:01Z
767750417,"Files identified in the description:
* `lib/ansible/modules/clustering/k8s/k8s.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T18:47:03Z
767750422,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/clustering/k8s/k8s.py -> https://galaxy.ansible.com/community/kubernetes

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-26T18:47:04Z
767759712,"Files identified in the description:
* [`lib/ansible/modules/yum.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/yum.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T19:02:59Z
767787484,"The test `ansible-test sanity --test package-data` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/package-data.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/package-data.py"" returned exit status 1.
>>> Standard Error
Traceback (most recent call last):
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 376, in <module>
    main()
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 353, in main
    sdist_path = create_sdist(tmp_dir)
  File ""/root/ansible/test/sanity/code-smell/package-data.py"", line 167, in create_sdist
    raise Exception('make snapshot failed:\n%s' % stderr)
Exception: make snapshot failed:
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
Traceback (most recent call last):
  File ""hacking/build-ansible.py"", line 103, in <module>
    main()
  File ""hacking/build-ansible.py"", line 92, in main
    retval = command.main(args)
  File ""/tmp/tmp0v3v6tp_/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 279, in main
    allvars[cli_name] = opts_docs(cli_class_name, cli_name)
  File ""/tmp/tmp0v3v6tp_/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 120, in opts_docs
    fromlist=[cli_class_name]), cli_class_name)
  File ""/tmp/tmp0v3v6tp_/lib/ansible/cli/galaxy.py"", line 37, in <module>
    from ansible.galaxy.role import GalaxyRole
  File ""/tmp/tmp0v3v6tp_/lib/ansible/galaxy/role.py"", line 246
    "" manually if youreally want to put the role here."")
                                                      ^
SyntaxError: invalid syntax
make: *** [generate_rst] Error 1
```
<!-- job_id: 5007 -->
<!-- job_id: fbbfe49f9c73dc5b9b60a3e802b8b675 -->
<!-- job_id: None -->
The test `ansible-test sanity --test docs-build` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/docs-build.html)] failed with the error:
```
Command ""/usr/bin/python3.6 /root/ansible/test/sanity/code-smell/docs-build.py"" returned exit status 1.
>>> Standard Error
Command 'make base_singlehtmldocs' failed with status code: 2
--> Standard Output
../../hacking/build-ansible.py collection-meta --template-file=../templates/collections_galaxy_meta.rst.j2 --output-dir=rst/dev_guide/ ../../lib/ansible/galaxy/data/collections_galaxy_meta.yml
../../hacking/build-ansible.py document-config --template-file=../templates/config.rst.j2 --output-dir=rst/reference_appendices/ ../../lib/ansible/config/base.yml
mkdir -p rst/cli
../../hacking/build-ansible.py generate-man --template-file=../templates/cli_rst.j2 --output-dir=rst/cli/ --output-format rst ../../lib/ansible/cli/*.py
Makefile:113: recipe for target 'cli' failed
--> Standard Error
Traceback (most recent call last):
  File ""../../hacking/build-ansible.py"", line 103, in <module>
    main()
  File ""../../hacking/build-ansible.py"", line 92, in main
    retval = command.main(args)
  File ""/root/ansible/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 279, in main
    allvars[cli_name] = opts_docs(cli_class_name, cli_name)
  File ""/root/ansible/hacking/build_library/build_ansible/command_plugins/generate_man.py"", line 120, in opts_docs
    fromlist=[cli_class_name]), cli_class_name)
  File ""/root/ansible/lib/ansible/cli/galaxy.py"", line 37, in <module>
    from ansible.galaxy.role import GalaxyRole
  File ""/root/ansible/lib/ansible/galaxy/role.py"", line 246
    "" manually if youreally want to put the role here."")
                                                      ^
SyntaxError: invalid syntax
make: *** [cli] Error 1
```
<!-- job_id: 5007 -->
<!-- job_id: a5afe9331694e0023bab90bf325c3696 -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 3.9` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:36: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 7e3e1c28a5a4b198582a86ee123b7e9a -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 3.8` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:36: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 6063242aa7a657f303b636f20848b49e -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 3.7` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:86: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 57d19b90648d9bcf89918079b36543bc -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 3.6` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:86: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 5f3bb752fbc62d9a1797555f098242f0 -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 3.5` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:86: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 88b1c2c50accaeb341d433c1795296d9 -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 2.7` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:86: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: 16d963df57497d3c0193a54d8f64eca8 -->
<!-- job_id: None -->
The test `ansible-test sanity --test compile --python 2.6` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/compile.html)] failed with 1 error:
```
lib/ansible/galaxy/role.py:246:86: SyntaxError: "" manually if youreally want to put the role here."")
```
<!-- job_id: 5007 -->
<!-- job_id: c724ab0afcba59d7f360a6591ec863c9 -->
<!-- job_id: None -->
The test `ansible-test sanity --test pylint` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/pylint.html)] failed with 2 errors:
```
lib/ansible/cli/galaxy.py:37:0: syntax-error: Cannot import 'ansible.galaxy.role' due to syntax error 'invalid syntax (&lt;unknown&gt;, line 246)'
lib/ansible/galaxy/role.py:246:0: syntax-error: invalid syntax (&lt;unknown&gt;, line 246)
```
<!-- job_id: 5007 -->
<!-- job_id: b469d9062425af496ae6ae2de3c04b21 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-26T19:51:59Z
767792331,"I've had some internal discussion about this fix and I'm leaning towards abandoning this PR for the time being as a result.

The main goal was to restore the original behavior of `type: 'str'` and keep this new behavior as an opt-in for module authors, removing the noisy and mostly useless warnings.

After looking at this behavior more broadly, the various `check_` methods are actually _coercion_, not just validation, methods since they mutate the input value if possible into the specified type. In the case of `dict` and `list`, we even accept a string with special formatting, `k1=v1,k2=v2`, and `1,2,3` respectively.

A couple of ideas discussed internally were making `<type>_strict` for all types or adding an `allow_conversion` parameter to `AnsibleModule` or for each argument in the spec. That would give module authors the ability to control the type coercion. There hasn't been huge demand for such a feature, so I'm not sure how worthwhile it would be to implement.

Either of those are probably a more complete solution than the band-aid this PR is adding.

",2021-01-26T20:00:35Z
767792774,"Will this feature be added to ansible's next version?

Also, could an example of how to include optionals be supplied? ",2021-01-26T20:01:23Z
767797897,2.10+ avoids this issue using https://github.com/ansible/ansible/pull/67386 from what i can tell.,2021-01-26T20:10:30Z
767798747,"i would like to request a backport, since this is broken in 2.9.X",2021-01-26T20:12:04Z
767799273,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/cloud/vmware/vmware_host_firewall_manager.py -> https://galaxy.ansible.com/community/vmware

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-26T20:13:00Z
767821099,"> the reason is that until ansible 2.8 you were not guaranteed to always have an `ansible_facts` variable, so for older versions you need an extra `|default({})` for the cases in which you did not gather facts yet.

Hi Brian appreciate if you can share insights please.",2021-01-26T20:54:01Z
767822329,"If you have further questions please stop by IRC or the mailing list:

   * IRC: #ansible on irc.freenode.net
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project ",2021-01-26T20:56:15Z
767825023,"I may pause on a better implementation until 2.12.

Once we have py3 only for controller, we're going to look into using `typing.Protocol` and then a proxy that will only allow access of the interface defined by the union of the `Protocol` class(es).

Still debating things...",2021-01-26T21:01:24Z
767826699,"> * irc.freenode.net

thank you mate. I was hoping to really just get the correct syntax if you are aware?",2021-01-26T21:04:32Z
767829973,"from #ansible 2021-01-26 19:12 UTC:

> < smemsh> hello.  if a static role (included by play 'roles' keyword) has its own include_role task, is this run dynamically or not? ie, is it effectively an import_role because the parent role was included statically?
> <@sivel> smemsh: `roles:` and `import_role` are pre-processor macros that run at playbook parsing time, and the contents are merged into the Play.
> <@sivel> As such, it would merge the `include_task` into the play, but not process it
> <@sivel> so it will still be dynamic
> <@sivel> err, include_role
> <@sivel> so it would stay as include_role until the task executor reaches it
> <@sivel> then it would be processed and merged in
> < smemsh> that's what i would think.  but such a task does not respect 'public' and the variables act like it was import_role.  https://pastebin.com/zqFYdnHt demonstrates.  the 'testvar' is printed with its contents as though it were public",2021-01-26T21:10:40Z
767834523,"Directly copy/pasted your reproducer, and I cannot reproduce the behavior you describe:

```
$ ansible-playbook 73378.yml -vv
ansible-playbook 2.9.17
  config file = None
  configured module search path = ['/Users/matt/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /Users/matt/projects/ansibledev/ansible/lib/ansible
  executable location = /Users/matt/projects/ansibledev/ansible/bin/ansible-playbook
  python version = 3.9.0 (default, Oct  6 2020, 11:36:19) [Clang 12.0.0 (clang-1200.0.32.2)]
No config file found; using defaults

[SNIP]

PLAYBOOK: 73378.yml **************************************************************************************************
1 plays in 73378.yml

PLAY [localhost] *****************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************
task path: /Users/matt/projects/ansibledev/playbooks/73378/73378.yml:1
ok: [localhost]
META: ran handlers

TASK [include_role : test2] ******************************************************************************************
task path: /Users/matt/projects/ansibledev/playbooks/73378/roles/test/tasks/main.yml:1
META: noop

TASK [debug] *********************************************************************************************************
task path: /Users/matt/projects/ansibledev/playbooks/73378/73378.yml:6
ok: [localhost] => {
    ""testvar"": ""VARIABLE IS NOT DEFINED!: 'testvar' is undefined""
}
META: ran handlers
META: ran handlers

PLAY RECAP ***********************************************************************************************************
localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```

I can only reproduce it if I set `public: true` on the `include_role`.",2021-01-26T21:19:23Z
767840312,"uhh, you are right, I tried it in a new directory, it's not doing it.  don't understand the difference.  there are other roles and plays in the dir where I can reproduce it, but there's no config file and `ansible-config dump --only-changed` is showing empty.

sorry to waste your time, will close this for now and try to figure out how it's different and update ticket once I figure out.  thanks.",2021-01-26T21:30:19Z
767849395,"ok, so there was a defaults file that I missed:
```
# roles/test/defaults/main.yml 
---

testvar: foo
```
removing this changes the behavior, sorry about that, I think this is correct behavior, because the parent role is setting the default in the namespace of child roles that it's calling.

If there's a way to delete github tickets so this doesn't index, please do...",2021-01-26T21:48:46Z
767865618,"Files identified in the description:
* `lib/ansible/galaxy`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-26T22:21:19Z
767869396,Works only with ansible 2.10,2021-01-26T22:29:12Z
767876795,"@rshiva777 This issue is waiting for you to provide the requested data in the description. Please edit the description or the issue will be closed.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: needs_info_base --->",2021-01-26T22:44:41Z
767909121,"@azrdev Did you actually check the result of the example you gave?

```
ec2-user@pandora testing $ cat invent/00-hosts 
host1 extra_groups='[""g1"",""g2"",""g3""]'

ec2-user@pandora testing $ cat invent/99-constructed.yml 
plugin: constructed
keyed_groups:
- key: extra_groups
  separator: """"
  prefix: """"

ec2-user@pandora testing $ ansible-inventory -i invent --list
{
    ""_meta"": {
        ""hostvars"": {
            ""host1"": {
                ""ansible_local"": {},
                ""extra_groups"": [
                    ""g1"",
                    ""g2"",
                    ""g3""
                ]
            }
        }
    },
    ""all"": {
        ""children"": [
            ""g1"",
            ""g2"",
            ""g3"",
            ""ungrouped""
        ]
    },
    ""g1"": {
        ""hosts"": [
            ""host1""
        ]
    },
    ""g2"": {
        ""hosts"": [
            ""host1""
        ]
    },
    ""g3"": {
        ""hosts"": [
            ""host1""
        ]
    }
}
```

See https://github.com/ansible/ansible/blob/13d08d232c8b692ec79dba81c9eb83887ee554a2/lib/ansible/plugins/inventory/__init__.py#L435-L437",2021-01-26T23:58:43Z
767919369,"Hello,

So there are a few different things here:

First, the `yum makecache` process is expected in this case:

https://github.com/ansible/ansible/blob/13d08d232c8b692ec79dba81c9eb83887ee554a2/lib/ansible/modules/yum.py#L707-L718

You're asking it to gpg-verify the repo metadata, so it needs a GPG key installed to verify it against. It uses `yum -y makecache` to try to fetch the public key.

If you look at their [official .repo file](https://packages.gitlab.com/install/repositories/runner/gitlab-runner/config_file.repo?os=redhatenterpriseserver&dist=7&source=script), it has URLs you can use for this in your `yum_repository` task. 

As far as the ""`yum makecache` taking forever"" problem, I'm not able to reproduce that (copying your reproducer verbatim except setting the gpg options to `yes`). It sounds like maybe there was a network issue between Azure and the yum mirrors it was hitting (for `makecache` it would hit all of the enabled ones), or something else going on. You could try the `yum -y makecache` interactively and see if it's equally slow, but this isn't likely an Ansible issue.

Hope some of this helps :-)

needs_info",2021-01-27T00:25:56Z
767922522,Excellent.  Merged.,2021-01-27T00:29:55Z
767923663,!component =lib/ansible/playbook/role/__init__.py,2021-01-27T00:31:42Z
767926232,backport request,2021-01-27T00:38:10Z
767926983,"Files identified in the description:
* [`lib/ansible/playbook/role/__init__.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/role/__init__.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-27T00:40:13Z
767943253,Turns out the new forwarded port option added https://github.com/ansible/ansible/pull/71979/files#diff-c138acaaea6f25d5343d82539ade5353d9111d162a9575962068388e48d7a944R769 was missing the preceding `-R`  argument causing ssh to just fail entirely. Have pushed a commit that fixes that up.,2021-01-27T01:23:05Z
767960538,"@samdoran CI is green, just pending your review.",2021-01-27T02:06:49Z
767961676,Backport PR to stable-2.9 https://github.com/ansible/ansible/pull/73382.,2021-01-27T02:09:47Z
768060204,"@relrod thanks a lot for the quick and detailed response.

The behavior is consistent. It happens every time we spin up the servers and run the playbook.

It does not happen, when I have the playbook run up to the add repo / yum install tasks, and then do the add repo / install yum manually. Interesting enough, YUM does not seem to makecache in case I manually add the repo and install the package, as it completes quite quickly.

I need to says we're also working on Azure performance issues in parallel. Our machines should have 60 MB/s write throughput on the disks. However, we only get 7-10 MB/s throughput. The YUM cache is ~ 10 GB on the system, so writing the cache takes 20-30 minutes alone, as it seems (at least iotop reveals that yum makecache is writing all the time to the disk). This also happens when I run yum makecache manually. When I move the YUM cache to the scratch disk (which has way more throughput, but is ephemeral), this speeds things up dramatically.

I tried to add the GPG keys using the rpm_key module before I run yum_repository and yum. This does not change the behavior, however. I also tried creating the GPG keys in the targets filesystem and have the repo file point to that files. No change.

I really would like to find a way to re-enable GPG under that circumstances.

But in the end, your answer indicates that this behavior is by design. Is there any other way to avoid the makecache with the YUM module? Do you think switching over to the DNF module will help?



",2021-01-27T06:17:13Z
768063310,We tried it over ansible-playbook 2.10.3 and also ansible 2.4 .Faced the same issue in both of them,2021-01-27T06:24:33Z
768064831,"- include_vars:
   file: varfile_1.json
   name: varfile_1

- name: Including tasks for role deployment
  include_tasks: abc/main.yml
  vars:
    var_tag: varfile_1.json


There are around 170+ include in similar way. ",2021-01-27T06:27:54Z
768071116,"Three collections are currently missing from this PR:
- dellemc.openmanage
- infoblox.nios_modules
- kubernetes.core

For the first two, it depends on whether they are added to Ansible 3.0.0 or not. The review deadline for new collections is today ([January 27th](https://hackmd.io/y7BBcweNR3aRVLuMbKkDxw#Proposed-Schedule-for-Ansible-30)). If any of these collections will be included, we can start the process of moving the content that they share with community.general to the new collection for community.general 2.0.0. If they are not included, the content will stay in community.general until at least version 3.0.0.

For kubernetes.core it still seems not to be clear how the move from community.kubernetes to kubernetes.core will actually be done. Until that isn't decided, it doesn't make sense to update any reference (especially since kubernetes.core is probably not contained in Ansible 3.0.0 as long as it is unclear what happens).",2021-01-27T06:42:59Z
768072598,Rebased to remove conflict.,2021-01-27T06:46:20Z
768075653,"A `allow_conversion` parameter in argument_spec would be awesome, because it would be a backwards-compatible solution: existing Ansible versions would simply ignore it because they don't know about it - well, except that their validate-module sanity tests will complain.

This would allow collections which support Ansible 2.9 etc. to use this feature without doing crazy things.

About `allow_conversion`: I could image it being three-valued: `allow` (current behavior), `warn` (current behavior for `type=str` if not disabled by user), `deny` (directly call fail_json).",2021-01-27T06:53:44Z
768152704,"The test `ansible-test sanity --test rstcheck` [[explain](https://docs.ansible.com/ansible/devel/dev_guide/testing/sanity/rstcheck.html)] failed with 3 errors:
```
docs/docsite/rst/dev_guide/developing_program_flow_modules.rst:644:0: (python) invalid syntax
docs/docsite/rst/dev_guide/developing_program_flow_modules.rst:658:0: (python) invalid syntax
docs/docsite/rst/dev_guide/developing_program_flow_modules.rst:703:0: (python) invalid syntax
```
<!-- job_id: 5047 -->
<!-- job_id: 04dcd86e406a69c248b46eb10a650a64 -->
<!-- job_id: None -->

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: shippable_test_result --->",2021-01-27T09:24:24Z
768177934,Note: related to #64999 and #72725. POC fix at #72856.,2021-01-27T10:08:15Z
768178697,"Files identified in the description:
* `lib/ansible/modules/network/dellos6/dellos6_command.py`
* `lib/ansible/modules/system/runit.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-27T10:09:36Z
768178702,"@dhanmc, just so you are aware we have a dedicated Working Group for network.
You can find other people interested in this in `#ansible-network` on Freenode IRC
For more information about communities, meetings and agendas see https://github.com/ansible/community

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: community_workgroups --->",2021-01-27T10:09:36Z
768187667,"Files identified in the description:
* [`lib/ansible/modules/user.py`](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/user.py)

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-27T10:25:08Z
768191162,Splitting the rewrite into some other PR,2021-01-27T10:30:41Z
768196578,!component =lib/ansible/modules/network/dellos6/dellos6_command.py,2021-01-27T10:40:43Z
768199070,Note: my POC PR that changes the way handlers are executed (https://github.com/ansible/ansible/pull/73159) fixes this issue.,2021-01-27T10:45:15Z
768200795,"Files identified in the description:
* `lib/ansible/modules/network/dellos6/dellos6_command.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-27T10:48:33Z
768202068,"Thank you Martin but i have no idea what that means or what you would like me to do. sorry  i am totally new to ansible and i cant seem to find that file path on the box :)

> !component =lib/ansible/modules/network/dellos6/dellos6_command.py

",2021-01-27T10:51:05Z
768205110,"Thank you very much for your interest in Ansible. This plugin is no longer maintained in this repository and has been migrated to https://github.com/ansible-collections/dellemc.os6.

Please re-submit this issue in the above repository.

If you have further questions please stop by IRC or the mailing list:

* IRC: #ansible on irc.freenode.net
* mailing list: https://groups.google.com/forum/#!forum/ansible-project",2021-01-27T10:56:49Z
768208947,"A general allow_conversation in the argument spec might not be a good idea.  When Ansible does not get a value via yaml (specified at the command line or via k=v in a playbook) it deals in strings. So int, dict, list, etc are handed to the module as strings. Conversion is essential in those cases.  Module authors can't specify no-conversion in that general case without breaking those Ansible features. 

No-conversion specifically for str type is different from the general case. Controllerside Ansible will either get typed data (via yaml) or str (via commandline or k=v).  So if module side Ansible is expecting a str and received some other type, it can know for certain that the user specified the wrong type.

So type=strict_str might not be the right way.  But whatever you choose will need to limit itself to what to do when a string is expected module side.   Other types require conversion in order to work. ",2021-01-27T11:03:49Z
768219267,"Files identified in the description:
* `lib/ansible/modules/network/files/net_get.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-27T11:22:33Z
758298429,"Files identified in the description:
* `lib/ansible/modules/network/aireos/aireos_command.py`

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-11T23:53:56Z
758298435,"@nasedora, just so you are aware we have a dedicated Working Group for network.
You can find other people interested in this in `#ansible-network` on Freenode IRC
For more information about communities, meetings and agendas see https://github.com/ansible/community

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: community_workgroups --->",2021-01-11T23:53:57Z
758298437,"Thank you very much for your interest in Ansible. Ansible has migrated much of the content into separate repositories to allow for more rapid, independent development. We are closing this issue/PR because this content has been moved to one or more collection repositories.

* lib/ansible/modules/network/aireos/aireos_command.py -> https://galaxy.ansible.com/community/network

For further information, please see:
https://github.com/ansible/ansibullbot/blob/master/docs/collection_migration.md

<!--- boilerplate: collection_migration --->",2021-01-11T23:53:58Z
758298599,"for what it's worth, I ""resolved"" this issue by installing python3 and set ansible to find the binary",2021-01-11T23:54:26Z
758305732,"Thanks, @fredericrous 

I think I am already using python3.9

ansible --version | grep ""python version""
`  python version = 3.9.1 (default, Jan  8 2021, 17:17:43) [Clang 12.0.0 (clang-1200.0.32.28)]`",2021-01-12T00:15:38Z
758391767," > @jorhett What you are interested in, is the information in the `Configuration` column. The parameter name, and the configuration names are not always the same.

I'm sorry, I wasn't clear. The table row makes sense. Linking to the table row as a ""solution"" is baffling because as others have said: 
> that still does not tell me where to put the replacement

If you're going to link to this as an answer, then
> This would be a great place to be explicit about how to utilize it correctly.

In short, something somewhere needs to say ""replace this with this"" and as all the comments in this thread indicate-- it's just not clear.",2021-01-12T04:33:46Z
758498869,"List Information
================

Hi!

Thanks very much for your interest in Ansible.  It sincerely means a lot to us. 

This appears to be a user question, and we'd like to direct these kinds of things to either the mailing list or the IRC channel.

   * IRC: #ansible on irc.freenode.net   
   * mailing list: https://groups.google.com/forum/#!forum/ansible-project

If you can stop by there, we'd appreciate it.  This allows us to keep the issue tracker for bugs, pull requests, RFEs and the like.

Thank you once again and we look forward to seeing you on the list or IRC.  Thanks!",2021-01-12T08:38:51Z
758517861,"what‘s mean it？ I just add the group，then how to ask question?
![image](https://user-images.githubusercontent.com/42507175/104292692-1c65fa80-54f8-11eb-8b89-df42725afa07.png)
’",2021-01-12T09:14:04Z
758667152,"Files identified in the description:
None

If these files are incorrect, please update the `component name` section of the description or use the `!component` bot command.

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: components_banner --->",2021-01-12T13:50:29Z
758667159,"@som-shekhar: Greetings! Thanks for taking the time to open this issue. In order for the community to handle your issue effectively, we need a bit more information.

Here are the items we could not find in your description:
- component name

Please set the description of this issue with an appropriate template from:
https://github.com/ansible/ansible/tree/devel/.github/ISSUE_TEMPLATE

[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)
<!--- boilerplate: issue_missing_data --->",2021-01-12T13:50:30Z
